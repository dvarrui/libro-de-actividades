;(function(angular){'use strict';angular.module('li.directives.common.element-hook',[]).directive('liCommonElementHook',function(){return{restrict:'A',scope:{liCommonElementHook:'='},link:function link($scope,$element){$scope.liCommonElementHook=$element;}};});})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};angular.module('li.services.utils.lodash-utils',[]).factory('$liLodashUtils',['$window',function($window){;(function(){function n(n,r,t){if(r!==r){n:{for(r=n.length,t+=-1;++t<r;){var e=n[t];if(e!==e){n=t;break n;}}n=-1;}return n;}for(t-=1,e=n.length;++t<e;){if(n[t]===r)return t;}return-1;}function r(n){return null==n?"":n+"";}function t(n){return hr[n];}function e(n){return vr[n];}function u(n){return!!n&&(typeof n==='undefined'?'undefined':_typeof(n))=="object";}function o(n){return gr[n];}function i(){}function a(n){var r=n?n.length:0;for(this.data={hash:Mr(null),set:new Fr()};r--;){this.push(n[r]);}}function f(n,r){var t=n.data;return(typeof r=="string"||hn(r)?t.set.has(r):t.hash[r])?0:-1;}function c(n,r){var t=-1,e=n.length;for(r||(r=Array(e));++t<e;){r[t]=n[t];}return r;}function l(n,r){for(var t=-1,e=n.length;++t<e&&false!==r(n[t],t,n);){}return n;}function s(n,r){for(var t=-1,e=n.length,u=-1,o=[];++t<e;){var i=n[t];r(i,t,n)&&(o[++u]=i);}return o;}function p(n,r){for(var t=-1,e=n.length,u=Array(e);++t<e;){u[t]=r(n[t],t,n);}return u;}function h(n,r){for(var t=-1,e=n.length;++t<e;){if(r(n[t],t,n))return true;}return false;}function v(n,r){var t;if(null==r)t=n;else{t=ft(r);var e=n;e||(e={});for(var u=-1,o=t.length;++u<o;){var i=t[u];e[i]=r[i];}t=e;}return t;}function g(n,r,t){var e=typeof n==='undefined'?'undefined':_typeof(n);return"function"==e?r===Sn?n:P(n,r,t):null==n?On:"object"==e?I(n):r===Sn?In(n):S(n,r);}function y(n,r,t,e,u,o,i){var a;if(t&&(a=u?t(n,e,u):t(n)),a!==Sn)return a;if(!hn(n))return n;if(e=it(n)){if(a=Z(n),!r)return c(n,a);}else{var f=_r.call(n),s=f==Fn;if(f!=qn&&f!=_n&&(!s||u))return pr[f]?Y(n,f,r):u?n:{};if(wr(n))return u?n:{};if(a=V(s?{}:n),!r)return v(a,n);}for(o||(o=[]),i||(i=[]),u=o.length;u--;){if(o[u]==n)return i[u];}return o.push(n),i.push(a),(e?l:A)(n,function(e,u){a[u]=y(e,r,t,u,n,o,i);}),a;}function b(n,r,t,e){var u=e,o=u;return Xr(n,function(n,i,a){i=+r(n,i,a),(t(i,u)||i===e&&i===o)&&(u=i,o=n);}),o;}function d(n,r){var t=[];return Xr(n,function(n,e,u){r(n,e,u)&&t.push(n);}),t;}function x(n,r,t,e){var u;return t(n,function(n,t,o){return r(n,t,o)?(u=e?t:n,false):void 0;}),u;}function m(n,r,t,e){e||(e=[]);for(var o=-1,i=n.length;++o<i;){var a=n[o];if(u(a)&&z(a)&&(t||it(a)||ln(a))){if(r)m(a,r,t,e);else for(var f=e,c=-1,l=a.length,s=f.length;++c<l;){f[s+c]=a[c];}}else t||(e[e.length]=a);}return e;}function A(n,r){return nt(n,r,ft);}function j(n,r,t){if(null!=n){n=X(n),t!==Sn&&t in n&&(r=[t]),t=0;for(var e=r.length;null!=n&&t<e;){n=X(n)[r[t++]];}return t&&t==e?n:Sn;}}function w(n,r,t,e,o,i){if(n===r)n=true;else if(null==n||null==r||!hn(n)&&!u(r))n=n!==n&&r!==r;else n:{var a=w,f=it(n),c=it(r),l=Un,s=Un;f||(l=_r.call(n),l==_n?l=qn:l!=qn&&(f=yn(n))),c||(s=_r.call(r),s==_n?s=qn:s!=qn&&yn(r));var p=l==qn&&!wr(n),c=s==qn&&!wr(r),s=l==s;if(!s||f||p){if(!e&&(l=p&&kr.call(n,"__wrapped__"),c=c&&kr.call(r,"__wrapped__"),l||c)){n=a(l?n.value():n,c?r.value():r,t,e,o,i);break n;}if(s){for(o||(o=[]),i||(i=[]),l=o.length;l--;){if(o[l]==n){n=i[l]==r;break n;}}o.push(n),i.push(r),n=(f?q:R)(n,r,a,t,e,o,i),o.pop(),i.pop();}else n=false;}else n=M(n,r,l);}return n;}function O(n,r){var t=r.length,e=t;if(null==n)return!e;for(n=X(n);t--;){var u=r[t];if(u[2]?u[1]!==n[u[0]]:!(u[0]in n))return false;}for(;++t<e;){var u=r[t],o=u[0],i=n[o],a=u[1];if(u[2]){if(i===Sn&&!(o in n))return false;}else if(u=Sn,u===Sn?!w(a,i,void 0,true):!u)return false;}return true;}function E(n,r){var t=-1,e=z(n)?Array(n.length):[];return Xr(n,function(n,u,o){e[++t]=r(n,u,o);}),e;}function I(n){var r=D(n);if(1==r.length&&r[0][2]){var t=r[0][0],e=r[0][1];return function(n){return null==n?false:(n=X(n),n[t]===e&&(e!==Sn||t in n));};}return function(n){return O(n,r);};}function S(n,r){var t=it(n),e=H(n)&&r===r&&!hn(r),u=n+"";return n=nn(n),function(o){if(null==o)return false;var i=u;if(o=X(o),!(!t&&e||i in o)){if(o=1==n.length?o:j(o,U(n)),null==o)return false;i=tn(n),o=X(o);}return o[i]===r?r!==Sn||i in o:w(r,o[i],Sn,true);};}function T(n){return function(r){return null==r?Sn:X(r)[n];};}function k(n){var r=n+"";return n=nn(n),function(t){return j(t,n,r);};}function _(n,r,t,e,u){return u(n,function(n,u,o){t=e?(e=false,n):r(t,n,u,o);}),t;}function U(n){var r=0,t=-1,e=-1,u=n.length,r=null==r?0:+r||0;for(0>r&&(r=-r>u?0:u+r),t=t===Sn||t>u?u:+t||0,0>t&&(t+=u),u=r>t?0:t-r>>>0,r>>>=0,t=Array(u);++e<u;){t[e]=n[e+r];}return t;}function C(n,r){var t=n.length;for(n.sort(r);t--;){n[t]=n[t].c;}return n;}function N(n,r,t){var e=W(),u=-1;return r=p(r,function(n){return e(n);}),n=E(n,function(n){return{a:p(r,function(r){return r(n);}),b:++u,c:n};}),C(n,function(n,r){var e;n:{e=-1;for(var u=n.a,o=r.a,i=u.length,a=t.length;++e<i;){var f;r:{f=u[e];var c=o[e];if(f!==c){var l=null===f,s=f===Sn,p=f===f,h=null===c,v=c===Sn,g=c===c;if(f>c&&!h||!p||l&&!v&&g||s&&g){f=1;break r;}if(f<c&&!l||!g||h&&!s&&p||v&&p){f=-1;break r;}}f=0;}if(f){if(e>=a){e=f;break n;}e=t[e],e=f*("asc"===e||true===e?1:-1);break n;}}e=n.b-r.b;}return e;});}function P(n,r,t){if(typeof n!="function")return On;if(r===Sn)return n;switch(t){case 1:return function(t){return n.call(r,t);};case 3:return function(t,e,u){return n.call(r,t,e,u);};case 4:return function(t,e,u,o){return n.call(r,t,e,u,o);};case 5:return function(t,e,u,o,i){return n.call(r,t,e,u,o,i);};}return function(){return n.apply(r,arguments);};}function F(n){var r=new Nr(n.byteLength);return new qr(r).set(new qr(n)),r;}function $(n,r){return function(t,e,u){if(u&&K(t,e,u)&&(e=Sn),e=W(e,u,3),1==e.length){it(t)||(t=null==t?[]:z(t)?i.support.unindexedChars&&gn(t)?t.split(""):hn(t)?t:Object(t):mn(t)),u=t;for(var o=e,a=-1,f=u.length,c=r,l=c;++a<f;){var s=u[a],p=+o(s);n(p,c)&&(c=p,l=s);}if(u=l,!t.length||u!==r)return u;}return b(t,e,n,r);};}function q(n,r,t,e,u,o,i){var a=-1,f=n.length,c=r.length;if(f!=c&&(!u||c<=f))return false;for(;++a<f;){var l=n[a],c=r[a],s=e?e(u?c:l,u?l:c,a):Sn;if(s!==Sn){if(s)continue;return false;}if(u){if(!h(r,function(n){return l===n||t(l,n,e,u,o,i);}))return false;}else if(l!==c&&!t(l,c,e,u,o,i))return false;}return true;}function M(n,r,t){switch(t){case Cn:case Nn:return+n==+r;case Pn:return n.name==r.name&&n.message==r.message;case $n:return n!=+n?r!=+r:n==+r;case Mn:case Rn:return n==r+"";}return false;}function R(n,r,t,e,u,o,i){var a=ft(n),f=a.length,c=ft(r).length;if(f!=c&&!u)return false;for(c=f;c--;){var l=a[c];if(!(u?l in r:kr.call(r,l)))return false;}for(var s=u;++c<f;){var l=a[c],p=n[l],h=r[l],v=e?e(u?h:p,u?p:h,l):Sn;if(v===Sn?!t(p,h,e,u,o,i):!v)return false;s||(s="constructor"==l);}return s||(t=n.constructor,e=r.constructor,!(t!=e&&"constructor"in n&&"constructor"in r)||typeof t=="function"&&t instanceof t&&typeof e=="function"&&e instanceof e)?true:false;}function W(n,r,t){var e=i.callback||wn,e=e===wn?g:e;return t?e(n,r,t):e;}function B(){var r=i.indexOf||rn;return r=r===rn?n:r;}function D(n){n=xn(n);for(var r=n.length;r--;){var t=n[r][1];n[r][2]=t===t&&!hn(t);}return n;}function L(n,r){var t=null==n?Sn:n[r];return vn(t)?t:Sn;}function Z(n){var r=n.length,t=new n.constructor(r);return r&&"string"==typeof n[0]&&kr.call(n,"index")&&(t.index=n.index,t.input=n.input),t;}function V(n){return n=n.constructor,typeof n=="function"&&n instanceof n||(n=Object),new n();}function Y(n,r,t){var e=n.constructor;switch(r){case Wn:return F(n);case Cn:case Nn:return new e(+n);case Bn:case Dn:case Ln:case Zn:case Vn:case Yn:case zn:case Gn:case Kn:return e instanceof e&&(e=Hr[r]),r=n.buffer,new e(t?F(r):r,n.byteOffset,n.length);case $n:case Rn:return new e(n);case Mn:var u=new e(n.source,or.exec(n));u.lastIndex=n.lastIndex;}return u;}function z(n){return null!=n&&J(rt(n));}function G(n,r){return n=typeof n=="number"||ar.test(n)?+n:-1,r=null==r?Kr:r,-1<n&&0==n%1&&n<r;}
function K(n,r,t){if(!hn(t))return false;var e=typeof r==='undefined'?'undefined':_typeof(r);return("number"==e?z(t)&&G(r,t.length):"string"==e&&r in t)?(r=t[r],n===n?n===r:r!==r):false;}function H(n,r){var t=typeof n==='undefined'?'undefined':_typeof(n);return"string"==t&&rr.test(n)||"number"==t?true:it(n)?false:!nr.test(n)||null!=r&&n in X(r);}function J(n){return typeof n=="number"&&-1<n&&0==n%1&&n<=Kr;}function Q(n){for(var r=dn(n),t=r.length,e=t&&n.length,u=!!e&&J(e)&&(it(n)||ln(n)||gn(n)),o=-1,i=[];++o<t;){var a=r[o];(u&&G(a,e)||kr.call(n,a))&&i.push(a);}return i;}function X(n){if(i.support.unindexedChars&&gn(n)){for(var r=-1,t=n.length,e=Object(n);++r<t;){e[r]=n.charAt(r);}return e;}return hn(n)?n:Object(n);}function nn(n){if(it(n))return n;var t=[];return r(n).replace(tr,function(n,r,e,u){t.push(e?u.replace(ur,"$1"):r||n);}),t;}function rn(r,t,e){var u=r?r.length:0;if(!u)return-1;if(typeof e=="number")e=0>e?Dr(u+e,0):e;else if(e){e=0;var o=r?r.length:e;if(typeof t!="number"||t!==t||o>Gr){o=On,e=o(t);for(var i=0,a=r?r.length:0,f=e!==e,c=null===e,l=e===Sn;i<a;){var s=Rr((i+a)/2),p=o(r[s]),h=p!==Sn,v=p===p;(f?v:c?v&&h&&null!=p:l?v&&h:null==p?0:p<e)?i=s+1:a=s;}e=Lr(a,zr);}else{for(;e<o;){var i=e+o>>>1,a=r[i];a<t&&null!==a?e=i+1:o=i;}e=o;}return e<u&&(t===t?t===r[e]:r[e]!==r[e])?e:-1;}return n(r,t,e||0);}function tn(n){var r=n?n.length:0;return r?n[r-1]:Sn;}function en(r,t,e,u){if(!r||!r.length)return[];null!=t&&typeof t!="boolean"&&(u=e,e=K(r,t,u)?Sn:t,t=false);var o=W();if((null!=e||o!==g)&&(e=o(e,u,3)),t&&B()===n){t=e;var i;e=-1,u=r.length;for(var o=-1,c=[];++e<u;){var l=r[e],s=t?t(l,e,r):l;e&&i===s||(i=s,c[++o]=l);}r=c;}else{i=e,t=-1,e=B(),u=r.length,l=(c=(o=e===n)&&u>=Tn)&&Mr&&Fr?new a(void 0):null,s=[],l?(e=f,o=false):(c=false,l=i?[]:s);n:for(;++t<u;){var p=r[t],h=i?i(p,t,r):p;if(o&&p===p){for(var v=l.length;v--;){if(l[v]===h)continue n;}i&&l.push(h),s.push(p);}else 0>e(l,h,0)&&((i||c)&&l.push(h),s.push(p));}r=s;}return r;}function un(n,r,t){var e=it(n)?s:d;return r=W(r,t,3),e(n,r);}function on(n,r,t){var e=it(n)?p:E;return r=W(r,t,3),e(n,r);}function an(n,r,t){function e(r,t){t&&clearTimeout(t),f=p=h=Sn,r&&(v=ot(),c=n.apply(s,a),p||f||(a=s=Sn));}function u(){var n=r-(ot()-l);0>=n||n>r?e(h,f):p=setTimeout(u,n);}function o(){e(y,p);}function i(){if(a=arguments,l=ot(),s=this,h=y&&(p||!b),false===g)var t=b&&!p;else{f||b||(v=l);var e=g-(l-v),i=0>=e||e>g;i?(f&&(f=clearTimeout(f)),v=l,c=n.apply(s,a)):f||(f=setTimeout(o,e));}return i&&p?p=clearTimeout(p):p||r===g||(p=setTimeout(u,r)),t&&(i=true,c=n.apply(s,a)),!i||p||f||(a=s=Sn),c;}var a,f,c,l,s,p,h,v=0,g=false,y=true;if(typeof n!="function")throw new TypeError(kn);if(r=0>r?0:+r||0,true===t)var b=true,y=false;else hn(t)&&(b=!!t.leading,g="maxWait"in t&&Dr(+t.maxWait||0,r),y="trailing"in t?!!t.trailing:y);return i.cancel=function(){p&&clearTimeout(p),f&&clearTimeout(f),v=0,f=p=h=Sn;},i;}function fn(n,r){if(typeof n!="function")throw new TypeError(kn);return r=Dr(r===Sn?n.length-1:+r||0,0),function(){for(var t=arguments,e=-1,u=Dr(t.length-r,0),o=Array(u);++e<u;){o[e]=t[r+e];}switch(r){case 0:return n.call(this,o);case 1:return n.call(this,t[0],o);case 2:return n.call(this,t[0],t[1],o);}for(u=Array(r+1),e=-1;++e<r;){u[e]=t[e];}return u[r]=o,n.apply(this,u);};}function cn(n,r){return n>r;}function ln(n){return u(n)&&z(n)&&kr.call(n,"callee")&&!Pr.call(n,"callee");}function sn(n,r,t,e){return e=(t=typeof t=="function"?P(t,e,3):Sn)?t(n,r):Sn,e===Sn?w(n,r,t):!!e;}function pn(n){return hn(n)&&_r.call(n)==Fn;}function hn(n){var r=typeof n==='undefined'?'undefined':_typeof(n);return!!n&&("object"==r||"function"==r);}function vn(n){return null==n?false:pn(n)?Cr.test(Tr.call(n)):u(n)&&(wr(n)?Cr:ir).test(n);}function gn(n){return typeof n=="string"||u(n)&&_r.call(n)==Rn;}function yn(n){return u(n)&&J(n.length)&&!!sr[_r.call(n)];}function bn(n,r){return n<r;}function dn(n){if(null==n)return[];hn(n)||(n=Object(n));for(var r=n.length,t=i.support,r=r&&J(r)&&(it(n)||ln(n)||gn(n))&&r||0,e=n.constructor,u=-1,e=pn(e)&&e.prototype||Ir,o=e===n,a=Array(r),f=0<r,c=t.enumErrorProps&&(n===Er||n instanceof Error),l=t.enumPrototypes&&pn(n);++u<r;){a[u]=u+"";}for(var s in n){l&&"prototype"==s||c&&("message"==s||"name"==s)||f&&G(s,r)||"constructor"==s&&(o||!kr.call(n,s))||a.push(s);}if(t.nonEnumShadows&&n!==Ir)for(r=n===Sr?Rn:n===Er?Pn:_r.call(n),t=Jr[r]||Jr[qn],r==qn&&(e=Ir),r=lr.length;r--;){s=lr[r],u=t[s],o&&u||(u?!kr.call(n,s):n[s]===e[s])||a.push(s);}return a;}function xn(n){n=X(n);for(var r=-1,t=ft(n),e=t.length,u=Array(e);++r<e;){var o=t[r];u[r]=[o,n[o]];}return u;}function mn(n){for(var r=ft(n),t=-1,e=r.length,u=Array(e);++t<e;){u[t]=n[r[t]];}return u;}function An(n){return(n=r(n))&&n.replace(fr,t).replace(er,"");}function jn(n,t,e){return e&&K(n,t,e)&&(t=Sn),n=r(n),n.match(t||cr)||[];}function wn(n,r,t){return t&&K(n,r,t)&&(r=Sn),u(n)?En(n):g(n,r);}function On(n){return n;}function En(n){return I(y(n,true));}function In(n){return H(n)?T(n):k(n);}var Sn,Tn=200,kn="Expected a function",_n="[object Arguments]",Un="[object Array]",Cn="[object Boolean]",Nn="[object Date]",Pn="[object Error]",Fn="[object Function]",$n="[object Number]",qn="[object Object]",Mn="[object RegExp]",Rn="[object String]",Wn="[object ArrayBuffer]",Bn="[object Float32Array]",Dn="[object Float64Array]",Ln="[object Int8Array]",Zn="[object Int16Array]",Vn="[object Int32Array]",Yn="[object Uint8Array]",zn="[object Uint8ClampedArray]",Gn="[object Uint16Array]",Kn="[object Uint32Array]",Hn=/&(?:amp|lt|gt|quot|#39|#96);/g,Jn=/[&<>"'`]/g,Qn=RegExp(Hn.source),Xn=RegExp(Jn.source),nr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,rr=/^\w*$/,tr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,er=/[\u0300-\u036f\ufe20-\ufe23]/g,ur=/\\(\\)?/g,or=/\w*$/,ir=/^\[object .+?Constructor\]$/,ar=/^\d+$/,fr=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,cr=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),lr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),sr={};sr[Bn]=sr[Dn]=sr[Ln]=sr[Zn]=sr[Vn]=sr[Yn]=sr[zn]=sr[Gn]=sr[Kn]=true,sr[_n]=sr[Un]=sr[Wn]=sr[Cn]=sr[Nn]=sr[Pn]=sr[Fn]=sr["[object Map]"]=sr[$n]=sr[qn]=sr[Mn]=sr["[object Set]"]=sr[Rn]=sr["[object WeakMap]"]=false;var pr={};pr[_n]=pr[Un]=pr[Wn]=pr[Cn]=pr[Nn]=pr[Bn]=pr[Dn]=pr[Ln]=pr[Zn]=pr[Vn]=pr[$n]=pr[qn]=pr[Mn]=pr[Rn]=pr[Yn]=pr[zn]=pr[Gn]=pr[Kn]=true,pr[Pn]=pr[Fn]=pr["[object Map]"]=pr["[object Set]"]=pr["[object WeakMap]"]=false;var hr={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss"},vr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},gr={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},yr={"function":true,object:true},br=yr[typeof exports==='undefined'?'undefined':_typeof(exports)]&&exports&&!exports.nodeType&&exports,dr=yr[typeof module==='undefined'?'undefined':_typeof(module)]&&module&&!module.nodeType&&module,xr=yr[typeof self==='undefined'?'undefined':_typeof(self)]&&self&&self.Object&&self,mr=yr[typeof window==='undefined'?'undefined':_typeof(window)]&&window&&window.Object&&window,Ar=dr&&dr.exports===br&&br,jr=br&&dr&&(typeof global==='undefined'?'undefined':_typeof(global))=="object"&&global&&global.Object&&global||mr!==(this&&this.window)&&mr||xr||this,wr=function(){try{Object({toString:0}+"");}catch(n){return function(){return false;};}return function(n){return typeof n.toString!="function"&&typeof(n+"")=="string";};}(),Or=Array.prototype,Er=Error.prototype,Ir=Object.prototype,Sr=String.prototype,Tr=Function.prototype.toString,kr=Ir.hasOwnProperty,_r=Ir.toString,Ur=jr._,Cr=RegExp("^"+Tr.call(kr).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Nr=jr.ArrayBuffer,Pr=Ir.propertyIsEnumerable,Fr=L(jr,"Set"),$r=Or.splice,qr=jr.Uint8Array,Mr=L(Object,"create"),Rr=Math.floor,Wr=L(Array,"isArray"),Br=L(Object,"keys"),Dr=Math.max,Lr=Math.min,Zr=L(Date,"now"),Vr=Number.NEGATIVE_INFINITY,Yr=Number.POSITIVE_INFINITY,zr=4294967294,Gr=2147483647,Kr=9007199254740991,Hr={};Hr[Bn]=jr.Float32Array,Hr[Dn]=jr.Float64Array,Hr[Ln]=jr.Int8Array,Hr[Zn]=jr.Int16Array,Hr[Vn]=jr.Int32Array,Hr[Yn]=qr,Hr[zn]=jr.Uint8ClampedArray,Hr[Gn]=jr.Uint16Array,Hr[Kn]=jr.Uint32Array;var Jr={};Jr[Un]=Jr[Nn]=Jr[$n]={constructor:true,toLocaleString:true,toString:true,valueOf:true},Jr[Cn]=Jr[Rn]={constructor:true,toString:true,valueOf:true},Jr[Pn]=Jr[Fn]=Jr[Mn]={constructor:true,toString:true},Jr[qn]={constructor:true},l(lr,function(n){for(var r in Jr){if(kr.call(Jr,r)){var t=Jr[r];t[n]=kr.call(t,n);}}});var Qr=i.support={};!function(n){function r(){this.x=n;}var t={0:n,length:n},e=[];r.prototype={valueOf:n,y:n};for(var u in new r()){e.push(u);}Qr.enumErrorProps=Pr.call(Er,"message")||Pr.call(Er,"name"),Qr.enumPrototypes=Pr.call(r,"prototype"),Qr.nonEnumShadows=!/valueOf/.test(e),Qr.spliceObjects=($r.call(t,0,1),!t[0]),Qr.unindexedChars="xx"!="x"[0]+Object("x")[0];}(1,0);var Xr=function(n,r){return function(t,e){var u=t?rt(t):0;if(!J(u))return n(t,e);for(var o=r?u:-1,i=X(t);(r?o--:++o<u)&&false!==e(i[o],o,i);){}return t;};}(A),nt=function(n){return function(r,t,e){var u=X(r);e=e(r);for(var o=e.length,i=n?o:-1;n?i--:++i<o;){var a=e[i];if(false===t(u[a],a,u))break;}return r;};}(),rt=T("length"),tt=fn(function(r,t){var e;if(u(r)&&z(r)){e=m(t,false,true);var o=r?r.length:0,i=[];if(o){var c=-1,l=B(),s=l===n,p=s&&e.length>=Tn&&Mr&&Fr?new a(e):null,h=e.length;p&&(l=f,s=false,e=p);n:for(;++c<o;){if(p=r[c],s&&p===p){for(var v=h;v--;){if(e[v]===p)continue n;}i.push(p);}else 0>l(e,p,0)&&i.push(p);}}e=i;}else e=[];return e;}),et=function(n,r){return function(t,e,u){if(e=W(e,u,3),it(t)){n:{u=t.length;for(var o=r?u:-1;r?o--:++o<u;){if(e(t[o],o,t)){e=o;break n;}}e=-1;}return-1<e?t[e]:Sn;}return x(t,e,n);};}(Xr),ut=function(n,r){return function(t,e,u,o){var i=3>arguments.length;return typeof e=="function"&&o===Sn&&it(t)?n(t,e,u,i):_(t,W(e,o,4),u,i,r);};}(function(n,r,t,e){var u=-1,o=n.length;for(e&&o&&(t=n[++u]);++u<o;){t=r(t,n[u],u,n);}return t;},Xr),ot=Zr||function(){return new Date().getTime();},it=Wr||function(n){return u(n)&&J(n.length)&&_r.call(n)==Un;},at=function(n){return function(r,t,e){return t=W(t,e,3),x(r,t,n,true);};}(A),ft=Br?function(n){var r=null==n?Sn:n.constructor;return typeof r=="function"&&r.prototype===n||(typeof n=="function"?i.support.enumPrototypes:z(n))?Q(n):hn(n)?Br(n):[];}:Q,ct=function(n){return function(r){var t=-1;r=jn(An(r));for(var e=r.length,u="";++t<e;){u=n(u,r[t],t);}return u;};}(function(n,r,t){return n+(t?"-":"")+r.toLowerCase();}),lt=$(cn,Vr),st=$(bn,Yr);a.prototype.push=function(n){var r=this.data;typeof n=="string"||hn(n)?r.set.add(n):r.hash[n]=true;},i.callback=wn,i.debounce=an,i.difference=tt,i.filter=un,i.flatten=function(n,r,t){var e=n?n.length:0;return t&&K(n,r,t)&&(r=false),e?m(n,r):[];},i.keys=ft,i.keysIn=dn,i.map=on,i.matches=En,i.pairs=xn,i.pluck=function(n,r){return on(n,In(r));},i.property=In,i.restParam=fn,i.set=function(n,r,t){if(null==n)return n;var e=r+"";r=null!=n[e]||H(r,n)?[e]:nn(r);for(var e=-1,u=r.length,o=u-1,i=n;null!=i&&++e<u;){var a=r[e];hn(i)&&(e==o?i[a]=t:null==i[a]&&(i[a]=G(r[e+1])?[]:{})),i=i[a];}return n;},i.sortByOrder=function(n,r,t,e){return null==n?[]:(e&&K(r,t,e)&&(t=Sn),it(r)||(r=null==r?[]:[r]),it(t)||(t=null==t?[]:[t]),N(n,r,t));},i.throttle=function(n,r,t){var e=true,u=true;if(typeof n!="function")throw new TypeError(kn);return false===t?e=false:hn(t)&&(e="leading"in t?!!t.leading:e,u="trailing"in t?!!t.trailing:u),an(n,r,{leading:e,maxWait:+r,trailing:u});},i.toArray=function(n){var r=n?rt(n):0;return J(r)?r?i.support.unindexedChars&&gn(n)?n.split(""):c(n):[]:mn(n);},i.uniq=en,i.values=mn,i.collect=on,i.iteratee=wn,i.select=un,i.unique=en,i.deburr=An,i.escape=function(n){return(n=r(n))&&Xn.test(n)?n.replace(Jn,e):n;},i.find=et,i.findKey=at,i.get=function(n,r,t){return n=null==n?Sn:j(n,nn(r),r+""),n===Sn?t:n;},i.gt=cn,i.has=function(n,r){if(null==n)return false;var t=kr.call(n,r);if(!t&&!H(r)){if(r=nn(r),n=1==r.length?n:j(n,U(r)),null==n)return false;r=tn(r),t=kr.call(n,r);}return t||J(n.length)&&G(r,n.length)&&(it(n)||ln(n)||gn(n));},i.identity=On,i.indexOf=rn,i.isArguments=ln,i.isArray=it,i.isEmpty=function(n){return null==n?true:z(n)&&(it(n)||gn(n)||ln(n)||u(n)&&pn(n.splice))?!n.length:!ft(n).length;},i.isEqual=sn,i.isFunction=pn,i.isNative=vn,i.isObject=hn,i.isString=gn,i.isTypedArray=yn,i.kebabCase=ct,i.last=tn,i.lt=bn,i.max=lt,i.min=st,i.noConflict=function(){return jr._=Ur,this;},i.now=ot,i.reduce=ut,i.unescape=function(n){return(n=r(n))&&Qn.test(n)?n.replace(Hn,o):n;},i.words=jn,i.eq=sn,i.detect=et,i.foldl=ut,i.inject=ut,i.VERSION="3.10.1",typeof define=="function"&&_typeof(define.amd)=="object"&&define.amd?(jr._=i,define(function(){return i;})):br&&dr?Ar?(dr.exports=i)._=i:br._=i:jr._=i;}).call(this);var localLodash=$window._.noConflict();return{debounce:localLodash.debounce,throttle:localLodash.throttle,noConflict:localLodash.noConflict,escape:localLodash.escape,unescape:localLodash.unescape,get:localLodash.get,set:localLodash.set,has:localLodash.has,isEmpty:localLodash.isEmpty,map:localLodash.map,findKey:localLodash.findKey,find:localLodash.find,uniq:localLodash.uniq,sortByOrder:localLodash.sortByOrder,reduce:localLodash.reduce,flatten:localLodash.flatten,toArray:localLodash.toArray,keys:localLodash.keys,kebabCase:localLodash.kebabCase,isEqual:localLodash.isEqual,difference:localLodash.difference,pluck:localLodash.pluck,filter:localLodash.filter,values:localLodash.values,min:localLodash.min,max:localLodash.max};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.services.community.context-manager',['li.services.utils.lodash-utils']).factory('$liContextManager',['$liLodashUtils','$window',function($liLodashUtils,$window){var context=$liLodashUtils.get($window,'LITHIUM.CommunityJsonObject',{});var _community;var _server;var _config;var _validation;var _node;var _user;var _page;var _settings;var _policies;var _topLevelNode;var _nodeContainer;var _seo;function transformKey(key){if(key==='nodeType'){return'type';}
return key.replace(/([A-Z])/g,function($1){return'_'+$1.toLowerCase();});}
function deepTransform(obj){if(obj===undefined){return{};}else if(!angular.isObject(obj)){return obj;}else if(angular.isDate(obj)){return new Date(obj);}else if(angular.isArray(obj)){return obj.map(function(item){return deepTransform(item);});}else{var _obj={};for(var key in obj){var _key=transformKey(key);_obj[_key]=deepTransform(obj[key]);if(_key==='type'){_obj[_key]=_obj[_key].toLowerCase();}}
return _obj;}}
return{community:function community(){if(!_community){_community=deepTransform(context.Community);}
return _community;},server:function server(){if(!_server){_server=deepTransform(context.Server);}
return _server;},config:function config(){if(!_config){_config=deepTransform(context.Config);}
return _config;},validation:function validation(){if(!_validation){_validation=deepTransform(context.Validation);}
return _validation;},coreNode:function coreNode(){if(!_node){_node=deepTransform(context.CoreNode);}
return _node;},page:function page(){if(!_page){_page=deepTransform(context.Page);}
return _page;},currentUser:function currentUser(){if(!_user){_user=deepTransform(context.User);delete _user.settings;}
return _user;},currentUserSettings:function currentUserSettings(){if(!_settings){_settings=deepTransform(context.User&&context.User.settings);}
return _settings;},currentUserPolicies:function currentUserPolicies(){if(!_policies){_policies=deepTransform(context.User&&context.User.policies);}
return _policies;},topLevelNode:function topLevelNode(){if(!_topLevelNode){_topLevelNode=deepTransform(context.TopLevelNode);}
return _topLevelNode;},nodeContainer:function nodeContainer(){if(!_nodeContainer){_nodeContainer=deepTransform(context.NodeContainer);}
return _nodeContainer;},seo:function seo(){if(!_seo){_seo=deepTransform(context.Seo);}
return _seo;}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);

(function(T,a){'use strict';function M(m,f){f=f||{};a.forEach(f,function(a,d){delete f[d]});for(var d in m)!m.hasOwnProperty(d)||"$"===d.charAt(0)&&"$"===d.charAt(1)||(f[d]=m[d]);return f}var B=a.$$minErr("$resource"),H=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;a.module("ngResource",["ng"]).info({angularVersion:"1.8.2"}).provider("$resource",function(){var m=/^https?:\/\/\[[^\]]*][^/]*/,f=this;this.defaults={stripTrailingSlashes:!0,cancellable:!1,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},"delete":{method:"DELETE"}}};this.$get=["$http","$log","$q","$timeout",function(d,F,G,N){function C(a,d){this.template=a;this.defaults=n({},f.defaults,d);this.urlParams={}}var O=a.noop,r=a.forEach,n=a.extend,R=a.copy,P=a.isArray,D=a.isDefined,x=a.isFunction,I=a.isNumber,y=a.$$encodeUriQuery,S=a.$$encodeUriSegment;C.prototype={setUrlParams:function(a,d,f){var g=this,c=f||g.template,s,h,n="",b=g.urlParams=Object.create(null);r(c.split(/\W/),function(a){if("hasOwnProperty"===a)throw B("badname");!/^\d+$/.test(a)&&a&&(new RegExp("(^|[^\\\\]):"+a+"(\\W|$)")).test(c)&&(b[a]={isQueryParamValue:(new RegExp("\\?.*=:"+a+"(?:\\W|$)")).test(c)})});c=c.replace(/\\:/g,":");c=c.replace(m,function(b){n=b;return""});d=d||{};r(g.urlParams,function(b,a){s=d.hasOwnProperty(a)?d[a]:g.defaults[a];D(s)&&null!==s?(h=b.isQueryParamValue?y(s,!0):S(s),c=c.replace(new RegExp(":"+a+"(\\W|$)","g"),function(b,a){return h+a})):c=c.replace(new RegExp("(/?):"+a+"(\\W|$)","g"),function(b,a,e){return"/"===e.charAt(0)?e:a+e})});g.defaults.stripTrailingSlashes&&(c=c.replace(/\/+$/,"")||"/");c=c.replace(/\/\.(?=\w+($|\?))/,".");a.url=n+c.replace(/\/(\\|%5C)\./,"/.");r(d,function(b,c){g.urlParams[c]||(a.params=a.params||{},a.params[c]=b)})}};return function(m,y,z,g){function c(b,c){var d={};c=n({},y,c);r(c,function(c,f){x(c)&&(c=c(b));var e;if(c&&c.charAt&&"@"===c.charAt(0)){e=b;var k=c.substr(1);if(null==k||""===k||"hasOwnProperty"===k||!H.test("."+k))throw B("badmember",k);for(var k=k.split("."),h=0,n=k.length;h<n&&a.isDefined(e);h++){var g=k[h];e=null!==e?e[g]:void 0}}else e=c;d[f]=e});return d}function s(b){return b.resource}function h(b){M(b||{},this)}var Q=new C(m,g);z=n({},f.defaults.actions,z);h.prototype.toJSON=function(){var b=n({},this);delete b.$promise;delete b.$resolved;delete b.$cancelRequest;return b};r(z,function(b,a){var f=!0===b.hasBody||!1!==b.hasBody&&/^(POST|PUT|PATCH)$/i.test(b.method),g=b.timeout,m=D(b.cancellable)?b.cancellable:Q.defaults.cancellable;g&&!I(g)&&(F.debug("ngResource:\n  Only numeric values are allowed as `timeout`.\n  Promises are not supported in $resource, because the same value would be used for multiple requests. If you are looking for a way to cancel requests, you should use the `cancellable` option."),delete b.timeout,g=null);h[a]=function(e,k,J,y){function z(a){p.catch(O);null!==u&&u.resolve(a)}var K={},v,t,w;switch(arguments.length){case 4:w=y,t=J;case 3:case 2:if(x(k)){if(x(e)){t=e;w=k;break}t=k;w=J}else{K=e;v=k;t=J;break}case 1:x(e)?t=e:f?v=e:K=e;break;case 0:break;default:throw B("badargs",arguments.length);}var E=this instanceof h,l=E?v:b.isArray?[]:new h(v),q={},C=b.interceptor&&b.interceptor.request||void 0,D=b.interceptor&&b.interceptor.requestError||void 0,F=b.interceptor&&b.interceptor.response||s,H=b.interceptor&&b.interceptor.responseError||G.reject,I=t?function(a){t(a,A.headers,A.status,A.statusText)}:void 0;w=w||void 0;var u,L,A;r(b,function(a,b){switch(b){default:q[b]=R(a);case"params":case"isArray":case"interceptor":case"cancellable":}});!E&&m&&(u=G.defer(),q.timeout=u.promise,g&&(L=N(u.resolve,g)));f&&(q.data=v);Q.setUrlParams(q,n({},c(v,b.params||{}),K),b.url);var p=G.resolve(q).then(C).catch(D).then(d),p=p.then(function(c){var e=c.data;if(e){if(P(e)!==!!b.isArray)throw B("badcfg",a,b.isArray?"array":"object",P(e)?"array":"object",q.method,q.url);if(b.isArray)l.length=0,r(e,function(a){"object"===typeof a?l.push(new h(a)):l.push(a)});else{var d=l.$promise;M(e,l);l.$promise=d}}c.resource=l;A=c;return F(c)},function(a){a.resource=l;A=a;return H(a)}),p=p["finally"](function(){l.$resolved=!0;!E&&m&&(l.$cancelRequest=O,N.cancel(L),u=L=q.timeout=null)});p.then(I,w);return E?p:(l.$promise=p,l.$resolved=!1,m&&(l.$cancelRequest=z),l)};h.prototype["$"+a]=function(b,c,d){x(b)&&(d=c,c=b,b={});b=h[a].call(this,b,this,c,d);return b.$promise||b}});return h}}]})})(window,window.angular);
;(function(angular){'use strict';angular.module('li.services.rest.rest-manager',['li.services.community.context-manager','ngResource']).config(['$sceDelegateProvider',function($sceDelegateProvider){$sceDelegateProvider.resourceUrlWhitelist(['**']);}]).factory('$liRestManagerRetryInterceptor',['$q','$injector','$log','$timeout',function($q,$injector,$log,$timeout){return{responseError:function responseError(rejection){$log.error('$http error',rejection);if(rejection.status>=500&&rejection.config.retry<5){rejection.config.retry++;$log.debug('Retry $http call attempt ['+rejection.config.retry+']',rejection);$timeout(function(){return $injector.get('$http')(rejection.config);},500);}else{return $q.reject(rejection);}}};}]).config(['$httpProvider',function($httpProvider){$httpProvider.interceptors.push('$liRestManagerRetryInterceptor');}]).constant('$liRestManagerConfig',{status:{NOT_FOUND:404,FORBIDDEN:403}}).factory('$liRestManager',['$http','$resource','$q','$liContextManager',function($http,$resource,$q,$liContextManager){$http.defaults.headers.common['Application-Identifier']=$liContextManager.server().device_mode;$http.defaults.headers.common['Application-Version']='2.0.0';$http.defaults.headers.get=!$http.defaults.headers.get?{}:$http.defaults.headers.get;$http.defaults.headers.get['If-Modified-Since']=new Date(0).toUTCString();function request(apiUrl,params,data,method,cache,retry){var queryParams={};angular.forEach(params,function(val,key){if(apiUrl.indexOf(':'+key)!==-1){apiUrl=apiUrl.replace(':'+key,val);}else{queryParams[key]=val;}});return $http({url:getFullyQualifiedUrl(apiUrl),params:queryParams,data:data||null,method:method||'get',cache:cache,retry:retry!==undefined?retry:0,headers:{'Content-Type':'application/json'}}).then(function(response){if(response&&response.data){return response.data;}
return $q.reject(response);});}
function getFullyQualifiedUrl(apiUrl){return $liContextManager.server().community_prefix+'/api/2.0'+apiUrl;}
return{request:request,getFullyQualifiedUrl:getFullyQualifiedUrl};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.services.events.event-manager',['li.services.rest.rest-manager']).factory('$liEventManager',['$liRestManager','$document',function($liRestManager,$document){function stop($event){$event.preventDefault();$event.stopPropagation();}
var eventMap={'media-view':{payload:{mediaId:'id',mediaName:'title',mediaType:'type'},context:{messageId:'id'}}};var document=$document[0];function createEventPayload(eventType,eventPayload,eventContext){var eventObj=Object.create(eventMap[eventType].payload||{});for(var eventProp in eventObj){eventObj[eventProp]=eventPayload[eventObj[eventProp]];}
if(eventContext!==undefined&&eventContext!==null){var eventObjContext=Object.create(eventMap[eventType].context||{});for(var eventContextProp in eventObjContext){eventObjContext[eventContextProp]=eventContext[eventObjContext[eventContextProp]];}
angular.extend(eventObj,eventObjContext);}
return eventObj;}
function emitNativeEvent(eventName,context,element){var event=document.createEvent('CustomEvent');var triggerElement=element?element:document;event.initCustomEvent(eventName,true,true,context);triggerElement.dispatchEvent(event);}
return{sendEvent:function sendEvent(type,data,context){var lsiEvent={analytics_event:{type:type,id:-1,data:createEventPayload(type,data,context),version:'3.0'}};return $liRestManager.request('/internal/analytics',{},lsiEvent,'post',false);},emitNativeEvent:emitNativeEvent,KeyCodes:{TAB:9,ENTER:13,LEFT:37,UP:38,RIGHT:39,DOWN:40,ESC:27,f:102},stop:stop};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.directives.common.trap-focus',['li.services.events.event-manager']).directive('liCommonTrapFocus',['$liEventManager','$timeout',function($liEventManager,$timeout){return{restrict:'A',link:function link($scope,$element,attr){var previousFocusedElement=document.activeElement;$timeout(function(){var focusableQueryElements='a[href], area[href], input:not([disabled]), select:not([disabled]), '+'textarea:not([disabled]), button:not([disabled]), [tabindex="0"]';var focusableElements=$element[0].querySelectorAll(focusableQueryElements);focusableElements=Array.prototype.slice.call(focusableElements);var firstFocusableElement=focusableElements[0];var lastFocusableElement=focusableElements[focusableElements.length-1];var dynamic=attr.liCommonTrapFocus;if(firstFocusableElement){firstFocusableElement.focus();}
$element.on('keydown',function(event){var keyCode=event.keyCode||event.which;if(dynamic){focusableElements=$element[0].querySelectorAll(focusableQueryElements);var firstElemIndex=0,lastElemIndex=focusableElements.length-1;firstFocusableElement=focusableElements[firstElemIndex];lastFocusableElement=focusableElements[lastElemIndex];while(firstFocusableElement.clientHeight===0||firstFocusableElement.clientWidth===0){firstFocusableElement=focusableElements[++firstElemIndex];}
while(lastFocusableElement.clientHeight===0||lastFocusableElement.clientWidth===0){lastFocusableElement=focusableElements[--lastElemIndex];}}
function focusNextElement(currentElement,nextElement){if(document.activeElement===currentElement){event.preventDefault();nextElement.focus();}}
if(keyCode===$liEventManager.KeyCodes.TAB){if(!event.shiftKey){focusNextElement(lastFocusableElement,firstFocusableElement);}else{focusNextElement(firstFocusableElement,lastFocusableElement);}}else{return;}});},0);$scope.$on('$destroy',function(){previousFocusedElement.focus();});}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.services.utils.param-utils',['li.services.utils.lodash-utils']).factory('$liParamUtils',['$liLodashUtils','$log',function($liLodashUtils,$log){function validateParams(directiveName,scope,params){var allValid=true;angular.forEach(params,function(param){var paramObj;var method;var reason;var value;paramObj={allowNull:true,allowUndefined:false,allowEmpty:true};if(angular.isObject(param)){paramObj=angular.extend({},paramObj,param);}else{paramObj.paramName=param;}
value=scope[paramObj.paramName];if(!paramObj.allowNull&&value===null){reason=' cannot be null.';}
if(paramObj.allowUndefined&&angular.isUndefined(value)&&paramObj.hasOwnProperty('defaultValue')){scope[paramObj.paramName]=paramObj.defaultValue;$log.debug('Param ['+paramObj.paramName+'], was set to the default value '+'['+paramObj.defaultValue+'] for directive '+'['+directiveName+'].');value=scope[paramObj.paramName];}
if(!paramObj.allowUndefined&&angular.isUndefined(value)){reason=' cannot be undefined.';}
if(!paramObj.allowEmpty&&$liLodashUtils.isEmpty(value)){reason=' cannot be empty.';}
if(angular.isFunction(paramObj.validate)&&!paramObj.validate(value)){reason=' is not an allowed value.';}
if(!reason){method='debug';reason=' is valid.';}else{method='error';allValid=false;}
$log[method]('Required param ['+paramObj.paramName+'], with value '+'['+angular.toJson(value)+'], for directive '+'['+directiveName+']'+reason);});return allValid;}
function initTypeTemplate($scope,path,type,defaultType){$scope.templateUrl=function(){var templateType=type?type:defaultType;return path+(templateType?'.'+templateType:'')+'.tpl.html';};}
return{validateParams:validateParams,typeTemplate:'<ng-include src="templateUrl()"></ng-include>',initTypeTemplate:initTypeTemplate};}]);})(window.LITHIUM&&LITHIUM.angular||angular);

(function(t,p){'use strict';function q(g,h,s){n.directive(g,["$parse","$swipe",function(a,b){return function(c,e,f){function k(a){if(!d)return!1;var b=Math.abs(a.y-d.y);a=(a.x-d.x)*h;return l&&75>b&&0<a&&30<a&&.3>b/a}var m=a(f[g]),d,l,r=["touch"];p.isDefined(f.ngSwipeDisableMouse)||r.push("mouse");b.bind(e,{start:function(a,b){d=a;l=!0},cancel:function(a){l=!1},end:function(a,b){k(a)&&c.$apply(function(){e.triggerHandler(s);m(c,{$event:b})})}},r)}}])}var n=p.module("ngTouch",[]);n.info({angularVersion:"1.8.2"});n.factory("$swipe",[function(){function g(a){a=a.originalEvent||a;var b=a.touches&&a.touches.length?a.touches:[a];a=a.changedTouches&&a.changedTouches[0]||b[0];return{x:a.clientX,y:a.clientY}}function h(a,b){var c=[];p.forEach(a,function(a){(a=n[a][b])&&c.push(a)});return c.join(" ")}var n={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};return{bind:function(a,b,c){var e,f,k,m,d=!1;c=c||["mouse","touch","pointer"];a.on(h(c,"start"),function(a){k=g(a);d=!0;f=e=0;m=k;b.start&&b.start(k,a)});var l=h(c,"cancel");if(l)a.on(l,function(a){d=!1;b.cancel&&b.cancel(a)});a.on(h(c,"move"),function(a){if(d&&k){var c=g(a);e+=Math.abs(c.x-m.x);f+=Math.abs(c.y-m.y);m=c;10>e&&10>f||(f>e?(d=!1,b.cancel&&b.cancel(a)):(a.preventDefault(),b.move&&b.move(c,a)))}});a.on(h(c,"end"),function(a){d&&(d=!1,b.end&&b.end(g(a),a))})}}}]);q("ngSwipeLeft",-1,"swipeleft");q("ngSwipeRight",1,"swiperight")})(window,window.angular);
;(function(angular){'use strict';angular.module('li.directives.common.slide-menu',['li.directives.common.element-hook','li.directives.common.trap-focus','li.services.utils.param-utils','li.services.events.event-manager','ngTouch']).constant('liSlideMenuConfig',{directions:['left','top','right','bottom'],events:{scrollTop:'LITHIUM:slide-menu:scroll-top',toggleMenu:'LITHIUM:slide-menu:toggle-menu',onToggle:'LITHIUM:slide-menu:on-toggle'}}).directive('liCommonSlideMenu',['$log','$timeout','$document','$liParamUtils','liSlideMenuConfig','$liEventManager',function($log,$timeout,$document,$liParamUtils,liSlideMenuConfig,$liEventManager){return{restrict:'AE',transclude:true,templateUrl:'common/slide-menu/slide-menu.tpl.html',scope:{direction:'@liDirection',triggerElement:'=',liSlideMenuClass:'=',swipeToClose:'=liSwipeToClose'},link:function link($scope,$element){var navContainer;$element.removeAttr('style');var valParams={paramName:'direction',allowUndefined:true,defaultValue:'left',validate:function validate(val){return liSlideMenuConfig.directions.indexOf(val)>-1;}};if(!$liParamUtils.validateParams('liCommonSlideMenu',$scope,[valParams])){return;}
$scope.showMenu=false;$scope.addClass=false;switch($scope.direction){case'top':case'bottom':$scope.orientation='horizontal';break;default:$scope.orientation='vertical';}
$scope.$watch('triggerElement',function(){if($scope.triggerElement){$scope.triggerElement.on('click',function($event){$scope.toggleMenu();$scope.$apply();$event.preventDefault();});}});$scope.toggleMenu=function(){var $body=angular.element($document[0].body);if($scope.showMenu){$scope.addClass=false;$timeout(function(){$scope.showMenu=false;},400);$body.removeClass('lia-slide-menu-open');$body.off('keyup',handleEscape);$scope.$broadcast(liSlideMenuConfig.events.onToggle,!$scope.showMenu);}else{$scope.showMenu=true;$timeout(function(){$scope.addClass=true;$scope.$broadcast(liSlideMenuConfig.events.onToggle,$scope.showMenu);});$body.addClass('lia-slide-menu-open');$body.on('keyup',handleEscape);}};$scope.$on(liSlideMenuConfig.events.scrollTop,function(){navContainer=navContainer||$element[0].querySelector('.lia-slide-menu-content');navContainer.scrollTop=0;});$scope.$on(liSlideMenuConfig.events.toggleMenu,function(){$scope.toggleMenu();});$scope.swipeToggleMenu=function(swipeDirection){if($scope.swipeToClose&&swipeDirection===$scope.direction){$scope.toggleMenu();}};function handleEscape($event){var keyCode=$event.keyCode||$event.which;if(keyCode===$liEventManager.KeyCodes.ESC){$scope.toggleMenu();$scope.$apply();}}}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.services.community.navigation-manager',['li.services.community.context-manager','li.services.rest.rest-manager','li.services.utils.lodash-utils']).factory('$liNavigationManager',['$q','$cacheFactory','$liContextManager','$liRestManager','$liLodashUtils',function($q,$cacheFactory,$liContextManager,$liRestManager,$liLodashUtils){var _community;var _topLevelNodeId;var _cache=$cacheFactory('liNavigationCache',{storageMode:'localStorage'});var _communityStructurePromise;function getRootLevelNodeId(){return _topLevelNodeId;}
function getCommunityStructure(topLevelNode){var fetchLimit=$liContextManager.config()['navigation.manager.community.structure.limit'];if(isNaN(fetchLimit)){fetchLimit=1000;}
var query={nodes:{fields:['id','title','view_href','parent.id','node_type','conversation_style'],constraints:[{hidden:false}],sorts:['position asc'],limit:fetchLimit}};if(topLevelNode.type==='category'&&topLevelNode.id){query.nodes.constraints.push({'ancestors.id':topLevelNode.type+':'+topLevelNode.id});}
return $liRestManager.request('/search',{},query,'POST',_cache);}
function getStructure(){var currentTopLevelNode=$liContextManager.topLevelNode();var cacheKey=JSON.stringify({ts:$liContextManager.server().node_change_time_stamp,uid:$liContextManager.currentUser().id,nid:currentTopLevelNode.id,commid:$liContextManager.community().id,internal:2});cleanupCache();if(_topLevelNodeId===undefined){_topLevelNodeId=currentTopLevelNode.id;}
if(currentTopLevelNode.id===_topLevelNodeId&&_community!==undefined){return $q.when(_community);}else if(_cache.get(cacheKey)){return $q.when(_cache.get(cacheKey));}else{var isTlc=currentTopLevelNode.type==='category';if(_communityStructurePromise!==undefined){return _communityStructurePromise;}
_communityStructurePromise=getCommunityStructure(currentTopLevelNode).then(function(res){var rootNode=isTlc?currentTopLevelNode:$liContextManager.community();if(!isTlc){rootNode.type='community';}
var categoryMap={};categoryMap[rootNode.id]=rootNode;var categories=[];var leafs=[];angular.forEach($liLodashUtils.get(res,'data.items',[]),function(item){var nodeObj={};angular.extend(nodeObj,item,{id:item.id.replace(item.node_type+':',''),type:item.node_type,parent_category:item.parent!==undefined&&item.parent.id!==undefined?{id:item.parent.id.split(':')[1],type:item.parent.id.split(':')[0]}:{}});delete nodeObj.parent;delete nodeObj.node_type;if(nodeObj.type==='category'){categories.push(nodeObj);}else if(nodeObj.type==='board'||nodeObj.type==='grouphub'){leafs.push(nodeObj);}});categories.map(function(c){var category={};angular.extend(category,c);if(!categoryMap[category.id]){categoryMap[category.id]=category;}else{angular.extend(categoryMap[category.id],category);}
if(category.parent_category.id===undefined){category.parent_category.id=rootNode.id;}
var parentCategory;if(!categoryMap[category.parent_category.id]){parentCategory={id:category.parent_category.id,descendant_categories:{items:[category]}};categoryMap[category.parent_category.id]=parentCategory;}else{parentCategory=categoryMap[category.parent_category.id];if(parentCategory.descendant_categories===undefined){parentCategory.descendant_categories={items:[]};}
parentCategory.descendant_categories.items.push(category);}});leafs.map(function(b){if(b.parent_category.id===undefined){b.parent_category.id=rootNode.id;}
if(categoryMap[b.parent_category.id]!==undefined){var nodeType=b.type+'s';if(categoryMap[b.parent_category.id][nodeType]===undefined){categoryMap[b.parent_category.id][nodeType]={items:[]};}
categoryMap[b.parent_category.id][nodeType].items.push(b);}});_community=[];angular.forEach(categoryMap,function(item){_community.push(item);});_cache.put(cacheKey,_community);return _community;});return _communityStructurePromise;}}
function cleanupCache(){angular.forEach(_cache.info().keys,function(key){var keyObj;try{keyObj=JSON.parse(key);}catch(e){_cache.remove(key);}
if(keyObj){if(keyObj.commid===undefined){_cache.remove(key);}else if(keyObj.commid===$liContextManager.community().id&&keyObj.uid===$liContextManager.currentUser().id){if(keyObj.ts!==$liContextManager.server().node_change_time_stamp){_cache.remove(key);}}}});}
return{getStructure:getStructure,getRootLevelNodeId:getRootLevelNodeId};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';localStorageCacheFactory.$inject=['$cacheFactory'];decorateCacheFactory.$inject=['$provide'];function localStorageCacheFactory($cacheFactory){function isQuotaExceeded(e){if(e&&(e.code===22||e.code===1014&&e.name==='NS_ERROR_DOM_QUOTA_REACHED')){return true;}
return false;}
function safeLocalStorageSet(key,value){try{localStorage.setItem(key,value);}catch(e){if(isQuotaExceeded(e)){localStorage.clear();localStorage.setItem(key,value);}}}
function cacheFactory(cacheId,options){function put(key,value){if(angular.isUndefined(value)){return;}
var storedValue=cache.put(key,value);setLocalCacheItem(key,value);cleanupLocalCache();return storedValue;}
function cleanupLocalCache(checkAll){var cacheKeys=getLocalCacheKeys();if(options&&cacheKeys.length>=options.capacity){for(var i=0;i<cacheKeys.length;i++){var cacheKey=cacheKeys[i];if(cache.get(cacheKey)===undefined){removeLocalCacheItem(cacheKey);if(!checkAll){break;}}}}}
function remove(key){removeLocalCacheItem(key);cache.remove(key);}
function removeAll(){removeAllLocalCacheItem();cache.removeAll();}
function info(){var i=cache.info();i.keys=getLocalCacheKeys();return i;}
function getLocalCacheKeys(){var keys=localStorage.getItem(cacheId+'::keys');if(keys===null){return[];}else{try{return JSON.parse(keys);}catch(e){return keys.split(',');}}}
function setLocalCacheKeys(keys){var localKey=cacheId+'::keys';if(keys.length===0){localStorage.removeItem(localKey);}else{safeLocalStorageSet(localKey,JSON.stringify(keys));}}
function addLocalCacheKey(key){var keys=getLocalCacheKeys();var index=keys.indexOf(key);if(index===-1){keys.push(key);setLocalCacheKeys(keys);}}
function removeLocalCacheKey(key){var keys=getLocalCacheKeys();var index=keys.indexOf(key);if(index>-1){keys.splice(index,1);setLocalCacheKeys(keys);}}
function getLocalCacheItem(key){var storedVal=localStorage.getItem(cacheId+'::key::'+key);var item=angular.fromJson(storedVal);return item&&item.value;}
function setLocalCacheItem(key,value){if(!angular.isUndefined(key)){var localKey=cacheId+'::key::'+key;if(value===null){removeLocalCacheItem(key);}else{var storedVal={value:value};safeLocalStorageSet(localKey,angular.toJson(storedVal));addLocalCacheKey(key);}}}
function removeLocalCacheItem(key){removeLocalCacheKey(key);localStorage.removeItem(cacheId+'::key::'+key);}
function removeAllLocalCacheItem(){var keys=getLocalCacheKeys();angular.forEach(keys,function(key){localStorage.removeItem(cacheId+'::key::'+key);});localStorage.removeItem(cacheId+'::keys');}
var cache=$cacheFactory(cacheId,options);if(!supportsLocalStorage()){return cache;}
var localCacheKeys=getLocalCacheKeys();angular.forEach(localCacheKeys,function(key){cache.put(key,getLocalCacheItem(key));});cleanupLocalCache(true);return{put:put,get:cache.get,remove:remove,removeAll:removeAll,destroy:cache.destroy,info:info};}
return cacheFactory;}
function supportsLocalStorage(){try{localStorage.setItem('a','a');localStorage.removeItem('a');return true;}catch(e){return false;}}
function decorateCacheFactory($provide){$provide.decorator('$cacheFactory',['$delegate',function($delegate){var cacheFactory=function cacheFactory(cacheId,options){if(options&&options.storageMode==='localStorage'&&supportsLocalStorage()){return localStorageCacheFactory($delegate)(cacheId,options);}else{return $delegate(cacheId,options);}};cacheFactory.get=$delegate.get;cacheFactory.info=$delegate.info;return cacheFactory;}]);}
angular.module('li.services.cache.localstorage-cache-manager',[]).factory('$liLocalstorageCacheManager',localStorageCacheFactory).config(decorateCacheFactory);})(window.LITHIUM&&LITHIUM.angular||angular);

!function(t,e){"function"==typeof define&&define.amd?define([],function(){return e()}):"object"==typeof module&&module.exports?module.exports=e():e()}(0,function(){function t(e){"use strict";var n=e.storageKey(),a=e.storage(),t=function(){var t=e.preferredLanguage();angular.isString(t)?e.use(t):a.put(n,e.use())};t.displayName="fallbackFromIncorrectStorageValue",a?a.get(n)?e.use(a.get(n)).catch(t):t():angular.isString(e.preferredLanguage())&&e.use(e.preferredLanguage())}function e(t,r,e,i){"use strict";var z,c,T,x,F,I,_,n,V,R,D,K,U,M,H,G,q={},Y=[],B=t,J=[],Q="translate-cloak",W=!1,X=!1,Z=".",tt=!1,et=!1,nt=0,at=!0,a="default",s={default:function(t){return(t||"").split("-").join("_")},java:function(t){var e=(t||"").split("-").join("_"),n=e.split("_");return 1<n.length?n[0].toLowerCase()+"_"+n[1].toUpperCase():e},bcp47:function(t){var e=(t||"").split("_").join("-"),n=e.split("-");switch(n.length){case 1:n[0]=n[0].toLowerCase();break;case 2:n[0]=n[0].toLowerCase(),4===n[1].length?n[1]=n[1].charAt(0).toUpperCase()+n[1].slice(1).toLowerCase():n[1]=n[1].toUpperCase();break;case 3:n[0]=n[0].toLowerCase(),n[1]=n[1].charAt(0).toUpperCase()+n[1].slice(1).toLowerCase(),n[2]=n[2].toUpperCase();break;default:return e}return n.join("-")},"iso639-1":function(t){return(t||"").split("_").join("-").split("-")[0].toLowerCase()}},o=function(){if(angular.isFunction(i.getLocale))return i.getLocale();var t,e,n=r.$get().navigator,a=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(n.languages))for(t=0;t<n.languages.length;t++)if((e=n.languages[t])&&e.length)return e;for(t=0;t<a.length;t++)if((e=n[a[t]])&&e.length)return e;return null};o.displayName="angular-translate/service: getFirstBrowserLanguage";var rt=function(){var t=o()||"";return s[a]&&(t=s[a](t)),t};rt.displayName="angular-translate/service: getLocale";var it=function(t,e){for(var n=0,a=t.length;n<a;n++)if(t[n]===e)return n;return-1},st=function(){return this.toString().replace(/^\s+|\s+$/g,"")},f=function(t){return angular.isString(t)?t.toLowerCase():t},ot=function(t){if(t){for(var e,n=[],a=f(t),r=0,i=Y.length;r<i;r++)n.push(f(Y[r]));if(-1<(r=it(n,a)))return Y[r];if(c)for(var s in c)if(c.hasOwnProperty(s)){var o=!1,l=Object.prototype.hasOwnProperty.call(c,s)&&f(s)===f(t);if("*"===s.slice(-1)&&(o=f(s.slice(0,-1))===f(t.slice(0,s.length-1))),(l||o)&&(e=c[s],-1<it(n,f(e))))return e}var u=t.split("_");return 1<u.length&&-1<it(n,f(u[0]))?u[0]:void 0}},lt=function(t,e){if(!t&&!e)return q;if(t&&!e){if(angular.isString(t))return q[t]}else angular.isObject(q[t])||(q[t]={}),angular.extend(q[t],ut(e));return this};this.translations=lt,this.cloakClassName=function(t){return t?(Q=t,this):Q},this.nestedObjectDelimeter=function(t){return t?(Z=t,this):Z};var ut=function(t,e,n,a){var r,i,s;for(r in e||(e=[]),n||(n={}),t)Object.prototype.hasOwnProperty.call(t,r)&&(s=t[r],angular.isObject(s)?ut(s,e.concat(r),n,r):(i=e.length?""+e.join(Z)+Z+r:r,e.length&&r===a&&(n[""+e.join(Z)]="@:"+i),n[i]=s));return n};ut.displayName="flatObject",this.addInterpolation=function(t){return J.push(t),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(t){return R=t,this},this.useSanitizeValueStrategy=function(t){return e.useStrategy(t),this},this.preferredLanguage=function(t){return t?(ct(t),this):z};var ct=function(t){return t&&(z=t),z};this.translationNotFoundIndicator=function(t){return this.translationNotFoundIndicatorLeft(t),this.translationNotFoundIndicatorRight(t),this},this.translationNotFoundIndicatorLeft=function(t){return t?(U=t,this):U},this.translationNotFoundIndicatorRight=function(t){return t?(M=t,this):M},this.fallbackLanguage=function(t){return ft(t),this};var ft=function(t){return t?(angular.isString(t)?(x=!0,T=[t]):angular.isArray(t)&&(x=!1,T=t),angular.isString(z)&&it(T,z)<0&&T.push(z),this):x?T[0]:T};this.use=function(t){if(t){if(!q[t]&&!D)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+t+"'");return F=t,this}return F},this.resolveClientLocale=function(){return rt()};var gt=function(t){return t?(B=t,this):n?n+B:B};this.storageKey=gt,this.useUrlLoader=function(t,e){return this.useLoader("$translateUrlLoader",angular.extend({url:t},e))},this.useStaticFilesLoader=function(t){return this.useLoader("$translateStaticFilesLoader",t)},this.useLoader=function(t,e){return D=t,K=e||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(t){return _=t,this},this.storagePrefix=function(t){return t?(n=t,this):t},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(t){return V=t,this},this.usePostCompiling=function(t){return W=!!t,this},this.forceAsyncReload=function(t){return X=!!t,this},this.uniformLanguageTag=function(t){return t?angular.isString(t)&&(t={standard:t}):t={},a=t.standard,this},this.determinePreferredLanguage=function(t){var e=t&&angular.isFunction(t)?t():rt();return z=Y.length&&ot(e)||e,this},this.registerAvailableLanguageKeys=function(t,e){return t?(Y=t,e&&(c=e),this):Y},this.useLoaderCache=function(t){return!1===t?H=void 0:!0===t?H=!0:void 0===t?H="$translationCache":t&&(H=t),this},this.directivePriority=function(t){return void 0===t?nt:(nt=t,this)},this.statefulFilter=function(t){return void 0===t?at:(at=t,this)},this.postProcess=function(t){return G=t||void 0,this},this.keepContent=function(t){return et=!!t,this},this.$get=["$log","$injector","$rootScope","$q",function(t,o,s,m){var i,$,y,b=o.get(R||"$translateDefaultInterpolation"),S=!1,L={},f={},j=function(t,s,o,l,u,c){!F&&z&&(F=z);var a=u&&u!==F?ot(u)||u:F;if(u&&v(u),angular.isArray(t)){return function(t){for(var a={},e=[],n=function(e){var n=m.defer(),t=function(t){a[e]=t,n.resolve([e,t])};return j(e,s,o,l,u,c).then(t,t),n.promise},r=0,i=t.length;r<i;r++)e.push(n(t[r]));return m.all(e).then(function(){return a})}(t)}var e=m.defer();t&&(t=st.apply(t));var n=function(){var t=f[a]||f[z];if($=0,_&&!t){var e=i.get(B);if(t=f[e],T&&T.length){var n=it(T,e);$=0===n?1:0,it(T,z)<0&&T.push(z)}}return t}();if(n){var r=function(){u||(a=F),h(t,s,o,l,a,c).then(e.resolve,e.reject)};r.displayName="promiseResolved",n.finally(r).catch(angular.noop)}else h(t,s,o,l,a,c).then(e.resolve,e.reject);return e.promise},w=function(t){return U&&(t=[U,t].join(" ")),M&&(t=[t,M].join(" ")),t},l=function(t){F=t,_&&i.put(j.storageKey(),F),s.$emit("$translateChangeSuccess",{language:t}),b.setLocale(F);var e=function(t,e){L[e].setLocale(F)};e.displayName="eachInterpolatorLocaleSetter",angular.forEach(L,e),s.$emit("$translateChangeEnd",{language:t})},u=function(n){if(!n)throw"No language key specified for loading.";var a=m.defer();s.$emit("$translateLoadingStart",{language:n}),S=!0;var t=H;"string"==typeof t&&(t=o.get(t));var e=angular.extend({},K,{key:n,$http:angular.extend({},{cache:t},K.$http)}),r=function(t){var e={};s.$emit("$translateLoadingSuccess",{language:n}),angular.isArray(t)?angular.forEach(t,function(t){angular.extend(e,ut(t))}):angular.extend(e,ut(t)),S=!1,a.resolve({key:n,table:e}),s.$emit("$translateLoadingEnd",{language:n})};r.displayName="onLoaderSuccess";var i=function(t){s.$emit("$translateLoadingError",{language:t}),a.reject(t),s.$emit("$translateLoadingEnd",{language:t})};return i.displayName="onLoaderError",o.get(D)(e).then(r,i),a.promise};if(_&&(!(i=o.get(_)).get||!i.put))throw new Error("Couldn't use storage '"+_+"', missing get() or put() method!");if(J.length){var e=function(t){var e=o.get(t);e.setLocale(z||F),L[e.getInterpolationIdentifier()]=e};e.displayName="interpolationFactoryAdder",angular.forEach(J,e)}var c=function(a,r,i,s,o){var l=m.defer(),t=function(t){if(Object.prototype.hasOwnProperty.call(t,r)&&null!==t[r]){s.setLocale(a);var e=t[r];if("@:"===e.substr(0,2))c(a,e.substr(2),i,s,o).then(l.resolve,l.reject);else{var n=s.interpolate(t[r],i,"service",o,r);n=O(r,t[r],n,i,a),l.resolve(n)}s.setLocale(F)}else l.reject()};return t.displayName="fallbackTranslationResolver",function(t){var e=m.defer();if(Object.prototype.hasOwnProperty.call(q,t))e.resolve(q[t]);else if(f[t]){var n=function(t){lt(t.key,t.table),e.resolve(t.table)};n.displayName="translationTableResolver",f[t].then(n,e.reject)}else e.reject();return e.promise}(a).then(t,l.reject),l.promise},g=function(t,e,n,a,r){var i,s=q[t];if(s&&Object.prototype.hasOwnProperty.call(s,e)&&null!==s[e]){if(a.setLocale(t),i=a.interpolate(s[e],n,"filter",r,e),i=O(e,s[e],i,n,t,r),!angular.isString(i)&&angular.isFunction(i.$$unwrapTrustedValue)){var o=i.$$unwrapTrustedValue();if("@:"===o.substr(0,2))return g(t,o.substr(2),n,a,r)}else if("@:"===i.substr(0,2))return g(t,i.substr(2),n,a,r);a.setLocale(F)}return i},C=function(t,e,n,a){return V?o.get(V)(t,F,e,n,a):t},N=function(t,e,n,a,r,i){var s=m.defer();if(t<T.length){var o=T[t];c(o,e,n,a,i).then(function(t){s.resolve(t)},function(){return N(t+1,e,n,a,r,i).then(s.resolve,s.reject)})}else if(r)s.resolve(r);else{var l=C(e,n,r);V&&l?s.resolve(l):s.reject(w(e))}return s.promise},p=function(t,e,n,a,r){var i;if(t<T.length){var s=T[t];(i=g(s,e,n,a,r))||""===i||(i=p(t+1,e,n,a))}return i},h=function(t,e,n,a,r,i){var s,o,l,u,c,f=m.defer(),g=r?q[r]:q,p=n?L[n]:b;if(g&&Object.prototype.hasOwnProperty.call(g,t)&&null!==g[t]){var h=g[t];if("@:"===h.substr(0,2))j(h.substr(2),e,n,a,r,i).then(f.resolve,f.reject);else{var d=p.interpolate(h,e,"service",i,t);d=O(t,h,d,e,r),f.resolve(d)}}else{var v;V&&!S&&(v=C(t,e,a)),r&&T&&T.length?(s=t,o=e,l=p,u=a,c=i,N(0<y?y:$,s,o,l,u,c)).then(function(t){f.resolve(t)},function(t){f.reject(w(t))}):V&&!S&&v?a?f.resolve(a):f.resolve(v):a?f.resolve(a):f.reject(w(t))}return f.promise},d=function(t,e,n,a,r){var i,s=a?q[a]:q,o=b;if(L&&Object.prototype.hasOwnProperty.call(L,n)&&(o=L[n]),s&&Object.prototype.hasOwnProperty.call(s,t)&&null!==s[t]){var l=s[t];"@:"===l.substr(0,2)?i=d(l.substr(2),e,n,a,r):(i=o.interpolate(l,e,"filter",r,t),i=O(t,l,i,e,a,r))}else{var u;V&&!S&&(u=C(t,e,r)),i=a&&T&&T.length?p(($=0)<y?y:$,t,e,o,r):V&&!S&&u?u:w(t)}return i},O=function(t,e,n,a,r,i){var s=G;return s&&("string"==typeof s&&(s=o.get(s)),s)?s(t,e,n,a,r,i):n},v=function(t){q[t]||!D||f[t]||(f[t]=u(t).then(function(t){return lt(t.key,t.table),t}))};j.preferredLanguage=function(t){return t&&ct(t),z},j.cloakClassName=function(){return Q},j.nestedObjectDelimeter=function(){return Z},j.fallbackLanguage=function(t){if(null!=t){if(ft(t),D&&T&&T.length)for(var e=0,n=T.length;e<n;e++)f[T[e]]||(f[T[e]]=u(T[e]));j.use(j.use())}return x?T[0]:T},j.useFallbackLanguage=function(t){if(null!=t)if(t){var e=it(T,t);-1<e&&(y=e)}else y=0},j.proposedLanguage=function(){return I},j.storage=function(){return i},j.negotiateLocale=ot,j.use=function(e){if(!e)return F;var n=m.defer();n.promise.then(null,angular.noop),s.$emit("$translateChangeStart",{language:e});var t=ot(e);return 0<Y.length&&!t?m.reject(e):(t&&(e=t),I=e,!X&&q[e]||!D||f[e]?f[e]?f[e].then(function(t){return I===t.key&&l(t.key),n.resolve(t.key),t},function(t){return!F&&T&&0<T.length&&T[0]!==t?j.use(T[0]).then(n.resolve,n.reject):n.reject(t)}):(n.resolve(e),l(e)):(f[e]=u(e).then(function(t){return lt(t.key,t.table),n.resolve(t.key),I===e&&l(t.key),t},function(t){return s.$emit("$translateChangeError",{language:t}),n.reject(t),s.$emit("$translateChangeEnd",{language:t}),m.reject(t)}),f[e].finally(function(){var t;I===(t=e)&&(I=void 0),f[t]=void 0}).catch(angular.noop)),n.promise)},j.resolveClientLocale=function(){return rt()},j.storageKey=function(){return gt()},j.isPostCompilingEnabled=function(){return W},j.isForceAsyncReloadEnabled=function(){return X},j.isKeepContent=function(){return et},j.refresh=function(t){if(!D)throw new Error("Couldn't refresh translation table, no loader registered!");s.$emit("$translateRefreshStart",{language:t});var e=m.defer(),n={};function a(e){var t=u(e);return(f[e]=t).then(function(t){q[e]={},lt(e,t.table),n[e]=!0},angular.noop),t}if(e.promise.then(function(){for(var t in q)q.hasOwnProperty(t)&&(t in n||delete q[t]);F&&l(F)},angular.noop).finally(function(){s.$emit("$translateRefreshEnd",{language:t})}),t)q[t]?a(t).then(e.resolve,e.reject):e.reject();else{var r=T&&T.slice()||[];F&&-1===r.indexOf(F)&&r.push(F),m.all(r.map(a)).then(e.resolve,e.reject)}return e.promise},j.instant=function(t,e,n,a,r){var i=a&&a!==F?ot(a)||a:F;if(null===t||angular.isUndefined(t))return t;if(a&&v(a),angular.isArray(t)){for(var s={},o=0,l=t.length;o<l;o++)s[t[o]]=j.instant(t[o],e,n,a,r);return s}if(angular.isString(t)&&t.length<1)return t;t&&(t=st.apply(t));var u,c,f=[];z&&f.push(z),i&&f.push(i),T&&T.length&&(f=f.concat(T));for(var g=0,p=f.length;g<p;g++){var h=f[g];if(q[h]&&void 0!==q[h][t]&&(u=d(t,e,n,i,r)),void 0!==u)break}u||""===u||(U||M?u=w(t):(u=b.interpolate(t,e,"filter",r),V&&!S&&(c=C(t,e,r)),V&&!S&&c&&(u=c)));return u},j.versionInfo=function(){return"2.18.1"},j.loaderCache=function(){return H},j.directivePriority=function(){return nt},j.statefulFilter=function(){return at},j.isReady=function(){return tt};var n=m.defer();n.promise.then(function(){tt=!0}),j.onReady=function(t){var e=m.defer();return angular.isFunction(t)&&e.promise.then(t),tt?e.resolve():n.promise.then(e.resolve),e.promise},j.getAvailableLanguageKeys=function(){return 0<Y.length?Y:null},j.getTranslationTable=function(t){return(t=t||j.use())&&q[t]?angular.copy(q[t]):null};var a=s.$on("$translateReady",function(){n.resolve(),a(),a=null}),r=s.$on("$translateChangeEnd",function(){n.resolve(),r(),r=null});if(D){if(angular.equals(q,{})&&j.use()&&j.use(j.use()),T&&T.length)for(var E=function(t){return lt(t.key,t.table),s.$emit("$translateChangeEnd",{language:t.key}),t},k=0,P=T.length;k<P;k++){var A=T[k];!X&&q[A]||(f[A]=u(A).then(E))}}else s.$emit("$translateReady",{language:j.use()});return j}]}function n(s,o){"use strict";var t={};return t.setLocale=function(t){t},t.getInterpolationIdentifier=function(){return"default"},t.useSanitizeValueStrategy=function(t){return o.useStrategy(t),this},t.interpolate=function(t,e,n,a,r){var i;return e=e||{},e=o.sanitize(e,"params",a,n),angular.isNumber(t)?i=""+t:angular.isString(t)?(i=s(t)(e),i=o.sanitize(i,"text",a,n)):i="",i},t}function a(S,L,j,w,C){"use strict";var N=function(t){return angular.isString(t)?t.toLowerCase():t};return{restrict:"AE",scope:!0,priority:S.directivePriority(),compile:function(t,h){var d=h.translateValues?h.translateValues:void 0,v=h.translateInterpolation?h.translateInterpolation:void 0,m=h.translateSanitizeStrategy?h.translateSanitizeStrategy:void 0,$=t[0].outerHTML.match(/translate-value-+/i),y="^(.*)("+L.startSymbol()+".*"+L.endSymbol()+")(.*)",b="^(.*)"+L.startSymbol()+"(.*)"+L.endSymbol()+"(.*)";return function(r,l,u){r.interpolateParams={},r.preText="",r.postText="",r.translateNamespace=function t(e){if(e.translateNamespace)return e.translateNamespace;if(e.$parent)return t(e.$parent)}(r);var i={},s=function(t){if(angular.isFunction(s._unwatchOld)&&(s._unwatchOld(),s._unwatchOld=void 0),angular.equals(t,"")||!angular.isDefined(t)){var e=function(){return this.toString().replace(/^\s+|\s+$/g,"")}.apply(l.text()),n=e.match(y);if(angular.isArray(n)){r.preText=n[1],r.postText=n[3],i.translate=L(n[2])(r.$parent);var a=e.match(b);angular.isArray(a)&&a[2]&&a[2].length&&(s._unwatchOld=r.$watch(a[2],function(t){i.translate=t,c()}))}else i.translate=e||void 0}else i.translate=t;c()},t=function(e){u.$observe(e,function(t){i[e]=t,c()})};!function(t,e,n){if(e.translateValues&&angular.extend(t,w(e.translateValues)(r.$parent)),$)for(var a in n)Object.prototype.hasOwnProperty.call(e,a)&&"translateValue"===a.substr(0,14)&&"translateValues"!==a&&(t[N(a.substr(14,1))+a.substr(15)]=n[a])}(r.interpolateParams,u,h);var e=!0;for(var n in u.$observe("translate",function(t){void 0===t?s(""):""===t&&e||(i.translate=t,c()),e=!1}),u)u.hasOwnProperty(n)&&"translateAttr"===n.substr(0,13)&&13<n.length&&t(n);if(u.$observe("translateDefault",function(t){r.defaultText=t,c()}),m&&u.$observe("translateSanitizeStrategy",function(t){r.sanitizeStrategy=w(t)(r.$parent),c()}),d&&u.$observe("translateValues",function(t){t&&r.$parent.$watch(function(){angular.extend(r.interpolateParams,w(t)(r.$parent))})}),$){var a=function(n){u.$observe(n,function(t){var e=N(n.substr(14,1))+n.substr(15);r.interpolateParams[e]=t})};for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&"translateValue"===o.substr(0,14)&&"translateValues"!==o&&a(o)}var c=function(){for(var t in i)i.hasOwnProperty(t)&&void 0!==i[t]&&f(t,i[t],r,r.interpolateParams,r.defaultText,r.translateNamespace)},f=function(e,t,n,a,r,i){t?(i&&"."===t.charAt(0)&&(t=i+t),S(t,a,v,r,n.translateLanguage,n.sanitizeStrategy).then(function(t){g(t,n,!0,e)},function(t){g(t,n,!1,e)})):g(t,n,!1,e)},g=function(t,e,n,a){if(n||void 0!==e.defaultText&&(t=e.defaultText),"translate"===a){(n||!n&&!S.isKeepContent()&&void 0===u.translateKeepContent)&&l.empty().append(e.preText+t+e.postText);var r=S.isPostCompilingEnabled(),i=void 0!==h.translateCompile,s=i&&"false"!==h.translateCompile;(r&&!i||s)&&j(l.contents())(e)}else{var o=u.$attr[a];"data-"===o.substr(0,5)&&(o=o.substr(5)),o=o.substr(15),l.attr(o,t)}};(d||$||u.translateDefault)&&r.$watch("interpolateParams",c,!0),r.$on("translateLanguageChanged",c);var p=C.$on("$translateChangeSuccess",c);l.text().length?u.translate?s(u.translate):s(""):u.translate&&s(u.translate),c(),r.$on("$destroy",p)}}}}function r(u,c){"use strict";return{restrict:"A",priority:u.directivePriority(),link:function(n,a,r){var i,s,o,l={},t=function(){angular.forEach(i,function(t,e){t&&(l[e]=!0,n.translateNamespace&&"."===t.charAt(0)&&(t=n.translateNamespace+t),u(t,s,r.translateInterpolation,void 0,n.translateLanguage,o).then(function(t){a.attr(e,t)},function(t){a.attr(e,t)}))}),angular.forEach(l,function(t,e){i[e]||(a.removeAttr(e),delete l[e])})};f(n,r.translateAttr,function(t){i=t},t),f(n,r.translateValues,function(t){s=t},t),f(n,r.translateSanitizeStrategy,function(t){o=t},t),r.translateValues&&n.$watch(r.translateValues,t,!0),n.$on("translateLanguageChanged",t);var e=c.$on("$translateChangeSuccess",t);t(),n.$on("$destroy",e)}}}function f(t,e,n,a){"use strict";e&&("::"===e.substr(0,2)?e=e.substr(2):t.$watch(e,function(t){n(t),a()},!0),n(t.$eval(e)))}function i(s,o){"use strict";return{compile:function(t){var i=function(t){t.addClass(s.cloakClassName())};return i(t),function(t,e,n){var a=function(t){t.removeClass(s.cloakClassName())}.bind(this,e),r=i.bind(this,e);n.translateCloak&&n.translateCloak.length?(n.$observe("translateCloak",function(t){s(t).then(a,r)}),o.$on("$translateChangeSuccess",function(){s(n.translateCloak).then(a,r)})):s.onReady(a)}}}}function s(){"use strict";return{restrict:"A",scope:!0,compile:function(){return{pre:function(t,e,n){t.translateNamespace=function t(e){if(e.translateNamespace)return e.translateNamespace;if(e.$parent)return t(e.$parent)}(t),t.translateNamespace&&"."===n.translateNamespace.charAt(0)?t.translateNamespace+=n.translateNamespace:t.translateNamespace=n.translateNamespace}}}}}function o(){"use strict";return{restrict:"A",scope:!0,compile:function(){return function(e,t,n){n.$observe("translateLanguage",function(t){e.translateLanguage=t}),e.$watch("translateLanguage",function(){e.$broadcast("translateLanguageChanged")})}}}}function l(i,s){"use strict";var t=function(t,e,n,a){if(!angular.isObject(e)){var r=this||{__SCOPE_IS_NOT_AVAILABLE:"More info at https://github.com/angular/angular.js/commit/8863b9d04c722b278fa93c5d66ad1e578ad6eb1f"};e=i(e)(r)}return s.instant(t,e,n,a)};return s.statefulFilter()&&(t.$stateful=!0),t}function u(t){"use strict";return t("translations")}return t.$inject=["$translate"],e.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],n.$inject=["$interpolate","$translateSanitization"],a.$inject=["$translate","$interpolate","$compile","$parse","$rootScope"],r.$inject=["$translate","$rootScope"],i.$inject=["$translate","$rootScope"],l.$inject=["$parse","$translate"],u.$inject=["$cacheFactory"],angular.module("pascalprecht.translate",["ng"]).run(t),t.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",function(){"use strict";var n,a,g,p=null,h=!1,d=!1;(g={sanitize:function(t,e){return"text"===e&&(t=i(t)),t},escape:function(t,e){return"text"===e&&(t=r(t)),t},sanitizeParameters:function(t,e){return"params"===e&&(t=o(t,i)),t},escapeParameters:function(t,e){return"params"===e&&(t=o(t,r)),t},sce:function(t,e,n){return"text"===e?t=s(t):"params"===e&&"filter"!==n&&(t=o(t,r)),t},sceParameters:function(t,e){return"params"===e&&(t=o(t,s)),t}}).escaped=g.escapeParameters,this.addStrategy=function(t,e){return g[t]=e,this},this.removeStrategy=function(t){return delete g[t],this},this.useStrategy=function(t){return h=!0,p=t,this},this.$get=["$injector","$log",function(u,c){var e,f={};return u.has("$sanitize")&&(n=u.get("$sanitize")),u.has("$sce")&&(a=u.get("$sce")),{useStrategy:(e=this,function(t){e.useStrategy(t)}),sanitize:function(t,e,n,a){if(p||h||d||(c.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),d=!0),n||null===n||(n=p),!n)return t;a||(a="service");var r,i,s,o,l=angular.isArray(n)?n:[n];return r=t,i=e,s=a,o=l,angular.forEach(o,function(e){if(angular.isFunction(e))r=e(r,i,s);else if(angular.isFunction(g[e]))r=g[e](r,i,s);else{if(!angular.isString(g[e]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+e+"'");if(!f[g[e]])try{f[g[e]]=u.get(g[e])}catch(t){throw f[g[e]]=function(){},new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+e+"'")}r=f[g[e]](r,i,s)}}),r}}}];var r=function(t){var e=angular.element("<div></div>");return e.text(t),e.html()},i=function(t){if(!n)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return n(t)},s=function(t){if(!a)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sce service.");return a.trustAsHtml(t)},o=function(t,n,a){if(angular.isDate(t))return t;if(angular.isObject(t)){var r=angular.isArray(t)?[]:{};if(a){if(-1<a.indexOf(t))throw new Error("pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object")}else a=[];return a.push(t),angular.forEach(t,function(t,e){angular.isFunction(t)||(r[e]=o(t,n,a))}),a.splice(-1,1),r}return angular.isNumber(t)?t:!0===t||!1===t?t:angular.isUndefined(t)||null===t?t:n(t)}}),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",e),e.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",n),n.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",a),a.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateAttr",r),r.displayName="translateAttrDirective",angular.module("pascalprecht.translate").directive("translateCloak",i),i.displayName="translateCloakDirective",angular.module("pascalprecht.translate").directive("translateNamespace",s),s.displayName="translateNamespaceDirective",angular.module("pascalprecht.translate").directive("translateLanguage",o),o.displayName="translateLanguageDirective",angular.module("pascalprecht.translate").filter("translate",l),l.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",u),u.displayName="$translationCache","pascalprecht.translate"});

(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.MessageFormat=f()}})(function(){var define,module,exports;return(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var reserved=require('reserved-words');var parse=require('messageformat-parser').parse;function Compiler(mf){this.mf=mf;this.lc=null;this.locales={};this.runtime={};this.formatters={};}
module.exports=Compiler;Compiler.propname=function(key,obj){if(/^[A-Z_$][0-9A-Z_$]*$/i.test(key)&&['break','continue','delete','else','for','function','if','in','new','return','this','typeof','var','void','while','with','case','catch','default','do','finally','instanceof','switch','throw','try'].indexOf(key)<0){return obj?obj+'.'+key:key;}else{var jkey=JSON.stringify(key);return obj?obj+'['+jkey+']':jkey;}}
Compiler.funcname=function(key){var fn=key.trim().replace(/\W+/g,'_');return reserved.check(fn,'es2015',true)||/^\d/.test(fn)?'_'+fn:fn;}
Compiler.bidiMarkText=function(text,locale){function isLocaleRTL(locale){var rtlLanguages=['ar','ckb','fa','he','ks($|[^bfh])','lrc','mzn','pa-Arab','ps','ug','ur','uz-Arab','yi'];return new RegExp('^'+rtlLanguages.join('|^')).test(locale);}
var mark=JSON.stringify(isLocaleRTL(locale)?'\u200F':'\u200E');return mark+' + '+text+' + '+mark;}
Compiler.prototype.cases=function(token,plural){var needOther=true;var r=token.cases.map(function(c){if(c.key==='other')needOther=false;var s=c.tokens.map(function(tok){return this.token(tok,plural);},this);return Compiler.propname(c.key)+': '+(s.join(' + ')||'""');},this);if(needOther)throw new Error("No 'other' form found in "+JSON.stringify(token));return'{ '+r.join(', ')+' }';}
Compiler.prototype.token=function(token,plural){if(typeof token=='string')return JSON.stringify(token);var fn,args=[Compiler.propname(token.arg,'d')];switch(token.type){case'argument':return this.mf.bidiSupport?Compiler.bidiMarkText(args[0],this.lc):args[0];case'select':fn='select';args.push(this.cases(token,this.mf.strictNumberSign?null:plural));this.runtime.select=true;break;case'selectordinal':fn='plural';args.push(0,Compiler.funcname(this.lc),this.cases(token,token),1);this.locales[this.lc]=true;this.runtime.plural=true;break;case'plural':fn='plural';args.push(token.offset||0,Compiler.funcname(this.lc),this.cases(token,token));this.locales[this.lc]=true;this.runtime.plural=true;break;case'function':if(this.mf.intlSupport&&!(token.key in this.mf.fmt)&&(token.key in this.mf.constructor.formatters)){var fmt=this.mf.constructor.formatters[token.key];this.mf.fmt[token.key]=(typeof fmt(this.mf)=='function')?fmt(this.mf):fmt;}
if(!this.mf.fmt[token.key])throw new Error('Formatting function '+JSON.stringify(token.key)+' not found!');args.push(JSON.stringify(this.lc));if(token.params)switch(token.params.length){case 0:break;case 1:args.push(JSON.stringify(token.params[0]));break;default:args.push(JSON.stringify(token.params));break;}
fn=Compiler.propname(token.key,'fmt');this.formatters[token.key]=true;break;case'octothorpe':if(!plural)return'"#"';fn='number';args=[Compiler.propname(plural.arg,'d'),JSON.stringify(plural.arg)];if(plural.offset)args.push(plural.offset);this.runtime.number=true;break;}
if(!fn)throw new Error('Parser error for token '+JSON.stringify(token));return fn+'('+args.join(', ')+')';};Compiler.prototype.compile=function(src,lc,plurals){if(typeof src!='object'){this.lc=lc;var pc=plurals[lc]||{cardinal:[],ordinal:[]};var r=parse(src,pc).map(function(token){return this.token(token);},this);return'function(d) { return '+(r.join(' + ')||'""')+'; }';}else{var result={};for(var key in src){var lcKey=plurals.hasOwnProperty(key)?key:lc;result[key]=this.compile(src[key],lcKey,plurals);}
return result;}}},{"messageformat-parser":8,"reserved-words":10}],2:[function(require,module,exports){var Compiler=require('./compiler');var Runtime=require('./runtime');function getPluralFunc(locale,noPluralKeyChecks){var plurals=require('make-plural/plurals');var pluralCategories=require('make-plural/pluralCategories');for(var l=locale;l;l=l.replace(/[-_]?[^-_]*$/,'')){var pf=plurals[l];if(pf){var pc=noPluralKeyChecks?{cardinal:[],ordinal:[]}:(pluralCategories[l]||{});var fn=function(){return pf.apply(this,arguments);};fn.toString=function(){return pf.toString();};fn.cardinal=pc.cardinal;fn.ordinal=pc.ordinal;return fn;}}
throw new Error('Localisation function not found for locale '+JSON.stringify(locale));}
function MessageFormat(locale){this.pluralFuncs={};if(locale){if(typeof locale=='string'){this.pluralFuncs[locale]=getPluralFunc(locale);}else if(Array.isArray(locale)){locale.forEach(function(lc){this.pluralFuncs[lc]=getPluralFunc(lc);},this);}else if(typeof locale=='object'){for(var lc in locale)if(locale.hasOwnProperty(lc)){if(typeof locale[lc]!='function')throw new Error('Expected function value for locale '+JSON.stringify(lc));this.pluralFuncs[lc]=locale[lc];}}}
this.fmt={};this.runtime=new Runtime(this);}
MessageFormat.defaultLocale='en';MessageFormat.escape=function(str){return str.replace(/[#{}\\]/g,'\\$&');}
MessageFormat.formatters={number:function(self){return new Function("v,lc,p","return new Intl.NumberFormat(lc,\n"+"    p=='integer' ? {maximumFractionDigits:0}\n"+"  : p=='percent' ? {style:'percent'}\n"+"  : p=='currency' ? {style:'currency', currency:'"+(self.currency||'USD')+"', minimumFractionDigits:2, maximumFractionDigits:2}\n"+"  : {}).format(v)");},date:function(v,lc,p){var o={day:'numeric',month:'short',year:'numeric'};switch(p){case'full':o.weekday='long';case'long':o.month='long';break;case'short':o.month='numeric';}
return(new Date(v)).toLocaleDateString(lc,o)},time:function(v,lc,p){var o={second:'numeric',minute:'numeric',hour:'numeric'};switch(p){case'full':case'long':o.timeZoneName='short';break;case'short':delete o.second;}
return(new Date(v)).toLocaleTimeString(lc,o)}};MessageFormat.prototype.addFormatters=function(fmt){for(var name in fmt)if(fmt.hasOwnProperty(name)){this.fmt[name]=fmt[name];}
return this;};MessageFormat.prototype.disablePluralKeyChecks=function(){this.noPluralKeyChecks=true;for(var lc in this.pluralFuncs)if(this.pluralFuncs.hasOwnProperty(lc)){this.pluralFuncs[lc].cardinal=[];this.pluralFuncs[lc].ordinal=[];}
return this;};MessageFormat.prototype.setBiDiSupport=function(enable){this.bidiSupport=!!enable||(typeof enable=='undefined');return this;};MessageFormat.prototype.setIntlSupport=function(enable){this.intlSupport=!!enable||(typeof enable=='undefined');return this;};MessageFormat.prototype.setStrictNumberSign=function(enable){this.strictNumberSign=!!enable||(typeof enable=='undefined');this.runtime.setStrictNumber(this.strictNumberSign);return this;};MessageFormat.prototype.compile=function(messages,locale){function _stringify(obj,level){if(!level)level=0;if(typeof obj!='object')return obj;var o=[],indent='';for(var i=0;i<level;++i)indent+='  ';for(var k in obj)o.push('\n'+indent+'  '+Compiler.propname(k)+': '+_stringify(obj[k],level+1));return'{'+o.join(',')+'\n'+indent+'}';}
var pf;if(Object.keys(this.pluralFuncs).length==0){if(!locale)locale=MessageFormat.defaultLocale;pf={};pf[locale]=getPluralFunc(locale,this.noPluralKeyChecks);}else if(locale){pf={};pf[locale]=this.pluralFuncs[locale];if(!pf[locale])throw new Error('Locale '+JSON.stringify(locale)+'not found in '+JSON.stringify(this.pluralFuncs)+'!');}else{pf=this.pluralFuncs;locale=Object.keys(pf)[0];}
var compiler=new Compiler(this);var obj=compiler.compile(messages,locale,pf);if(typeof messages!='object'){var fn=new Function('number, plural, select, fmt',Compiler.funcname(locale),'return '+obj);var rt=this.runtime;return fn(rt.number,rt.plural,rt.select,this.fmt,pf[locale]);}
var rtStr=this.runtime.toString(pf,compiler)+'\n';var objStr=_stringify(obj);var result=new Function(rtStr+'return '+objStr)();if(result.hasOwnProperty('toString'))throw new Error('The top-level message key `toString` is reserved');result.toString=function(global){switch(global||''){case'exports':var o=[];for(var k in obj)o.push(Compiler.propname(k,'exports')+' = '+_stringify(obj[k]));return rtStr+o.join(';\n');case'module.exports':return rtStr+'module.exports = '+objStr;case'export default':return rtStr+'export default '+objStr;case'':return rtStr+'return '+objStr;default:if(global.indexOf('.')>-1)return rtStr+global+' = '+objStr;return rtStr+['(function (root, G) {','  if (typeof define === "function" && define.amd) { define(G); }','  else if (typeof exports === "object") { module.exports = G; }','  else { '+Compiler.propname(global,'root')+' = G; }','})(this, '+objStr+');'].join('\n');}}
return result;}
module.exports=MessageFormat;},{"./compiler":1,"./runtime":3,"make-plural/pluralCategories":6,"make-plural/plurals":7}],3:[function(require,module,exports){var Compiler=require('./compiler');function Runtime(mf){this.mf=mf;this.setStrictNumber(mf.strictNumberSign);}
module.exports=Runtime;function defaultNumber(value,name,offset){if(!offset)return value;if(isNaN(value))throw new Error('Can\'t apply offset:'+offset+' to argument `'+name+'` with non-numerical value '+JSON.stringify(value)+'.');return value-offset;}
function strictNumber(value,name,offset){if(isNaN(value))throw new Error('Argument `'+name+'` has non-numerical value '+JSON.stringify(value)+'.');return value-(offset||0);}
Runtime.prototype.setStrictNumber=function(enable){this.number=enable?strictNumber:defaultNumber;}
Runtime.prototype.plural=function(value,offset,lcfunc,data,isOrdinal){if({}.hasOwnProperty.call(data,value))return data[value];if(offset)value-=offset;var key=lcfunc(value,isOrdinal);if(key in data)return data[key];return data.other;}
Runtime.prototype.select=function(value,data){if({}.hasOwnProperty.call(data,value))return data[value];return data.other;}
Runtime.prototype.toString=function(pluralFuncs,compiler){function _stringify(o,level){if(typeof o!='object'){var funcStr=o.toString().replace(/^(function )\w*/,'$1');var indent=/([ \t]*)\S.*$/.exec(funcStr);return indent?funcStr.replace(new RegExp('^'+indent[1],'mg'),''):funcStr;}
var s=[];for(var i in o){if(level==0)s.push('var '+i+' = '+_stringify(o[i],level+1)+';\n');else s.push(Compiler.propname(i)+': '+_stringify(o[i],level+1));}
if(level==0)return s.join('');if(s.length==0)return'{}';var indent='  ';while(--level)indent+='  ';return'{\n'+s.join(',\n').replace(/^/gm,indent)+'\n}';}
var obj={};Object.keys(compiler.locales).forEach(function(lc){obj[Compiler.funcname(lc)]=pluralFuncs[lc];});Object.keys(compiler.runtime).forEach(function(fn){obj[fn]=this[fn];},this);var fmtKeys=Object.keys(compiler.formatters);var fmt=this.mf.fmt;if(fmtKeys.length)obj.fmt=fmtKeys.reduce(function(o,key){o[key]=fmt[key];return o;},{});return _stringify(obj,0);}},{"./compiler":1}],4:[function(require,module,exports){var util=require('util/');var pSlice=Array.prototype.slice;var hasOwn=Object.prototype.hasOwnProperty;var assert=module.exports=ok;assert.AssertionError=function AssertionError(options){this.name='AssertionError';this.actual=options.actual;this.expected=options.expected;this.operator=options.operator;if(options.message){this.message=options.message;this.generatedMessage=false;}else{this.message=getMessage(this);this.generatedMessage=true;}
var stackStartFunction=options.stackStartFunction||fail;if(Error.captureStackTrace){Error.captureStackTrace(this,stackStartFunction);}
else{var err=new Error();if(err.stack){var out=err.stack;var fn_name=stackStartFunction.name;var idx=out.indexOf('\n'+fn_name);if(idx>=0){var next_line=out.indexOf('\n',idx+1);out=out.substring(next_line+1);}
this.stack=out;}}};util.inherits(assert.AssertionError,Error);function replacer(key,value){if(util.isUndefined(value)){return''+value;}
if(util.isNumber(value)&&!isFinite(value)){return value.toString();}
if(util.isFunction(value)||util.isRegExp(value)){return value.toString();}
return value;}
function truncate(s,n){if(util.isString(s)){return s.length<n?s:s.slice(0,n);}else{return s;}}
function getMessage(self){return truncate(JSON.stringify(self.actual,replacer),128)+' '+
self.operator+' '+
truncate(JSON.stringify(self.expected,replacer),128);}
function fail(actual,expected,message,operator,stackStartFunction){throw new assert.AssertionError({message:message,actual:actual,expected:expected,operator:operator,stackStartFunction:stackStartFunction});}
assert.fail=fail;function ok(value,message){if(!value)fail(value,true,message,'==',assert.ok);}
assert.ok=ok;assert.equal=function equal(actual,expected,message){if(actual!=expected)fail(actual,expected,message,'==',assert.equal);};assert.notEqual=function notEqual(actual,expected,message){if(actual==expected){fail(actual,expected,message,'!=',assert.notEqual);}};assert.deepEqual=function deepEqual(actual,expected,message){if(!_deepEqual(actual,expected)){fail(actual,expected,message,'deepEqual',assert.deepEqual);}};function _deepEqual(actual,expected){if(actual===expected){return true;}else if(util.isBuffer(actual)&&util.isBuffer(expected)){if(actual.length!=expected.length)return false;for(var i=0;i<actual.length;i++){if(actual[i]!==expected[i])return false;}
return true;}else if(util.isDate(actual)&&util.isDate(expected)){return actual.getTime()===expected.getTime();}else if(util.isRegExp(actual)&&util.isRegExp(expected)){return actual.source===expected.source&&actual.global===expected.global&&actual.multiline===expected.multiline&&actual.lastIndex===expected.lastIndex&&actual.ignoreCase===expected.ignoreCase;}else if(!util.isObject(actual)&&!util.isObject(expected)){return actual==expected;}else{return objEquiv(actual,expected);}}
function isArguments(object){return Object.prototype.toString.call(object)=='[object Arguments]';}
function objEquiv(a,b){if(util.isNullOrUndefined(a)||util.isNullOrUndefined(b))
return false;if(a.prototype!==b.prototype)return false;if(util.isPrimitive(a)||util.isPrimitive(b)){return a===b;}
var aIsArgs=isArguments(a),bIsArgs=isArguments(b);if((aIsArgs&&!bIsArgs)||(!aIsArgs&&bIsArgs))
return false;if(aIsArgs){a=pSlice.call(a);b=pSlice.call(b);return _deepEqual(a,b);}
var ka=objectKeys(a),kb=objectKeys(b),key,i;if(ka.length!=kb.length)
return false;ka.sort();kb.sort();for(i=ka.length-1;i>=0;i--){if(ka[i]!=kb[i])
return false;}
for(i=ka.length-1;i>=0;i--){key=ka[i];if(!_deepEqual(a[key],b[key]))return false;}
return true;}
assert.notDeepEqual=function notDeepEqual(actual,expected,message){if(_deepEqual(actual,expected)){fail(actual,expected,message,'notDeepEqual',assert.notDeepEqual);}};assert.strictEqual=function strictEqual(actual,expected,message){if(actual!==expected){fail(actual,expected,message,'===',assert.strictEqual);}};assert.notStrictEqual=function notStrictEqual(actual,expected,message){if(actual===expected){fail(actual,expected,message,'!==',assert.notStrictEqual);}};function expectedException(actual,expected){if(!actual||!expected){return false;}
if(Object.prototype.toString.call(expected)=='[object RegExp]'){return expected.test(actual);}else if(actual instanceof expected){return true;}else if(expected.call({},actual)===true){return true;}
return false;}
function _throws(shouldThrow,block,expected,message){var actual;if(util.isString(expected)){message=expected;expected=null;}
try{block();}catch(e){actual=e;}
message=(expected&&expected.name?' ('+expected.name+').':'.')+
(message?' '+message:'.');if(shouldThrow&&!actual){fail(actual,expected,'Missing expected exception'+message);}
if(!shouldThrow&&expectedException(actual,expected)){fail(actual,expected,'Got unwanted exception'+message);}
if((shouldThrow&&actual&&expected&&!expectedException(actual,expected))||(!shouldThrow&&actual)){throw actual;}}
assert.throws=function(block,error,message){_throws.apply(this,[true].concat(pSlice.call(arguments)));};assert.doesNotThrow=function(block,message){_throws.apply(this,[false].concat(pSlice.call(arguments)));};assert.ifError=function(err){if(err){throw err;}};var objectKeys=Object.keys||function(obj){var keys=[];for(var key in obj){if(hasOwn.call(obj,key))keys.push(key);}
return keys;};},{"util/":13}],5:[function(require,module,exports){if(typeof Object.create==='function'){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor
ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}});};}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor
var TempCtor=function(){}
TempCtor.prototype=superCtor.prototype
ctor.prototype=new TempCtor()
ctor.prototype.constructor=ctor}}},{}],6:[function(require,module,exports){var _cc=[{cardinal:["other"],ordinal:["other"]},{cardinal:["one","other"],ordinal:["other"]},{cardinal:["one","other"],ordinal:["one","other"]},{cardinal:["one","two","other"],ordinal:["other"]}];(function(root,pluralCategories){if(typeof define==='function'&&define.amd){define(pluralCategories);}else if(typeof exports==='object'){module.exports=pluralCategories;}else{root.pluralCategories=pluralCategories;}}(this,{af:_cc[1],ak:_cc[1],am:_cc[1],ar:{cardinal:["zero","one","two","few","many","other"],ordinal:["other"]},as:{cardinal:["one","other"],ordinal:["one","two","few","many","other"]},asa:_cc[1],ast:_cc[1],az:{cardinal:["one","other"],ordinal:["one","few","many","other"]},be:{cardinal:["one","few","many","other"],ordinal:["few","other"]},bem:_cc[1],bez:_cc[1],bg:_cc[1],bh:_cc[1],bm:_cc[0],bn:{cardinal:["one","other"],ordinal:["one","two","few","many","other"]},bo:_cc[0],br:{cardinal:["one","two","few","many","other"],ordinal:["other"]},brx:_cc[1],bs:{cardinal:["one","few","other"],ordinal:["other"]},ca:{cardinal:["one","other"],ordinal:["one","two","few","other"]},ce:_cc[1],cgg:_cc[1],chr:_cc[1],ckb:_cc[1],cs:{cardinal:["one","few","many","other"],ordinal:["other"]},cy:{cardinal:["zero","one","two","few","many","other"],ordinal:["zero","one","two","few","many","other"]},da:_cc[1],de:_cc[1],dsb:{cardinal:["one","two","few","other"],ordinal:["other"]},dv:_cc[1],dz:_cc[0],ee:_cc[1],el:_cc[1],en:{cardinal:["one","other"],ordinal:["one","two","few","other"]},eo:_cc[1],es:_cc[1],et:_cc[1],eu:_cc[1],fa:_cc[1],ff:_cc[1],fi:_cc[1],fil:_cc[2],fo:_cc[1],fr:_cc[2],fur:_cc[1],fy:_cc[1],ga:{cardinal:["one","two","few","many","other"],ordinal:["one","other"]},gd:{cardinal:["one","two","few","other"],ordinal:["other"]},gl:_cc[1],gsw:_cc[1],gu:{cardinal:["one","other"],ordinal:["one","two","few","many","other"]},guw:_cc[1],gv:{cardinal:["one","two","few","many","other"],ordinal:["other"]},ha:_cc[1],haw:_cc[1],he:{cardinal:["one","two","many","other"],ordinal:["other"]},hi:{cardinal:["one","other"],ordinal:["one","two","few","many","other"]},hr:{cardinal:["one","few","other"],ordinal:["other"]},hsb:{cardinal:["one","two","few","other"],ordinal:["other"]},hu:_cc[2],hy:_cc[2],id:_cc[0],ig:_cc[0],ii:_cc[0],"in":_cc[0],is:_cc[1],it:{cardinal:["one","other"],ordinal:["many","other"]},iu:_cc[3],iw:{cardinal:["one","two","many","other"],ordinal:["other"]},ja:_cc[0],jbo:_cc[0],jgo:_cc[1],ji:_cc[1],jmc:_cc[1],jv:_cc[0],jw:_cc[0],ka:{cardinal:["one","other"],ordinal:["one","many","other"]},kab:_cc[1],kaj:_cc[1],kcg:_cc[1],kde:_cc[0],kea:_cc[0],kk:{cardinal:["one","other"],ordinal:["many","other"]},kkj:_cc[1],kl:_cc[1],km:_cc[0],kn:_cc[1],ko:_cc[0],ks:_cc[1],ksb:_cc[1],ksh:{cardinal:["zero","one","other"],ordinal:["other"]},ku:_cc[1],kw:_cc[3],ky:_cc[1],lag:{cardinal:["zero","one","other"],ordinal:["other"]},lb:_cc[1],lg:_cc[1],lkt:_cc[0],ln:_cc[1],lo:{cardinal:["other"],ordinal:["one","other"]},lt:{cardinal:["one","few","many","other"],ordinal:["other"]},lv:{cardinal:["zero","one","other"],ordinal:["other"]},mas:_cc[1],mg:_cc[1],mgo:_cc[1],mk:{cardinal:["one","other"],ordinal:["one","two","many","other"]},ml:_cc[1],mn:_cc[1],mo:{cardinal:["one","few","other"],ordinal:["one","other"]},mr:{cardinal:["one","other"],ordinal:["one","two","few","other"]},ms:{cardinal:["other"],ordinal:["one","other"]},mt:{cardinal:["one","few","many","other"],ordinal:["other"]},my:_cc[0],nah:_cc[1],naq:_cc[3],nb:_cc[1],nd:_cc[1],ne:_cc[2],nl:_cc[1],nn:_cc[1],nnh:_cc[1],no:_cc[1],nqo:_cc[0],nr:_cc[1],nso:_cc[1],ny:_cc[1],nyn:_cc[1],om:_cc[1],or:_cc[1],os:_cc[1],pa:_cc[1],pap:_cc[1],pl:{cardinal:["one","few","many","other"],ordinal:["other"]},prg:{cardinal:["zero","one","other"],ordinal:["other"]},ps:_cc[1],pt:_cc[1],"pt-PT":_cc[1],rm:_cc[1],ro:{cardinal:["one","few","other"],ordinal:["one","other"]},rof:_cc[1],root:_cc[0],ru:{cardinal:["one","few","many","other"],ordinal:["other"]},rwk:_cc[1],sah:_cc[0],saq:_cc[1],sdh:_cc[1],se:_cc[3],seh:_cc[1],ses:_cc[0],sg:_cc[0],sh:{cardinal:["one","few","other"],ordinal:["other"]},shi:{cardinal:["one","few","other"],ordinal:["other"]},si:_cc[1],sk:{cardinal:["one","few","many","other"],ordinal:["other"]},sl:{cardinal:["one","two","few","other"],ordinal:["other"]},sma:_cc[3],smi:_cc[3],smj:_cc[3],smn:_cc[3],sms:_cc[3],sn:_cc[1],so:_cc[1],sq:{cardinal:["one","other"],ordinal:["one","many","other"]},sr:{cardinal:["one","few","other"],ordinal:["other"]},ss:_cc[1],ssy:_cc[1],st:_cc[1],sv:_cc[2],sw:_cc[1],syr:_cc[1],ta:_cc[1],te:_cc[1],teo:_cc[1],th:_cc[0],ti:_cc[1],tig:_cc[1],tk:_cc[1],tl:_cc[2],tn:_cc[1],to:_cc[0],tr:_cc[1],ts:_cc[1],tzm:_cc[1],ug:_cc[1],uk:{cardinal:["one","few","many","other"],ordinal:["few","other"]},ur:_cc[1],uz:_cc[1],ve:_cc[1],vi:{cardinal:["other"],ordinal:["one","other"]},vo:_cc[1],vun:_cc[1],wa:_cc[1],wae:_cc[1],wo:_cc[0],xh:_cc[1],xog:_cc[1],yi:_cc[1],yo:_cc[0],zh:_cc[0],zu:_cc[1]}));},{}],7:[function(require,module,exports){var _cp=[function(n,ord){if(ord)return'other';return'other';},function(n,ord){if(ord)return'other';return(n==1)?'one':'other';},function(n,ord){if(ord)return'other';return((n==0||n==1))?'one':'other';},function(n,ord){var s=String(n).split('.'),v0=!s[1];if(ord)return'other';return(n==1&&v0)?'one':'other';}];(function(root,plurals){if(typeof define==='function'&&define.amd){define(plurals);}else if(typeof exports==='object'){module.exports=plurals;}else{root.plurals=plurals;}}(this,{af:_cp[1],ak:_cp[2],am:function(n,ord){if(ord)return'other';return(n>=0&&n<=1)?'one':'other';},ar:function(n,ord){var s=String(n).split('.'),t0=Number(s[0])==n,n100=t0&&s[0].slice(-2);if(ord)return'other';return(n==0)?'zero':(n==1)?'one':(n==2)?'two':((n100>=3&&n100<=10))?'few':((n100>=11&&n100<=99))?'many':'other';},as:function(n,ord){if(ord)return((n==1||n==5||n==7||n==8||n==9||n==10))?'one':((n==2||n==3))?'two':(n==4)?'few':(n==6)?'many':'other';return(n>=0&&n<=1)?'one':'other';},asa:_cp[1],ast:_cp[3],az:function(n,ord){var s=String(n).split('.'),i=s[0],i10=i.slice(-1),i100=i.slice(-2),i1000=i.slice(-3);if(ord)return((i10==1||i10==2||i10==5||i10==7||i10==8)||(i100==20||i100==50||i100==70||i100==80))?'one':((i10==3||i10==4)||(i1000==100||i1000==200||i1000==300||i1000==400||i1000==500||i1000==600||i1000==700||i1000==800||i1000==900))?'few':(i==0||i10==6||(i100==40||i100==60||i100==90))?'many':'other';return(n==1)?'one':'other';},be:function(n,ord){var s=String(n).split('.'),t0=Number(s[0])==n,n10=t0&&s[0].slice(-1),n100=t0&&s[0].slice(-2);if(ord)return((n10==2||n10==3)&&n100!=12&&n100!=13)?'few':'other';return(n10==1&&n100!=11)?'one':((n10>=2&&n10<=4)&&(n100<12||n100>14))?'few':(t0&&n10==0||(n10>=5&&n10<=9)||(n100>=11&&n100<=14))?'many':'other';},bem:_cp[1],bez:_cp[1],bg:_cp[1],bh:_cp[2],bm:_cp[0],bn:function(n,ord){if(ord)return((n==1||n==5||n==7||n==8||n==9||n==10))?'one':((n==2||n==3))?'two':(n==4)?'few':(n==6)?'many':'other';return(n>=0&&n<=1)?'one':'other';},bo:_cp[0],br:function(n,ord){var s=String(n).split('.'),t0=Number(s[0])==n,n10=t0&&s[0].slice(-1),n100=t0&&s[0].slice(-2),n1000000=t0&&s[0].slice(-6);if(ord)return'other';return(n10==1&&n100!=11&&n100!=71&&n100!=91)?'one':(n10==2&&n100!=12&&n100!=72&&n100!=92)?'two':(((n10==3||n10==4)||n10==9)&&(n100<10||n100>19)&&(n100<70||n100>79)&&(n100<90||n100>99))?'few':(n!=0&&t0&&n1000000==0)?'many':'other';},brx:_cp[1],bs:function(n,ord){var s=String(n).split('.'),i=s[0],f=s[1]||'',v0=!s[1],i10=i.slice(-1),i100=i.slice(-2),f10=f.slice(-1),f100=f.slice(-2);if(ord)return'other';return(v0&&i10==1&&i100!=11||f10==1&&f100!=11)?'one':(v0&&(i10>=2&&i10<=4)&&(i100<12||i100>14)||(f10>=2&&f10<=4)&&(f100<12||f100>14))?'few':'other';},ca:function(n,ord){var s=String(n).split('.'),v0=!s[1];if(ord)return((n==1||n==3))?'one':(n==2)?'two':(n==4)?'few':'other';return(n==1&&v0)?'one':'other';},ce:_cp[1],cgg:_cp[1],chr:_cp[1],ckb:_cp[1],cs:function(n,ord){var s=String(n).split('.'),i=s[0],v0=!s[1];if(ord)return'other';return(n==1&&v0)?'one':((i>=2&&i<=4)&&v0)?'few':(!v0)?'many':'other';},cy:function(n,ord){if(ord)return((n==0||n==7||n==8||n==9))?'zero':(n==1)?'one':(n==2)?'two':((n==3||n==4))?'few':((n==5||n==6))?'many':'other';return(n==0)?'zero':(n==1)?'one':(n==2)?'two':(n==3)?'few':(n==6)?'many':'other';},da:function(n,ord){var s=String(n).split('.'),i=s[0],t0=Number(s[0])==n;if(ord)return'other';return(n==1||!t0&&(i==0||i==1))?'one':'other';},de:_cp[3],dsb:function(n,ord){var s=String(n).split('.'),i=s[0],f=s[1]||'',v0=!s[1],i100=i.slice(-2),f100=f.slice(-2);if(ord)return'other';return(v0&&i100==1||f100==1)?'one':(v0&&i100==2||f100==2)?'two':(v0&&(i100==3||i100==4)||(f100==3||f100==4))?'few':'other';},dv:_cp[1],dz:_cp[0],ee:_cp[1],el:_cp[1],en:function(n,ord){var s=String(n).split('.'),v0=!s[1],t0=Number(s[0])==n,n10=t0&&s[0].slice(-1),n100=t0&&s[0].slice(-2);if(ord)return(n10==1&&n100!=11)?'one':(n10==2&&n100!=12)?'two':(n10==3&&n100!=13)?'few':'other';return(n==1&&v0)?'one':'other';},eo:_cp[1],es:_cp[1],et:_cp[3],eu:_cp[1],fa:function(n,ord){if(ord)return'other';return(n>=0&&n<=1)?'one':'other';},ff:function(n,ord){if(ord)return'other';return(n>=0&&n<2)?'one':'other';},fi:_cp[3],fil:function(n,ord){var s=String(n).split('.'),i=s[0],f=s[1]||'',v0=!s[1],i10=i.slice(-1),f10=f.slice(-1);if(ord)return(n==1)?'one':'other';return(v0&&(i==1||i==2||i==3)||v0&&i10!=4&&i10!=6&&i10!=9||!v0&&f10!=4&&f10!=6&&f10!=9)?'one':'other';},fo:_cp[1],fr:function(n,ord){if(ord)return(n==1)?'one':'other';return(n>=0&&n<2)?'one':'other';},fur:_cp[1],fy:_cp[3],ga:function(n,ord){var s=String(n).split('.'),t0=Number(s[0])==n;if(ord)return(n==1)?'one':'other';return(n==1)?'one':(n==2)?'two':((t0&&n>=3&&n<=6))?'few':((t0&&n>=7&&n<=10))?'many':'other';},gd:function(n,ord){var s=String(n).split('.'),t0=Number(s[0])==n;if(ord)return'other';return((n==1||n==11))?'one':((n==2||n==12))?'two':(((t0&&n>=3&&n<=10)||(t0&&n>=13&&n<=19)))?'few':'other';},gl:_cp[3],gsw:_cp[1],gu:function(n,ord){if(ord)return(n==1)?'one':((n==2||n==3))?'two':(n==4)?'few':(n==6)?'many':'other';return(n>=0&&n<=1)?'one':'other';},guw:_cp[2],gv:function(n,ord){var s=String(n).split('.'),i=s[0],v0=!s[1],i10=i.slice(-1),i100=i.slice(-2);if(ord)return'other';return(v0&&i10==1)?'one':(v0&&i10==2)?'two':(v0&&(i100==0||i100==20||i100==40||i100==60||i100==80))?'few':(!v0)?'many':'other';},ha:_cp[1],haw:_cp[1],he:function(n,ord){var s=String(n).split('.'),i=s[0],v0=!s[1],t0=Number(s[0])==n,n10=t0&&s[0].slice(-1);if(ord)return'other';return(n==1&&v0)?'one':(i==2&&v0)?'two':(v0&&(n<0||n>10)&&t0&&n10==0)?'many':'other';},hi:function(n,ord){if(ord)return(n==1)?'one':((n==2||n==3))?'two':(n==4)?'few':(n==6)?'many':'other';return(n>=0&&n<=1)?'one':'other';},hr:function(n,ord){var s=String(n).split('.'),i=s[0],f=s[1]||'',v0=!s[1],i10=i.slice(-1),i100=i.slice(-2),f10=f.slice(-1),f100=f.slice(-2);if(ord)return'other';return(v0&&i10==1&&i100!=11||f10==1&&f100!=11)?'one':(v0&&(i10>=2&&i10<=4)&&(i100<12||i100>14)||(f10>=2&&f10<=4)&&(f100<12||f100>14))?'few':'other';},hsb:function(n,ord){var s=String(n).split('.'),i=s[0],f=s[1]||'',v0=!s[1],i100=i.slice(-2),f100=f.slice(-2);if(ord)return'other';return(v0&&i100==1||f100==1)?'one':(v0&&i100==2||f100==2)?'two':(v0&&(i100==3||i100==4)||(f100==3||f100==4))?'few':'other';},hu:function(n,ord){if(ord)return((n==1||n==5))?'one':'other';return(n==1)?'one':'other';},hy:function(n,ord){if(ord)return(n==1)?'one':'other';return(n>=0&&n<2)?'one':'other';},id:_cp[0],ig:_cp[0],ii:_cp[0],"in":_cp[0],is:function(n,ord){var s=String(n).split('.'),i=s[0],t0=Number(s[0])==n,i10=i.slice(-1),i100=i.slice(-2);if(ord)return'other';return(t0&&i10==1&&i100!=11||!t0)?'one':'other';},it:function(n,ord){var s=String(n).split('.'),v0=!s[1];if(ord)return((n==11||n==8||n==80||n==800))?'many':'other';return(n==1&&v0)?'one':'other';},iu:function(n,ord){if(ord)return'other';return(n==1)?'one':(n==2)?'two':'other';},iw:function(n,ord){var s=String(n).split('.'),i=s[0],v0=!s[1],t0=Number(s[0])==n,n10=t0&&s[0].slice(-1);if(ord)return'other';return(n==1&&v0)?'one':(i==2&&v0)?'two':(v0&&(n<0||n>10)&&t0&&n10==0)?'many':'other';},ja:_cp[0],jbo:_cp[0],jgo:_cp[1],ji:_cp[3],jmc:_cp[1],jv:_cp[0],jw:_cp[0],ka:function(n,ord){var s=String(n).split('.'),i=s[0],i100=i.slice(-2);if(ord)return(i==1)?'one':(i==0||((i100>=2&&i100<=20)||i100==40||i100==60||i100==80))?'many':'other';return(n==1)?'one':'other';},kab:function(n,ord){if(ord)return'other';return(n>=0&&n<2)?'one':'other';},kaj:_cp[1],kcg:_cp[1],kde:_cp[0],kea:_cp[0],kk:function(n,ord){var s=String(n).split('.'),t0=Number(s[0])==n,n10=t0&&s[0].slice(-1);if(ord)return(n10==6||n10==9||t0&&n10==0&&n!=0)?'many':'other';return(n==1)?'one':'other';},kkj:_cp[1],kl:_cp[1],km:_cp[0],kn:function(n,ord){if(ord)return'other';return(n>=0&&n<=1)?'one':'other';},ko:_cp[0],ks:_cp[1],ksb:_cp[1],ksh:function(n,ord){if(ord)return'other';return(n==0)?'zero':(n==1)?'one':'other';},ku:_cp[1],kw:function(n,ord){if(ord)return'other';return(n==1)?'one':(n==2)?'two':'other';},ky:_cp[1],lag:function(n,ord){var s=String(n).split('.'),i=s[0];if(ord)return'other';return(n==0)?'zero':((i==0||i==1)&&n!=0)?'one':'other';},lb:_cp[1],lg:_cp[1],lkt:_cp[0],ln:_cp[2],lo:function(n,ord){if(ord)return(n==1)?'one':'other';return'other';},lt:function(n,ord){var s=String(n).split('.'),f=s[1]||'',t0=Number(s[0])==n,n10=t0&&s[0].slice(-1),n100=t0&&s[0].slice(-2);if(ord)return'other';return(n10==1&&(n100<11||n100>19))?'one':((n10>=2&&n10<=9)&&(n100<11||n100>19))?'few':(f!=0)?'many':'other';},lv:function(n,ord){var s=String(n).split('.'),f=s[1]||'',v=f.length,t0=Number(s[0])==n,n10=t0&&s[0].slice(-1),n100=t0&&s[0].slice(-2),f100=f.slice(-2),f10=f.slice(-1);if(ord)return'other';return(t0&&n10==0||(n100>=11&&n100<=19)||v==2&&(f100>=11&&f100<=19))?'zero':(n10==1&&n100!=11||v==2&&f10==1&&f100!=11||v!=2&&f10==1)?'one':'other';},mas:_cp[1],mg:_cp[2],mgo:_cp[1],mk:function(n,ord){var s=String(n).split('.'),i=s[0],f=s[1]||'',v0=!s[1],i10=i.slice(-1),i100=i.slice(-2),f10=f.slice(-1);if(ord)return(i10==1&&i100!=11)?'one':(i10==2&&i100!=12)?'two':((i10==7||i10==8)&&i100!=17&&i100!=18)?'many':'other';return(v0&&i10==1||f10==1)?'one':'other';},ml:_cp[1],mn:_cp[1],mo:function(n,ord){var s=String(n).split('.'),v0=!s[1],t0=Number(s[0])==n,n100=t0&&s[0].slice(-2);if(ord)return(n==1)?'one':'other';return(n==1&&v0)?'one':(!v0||n==0||n!=1&&(n100>=1&&n100<=19))?'few':'other';},mr:function(n,ord){if(ord)return(n==1)?'one':((n==2||n==3))?'two':(n==4)?'few':'other';return(n>=0&&n<=1)?'one':'other';},ms:function(n,ord){if(ord)return(n==1)?'one':'other';return'other';},mt:function(n,ord){var s=String(n).split('.'),t0=Number(s[0])==n,n100=t0&&s[0].slice(-2);if(ord)return'other';return(n==1)?'one':(n==0||(n100>=2&&n100<=10))?'few':((n100>=11&&n100<=19))?'many':'other';},my:_cp[0],nah:_cp[1],naq:function(n,ord){if(ord)return'other';return(n==1)?'one':(n==2)?'two':'other';},nb:_cp[1],nd:_cp[1],ne:function(n,ord){var s=String(n).split('.'),t0=Number(s[0])==n;if(ord)return((t0&&n>=1&&n<=4))?'one':'other';return(n==1)?'one':'other';},nl:_cp[3],nn:_cp[1],nnh:_cp[1],no:_cp[1],nqo:_cp[0],nr:_cp[1],nso:_cp[2],ny:_cp[1],nyn:_cp[1],om:_cp[1],or:_cp[1],os:_cp[1],pa:_cp[2],pap:_cp[1],pl:function(n,ord){var s=String(n).split('.'),i=s[0],v0=!s[1],i10=i.slice(-1),i100=i.slice(-2);if(ord)return'other';return(n==1&&v0)?'one':(v0&&(i10>=2&&i10<=4)&&(i100<12||i100>14))?'few':(v0&&i!=1&&(i10==0||i10==1)||v0&&(i10>=5&&i10<=9)||v0&&(i100>=12&&i100<=14))?'many':'other';},prg:function(n,ord){var s=String(n).split('.'),f=s[1]||'',v=f.length,t0=Number(s[0])==n,n10=t0&&s[0].slice(-1),n100=t0&&s[0].slice(-2),f100=f.slice(-2),f10=f.slice(-1);if(ord)return'other';return(t0&&n10==0||(n100>=11&&n100<=19)||v==2&&(f100>=11&&f100<=19))?'zero':(n10==1&&n100!=11||v==2&&f10==1&&f100!=11||v!=2&&f10==1)?'one':'other';},ps:_cp[1],pt:function(n,ord){var s=String(n).split('.'),t0=Number(s[0])==n;if(ord)return'other';return((t0&&n>=0&&n<=2)&&n!=2)?'one':'other';},"pt-PT":_cp[3],rm:_cp[1],ro:function(n,ord){var s=String(n).split('.'),v0=!s[1],t0=Number(s[0])==n,n100=t0&&s[0].slice(-2);if(ord)return(n==1)?'one':'other';return(n==1&&v0)?'one':(!v0||n==0||n!=1&&(n100>=1&&n100<=19))?'few':'other';},rof:_cp[1],root:_cp[0],ru:function(n,ord){var s=String(n).split('.'),i=s[0],v0=!s[1],i10=i.slice(-1),i100=i.slice(-2);if(ord)return'other';return(v0&&i10==1&&i100!=11)?'one':(v0&&(i10>=2&&i10<=4)&&(i100<12||i100>14))?'few':(v0&&i10==0||v0&&(i10>=5&&i10<=9)||v0&&(i100>=11&&i100<=14))?'many':'other';},rwk:_cp[1],sah:_cp[0],saq:_cp[1],sdh:_cp[1],se:function(n,ord){if(ord)return'other';return(n==1)?'one':(n==2)?'two':'other';},seh:_cp[1],ses:_cp[0],sg:_cp[0],sh:function(n,ord){var s=String(n).split('.'),i=s[0],f=s[1]||'',v0=!s[1],i10=i.slice(-1),i100=i.slice(-2),f10=f.slice(-1),f100=f.slice(-2);if(ord)return'other';return(v0&&i10==1&&i100!=11||f10==1&&f100!=11)?'one':(v0&&(i10>=2&&i10<=4)&&(i100<12||i100>14)||(f10>=2&&f10<=4)&&(f100<12||f100>14))?'few':'other';},shi:function(n,ord){var s=String(n).split('.'),t0=Number(s[0])==n;if(ord)return'other';return(n>=0&&n<=1)?'one':((t0&&n>=2&&n<=10))?'few':'other';},si:function(n,ord){var s=String(n).split('.'),i=s[0],f=s[1]||'';if(ord)return'other';return((n==0||n==1)||i==0&&f==1)?'one':'other';},sk:function(n,ord){var s=String(n).split('.'),i=s[0],v0=!s[1];if(ord)return'other';return(n==1&&v0)?'one':((i>=2&&i<=4)&&v0)?'few':(!v0)?'many':'other';},sl:function(n,ord){var s=String(n).split('.'),i=s[0],v0=!s[1],i100=i.slice(-2);if(ord)return'other';return(v0&&i100==1)?'one':(v0&&i100==2)?'two':(v0&&(i100==3||i100==4)||!v0)?'few':'other';},sma:function(n,ord){if(ord)return'other';return(n==1)?'one':(n==2)?'two':'other';},smi:function(n,ord){if(ord)return'other';return(n==1)?'one':(n==2)?'two':'other';},smj:function(n,ord){if(ord)return'other';return(n==1)?'one':(n==2)?'two':'other';},smn:function(n,ord){if(ord)return'other';return(n==1)?'one':(n==2)?'two':'other';},sms:function(n,ord){if(ord)return'other';return(n==1)?'one':(n==2)?'two':'other';},sn:_cp[1],so:_cp[1],sq:function(n,ord){var s=String(n).split('.'),t0=Number(s[0])==n,n10=t0&&s[0].slice(-1),n100=t0&&s[0].slice(-2);if(ord)return(n==1)?'one':(n10==4&&n100!=14)?'many':'other';return(n==1)?'one':'other';},sr:function(n,ord){var s=String(n).split('.'),i=s[0],f=s[1]||'',v0=!s[1],i10=i.slice(-1),i100=i.slice(-2),f10=f.slice(-1),f100=f.slice(-2);if(ord)return'other';return(v0&&i10==1&&i100!=11||f10==1&&f100!=11)?'one':(v0&&(i10>=2&&i10<=4)&&(i100<12||i100>14)||(f10>=2&&f10<=4)&&(f100<12||f100>14))?'few':'other';},ss:_cp[1],ssy:_cp[1],st:_cp[1],sv:function(n,ord){var s=String(n).split('.'),v0=!s[1],t0=Number(s[0])==n,n10=t0&&s[0].slice(-1),n100=t0&&s[0].slice(-2);if(ord)return((n10==1||n10==2)&&n100!=11&&n100!=12)?'one':'other';return(n==1&&v0)?'one':'other';},sw:_cp[3],syr:_cp[1],ta:_cp[1],te:_cp[1],teo:_cp[1],th:_cp[0],ti:_cp[2],tig:_cp[1],tk:_cp[1],tl:function(n,ord){var s=String(n).split('.'),i=s[0],f=s[1]||'',v0=!s[1],i10=i.slice(-1),f10=f.slice(-1);if(ord)return(n==1)?'one':'other';return(v0&&(i==1||i==2||i==3)||v0&&i10!=4&&i10!=6&&i10!=9||!v0&&f10!=4&&f10!=6&&f10!=9)?'one':'other';},tn:_cp[1],to:_cp[0],tr:_cp[1],ts:_cp[1],tzm:function(n,ord){var s=String(n).split('.'),t0=Number(s[0])==n;if(ord)return'other';return((n==0||n==1)||(t0&&n>=11&&n<=99))?'one':'other';},ug:_cp[1],uk:function(n,ord){var s=String(n).split('.'),i=s[0],v0=!s[1],t0=Number(s[0])==n,n10=t0&&s[0].slice(-1),n100=t0&&s[0].slice(-2),i10=i.slice(-1),i100=i.slice(-2);if(ord)return(n10==3&&n100!=13)?'few':'other';return(v0&&i10==1&&i100!=11)?'one':(v0&&(i10>=2&&i10<=4)&&(i100<12||i100>14))?'few':(v0&&i10==0||v0&&(i10>=5&&i10<=9)||v0&&(i100>=11&&i100<=14))?'many':'other';},ur:_cp[3],uz:_cp[1],ve:_cp[1],vi:function(n,ord){if(ord)return(n==1)?'one':'other';return'other';},vo:_cp[1],vun:_cp[1],wa:_cp[2],wae:_cp[1],wo:_cp[0],xh:_cp[1],xog:_cp[1],yi:_cp[3],yo:_cp[0],zh:_cp[0],zu:function(n,ord){if(ord)return'other';return(n>=0&&n<=1)?'one':'other';}}));},{}],8:[function(require,module,exports){"use strict";function peg$subclass(child,parent){function ctor(){this.constructor=child;}
ctor.prototype=parent.prototype;child.prototype=new ctor();}
function peg$SyntaxError(message,expected,found,location){this.message=message;this.expected=expected;this.found=found;this.location=location;this.name="SyntaxError";if(typeof Error.captureStackTrace==="function"){Error.captureStackTrace(this,peg$SyntaxError);}}
peg$subclass(peg$SyntaxError,Error);peg$SyntaxError.buildMessage=function(expected,found){var DESCRIBE_EXPECTATION_FNS={literal:function(expectation){return"\""+literalEscape(expectation.text)+"\"";},"class":function(expectation){var escapedParts="",i;for(i=0;i<expectation.parts.length;i++){escapedParts+=expectation.parts[i]instanceof Array?classEscape(expectation.parts[i][0])+"-"+classEscape(expectation.parts[i][1]):classEscape(expectation.parts[i]);}
return"["+(expectation.inverted?"^":"")+escapedParts+"]";},any:function(expectation){return"any character";},end:function(expectation){return"end of input";},other:function(expectation){return expectation.description;}};function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase();}
function literalEscape(s){return s.replace(/\\/g,'\\\\').replace(/"/g,'\\"').replace(/\0/g,'\\0').replace(/\t/g,'\\t').replace(/\n/g,'\\n').replace(/\r/g,'\\r').replace(/[\x00-\x0F]/g,function(ch){return'\\x0'+hex(ch);}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(ch){return'\\x'+hex(ch);});}
function classEscape(s){return s.replace(/\\/g,'\\\\').replace(/\]/g,'\\]').replace(/\^/g,'\\^').replace(/-/g,'\\-').replace(/\0/g,'\\0').replace(/\t/g,'\\t').replace(/\n/g,'\\n').replace(/\r/g,'\\r').replace(/[\x00-\x0F]/g,function(ch){return'\\x0'+hex(ch);}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(ch){return'\\x'+hex(ch);});}
function describeExpectation(expectation){return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);}
function describeExpected(expected){var descriptions=new Array(expected.length),i,j;for(i=0;i<expected.length;i++){descriptions[i]=describeExpectation(expected[i]);}
descriptions.sort();if(descriptions.length>0){for(i=1,j=1;i<descriptions.length;i++){if(descriptions[i-1]!==descriptions[i]){descriptions[j]=descriptions[i];j++;}}
descriptions.length=j;}
switch(descriptions.length){case 1:return descriptions[0];case 2:return descriptions[0]+" or "+descriptions[1];default:return descriptions.slice(0,-1).join(", ")
+", or "
+descriptions[descriptions.length-1];}}
function describeFound(found){return found?"\""+literalEscape(found)+"\"":"end of input";}
return"Expected "+describeExpected(expected)+" but "+describeFound(found)+" found.";};function peg$parse(input,options){options=options!==void 0?options:{};var peg$FAILED={},peg$startRuleFunctions={start:peg$parsestart},peg$startRuleFunction=peg$parsestart,peg$c0="#",peg$c1=peg$literalExpectation("#",false),peg$c2=function(){return{type:'octothorpe'};},peg$c3=function(str){return str.join('');},peg$c4="{",peg$c5=peg$literalExpectation("{",false),peg$c6="}",peg$c7=peg$literalExpectation("}",false),peg$c8=function(arg){return{type:'argument',arg:arg};},peg$c9=",",peg$c10=peg$literalExpectation(",",false),peg$c11="select",peg$c12=peg$literalExpectation("select",false),peg$c13=function(arg,cases){return{type:'select',arg:arg,cases:cases};},peg$c14="plural",peg$c15=peg$literalExpectation("plural",false),peg$c16="selectordinal",peg$c17=peg$literalExpectation("selectordinal",false),peg$c18=function(arg,type,offset,cases){var ls=((type==='selectordinal')?options.ordinal:options.cardinal)||['zero','one','two','few','many','other'];if(ls&&ls.length)cases.forEach(function(c){if(isNaN(c.key)&&ls.indexOf(c.key)<0)throw new Error('Invalid key `'+c.key+'` for argument `'+arg+'`.'+' Valid '+type+' keys for this locale are `'+ls.join('`, `')+'`, and explicit keys like `=0`.');});return{type:type,arg:arg,offset:offset||0,cases:cases};},peg$c19=function(arg,key,params){return{type:'function',arg:arg,key:key,params:params};},peg$c20=/^[0-9a-zA-Z$_]/,peg$c21=peg$classExpectation([["0","9"],["a","z"],["A","Z"],"$","_"],false,false),peg$c22=/^[^ \t\n\r,.+={}]/,peg$c23=peg$classExpectation([" ","\t","\n","\r",",",".","+","=","{","}"],true,false),peg$c24=function(key,tokens){return{key:key,tokens:tokens};},peg$c25=function(tokens){return tokens;},peg$c26="offset",peg$c27=peg$literalExpectation("offset",false),peg$c28=":",peg$c29=peg$literalExpectation(":",false),peg$c30=function(d){return d;},peg$c31="=",peg$c32=peg$literalExpectation("=",false),peg$c33=function(p){return p;},peg$c34=/^[^{}#\\\0-\x08\x0E-\x1F\x7F]/,peg$c35=peg$classExpectation(["{","}","#","\\",["\0","\b"],["\x0E","\x1F"],"\x7F"],true,false),peg$c36="\\\\",peg$c37=peg$literalExpectation("\\\\",false),peg$c38=function(){return'\\';},peg$c39="\\#",peg$c40=peg$literalExpectation("\\#",false),peg$c41=function(){return'#';},peg$c42="\\{",peg$c43=peg$literalExpectation("\\{",false),peg$c44=function(){return'\u007B';},peg$c45="\\}",peg$c46=peg$literalExpectation("\\}",false),peg$c47=function(){return'\u007D';},peg$c48="\\u",peg$c49=peg$literalExpectation("\\u",false),peg$c50=function(h1,h2,h3,h4){return String.fromCharCode(parseInt('0x'+h1+h2+h3+h4));},peg$c51=/^[0-9]/,peg$c52=peg$classExpectation([["0","9"]],false,false),peg$c53=/^[0-9a-fA-F]/,peg$c54=peg$classExpectation([["0","9"],["a","f"],["A","F"]],false,false),peg$c55=/^[ \t\n\r]/,peg$c56=peg$classExpectation([" ","\t","\n","\r"],false,false),peg$currPos=0,peg$savedPos=0,peg$posDetailsCache=[{line:1,column:1}],peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0,peg$result;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions)){throw new Error("Can't start parsing from rule \""+options.startRule+"\".");}
peg$startRuleFunction=peg$startRuleFunctions[options.startRule];}
function text(){return input.substring(peg$savedPos,peg$currPos);}
function location(){return peg$computeLocation(peg$savedPos,peg$currPos);}
function expected(description,location){location=location!==void 0?location:peg$computeLocation(peg$savedPos,peg$currPos)
throw peg$buildStructuredError([peg$otherExpectation(description)],input.substring(peg$savedPos,peg$currPos),location);}
function error(message,location){location=location!==void 0?location:peg$computeLocation(peg$savedPos,peg$currPos)
throw peg$buildSimpleError(message,location);}
function peg$literalExpectation(text,ignoreCase){return{type:"literal",text:text,ignoreCase:ignoreCase};}
function peg$classExpectation(parts,inverted,ignoreCase){return{type:"class",parts:parts,inverted:inverted,ignoreCase:ignoreCase};}
function peg$anyExpectation(){return{type:"any"};}
function peg$endExpectation(){return{type:"end"};}
function peg$otherExpectation(description){return{type:"other",description:description};}
function peg$computePosDetails(pos){var details=peg$posDetailsCache[pos],p;if(details){return details;}else{p=pos-1;while(!peg$posDetailsCache[p]){p--;}
details=peg$posDetailsCache[p];details={line:details.line,column:details.column};while(p<pos){if(input.charCodeAt(p)===10){details.line++;details.column=1;}else{details.column++;}
p++;}
peg$posDetailsCache[pos]=details;return details;}}
function peg$computeLocation(startPos,endPos){var startPosDetails=peg$computePosDetails(startPos),endPosDetails=peg$computePosDetails(endPos);return{start:{offset:startPos,line:startPosDetails.line,column:startPosDetails.column},end:{offset:endPos,line:endPosDetails.line,column:endPosDetails.column}};}
function peg$fail(expected){if(peg$currPos<peg$maxFailPos){return;}
if(peg$currPos>peg$maxFailPos){peg$maxFailPos=peg$currPos;peg$maxFailExpected=[];}
peg$maxFailExpected.push(expected);}
function peg$buildSimpleError(message,location){return new peg$SyntaxError(message,null,null,location);}
function peg$buildStructuredError(expected,found,location){return new peg$SyntaxError(peg$SyntaxError.buildMessage(expected,found),expected,found,location);}
function peg$parsestart(){var s0,s1;s0=[];s1=peg$parsetoken();while(s1!==peg$FAILED){s0.push(s1);s1=peg$parsetoken();}
return s0;}
function peg$parsetoken(){var s0,s1,s2;s0=peg$parseargument();if(s0===peg$FAILED){s0=peg$parseselect();if(s0===peg$FAILED){s0=peg$parseplural();if(s0===peg$FAILED){s0=peg$parsefunction();if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===35){s1=peg$c0;peg$currPos++;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c1);}}
if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c2();}
s0=s1;if(s0===peg$FAILED){s0=peg$currPos;s1=[];s2=peg$parsechar();if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);s2=peg$parsechar();}}else{s1=peg$FAILED;}
if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c3(s1);}
s0=s1;}}}}}
return s0;}
function peg$parseargument(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===123){s1=peg$c4;peg$currPos++;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c5);}}
if(s1!==peg$FAILED){s2=peg$parse_();if(s2!==peg$FAILED){s3=peg$parseid();if(s3!==peg$FAILED){s4=peg$parse_();if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s5=peg$c6;peg$currPos++;}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c7);}}
if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c8(s3);s0=s1;}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}
return s0;}
function peg$parseselect(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9,s10,s11,s12,s13;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===123){s1=peg$c4;peg$currPos++;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c5);}}
if(s1!==peg$FAILED){s2=peg$parse_();if(s2!==peg$FAILED){s3=peg$parseid();if(s3!==peg$FAILED){s4=peg$parse_();if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s5=peg$c9;peg$currPos++;}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c10);}}
if(s5!==peg$FAILED){s6=peg$parse_();if(s6!==peg$FAILED){if(input.substr(peg$currPos,6)===peg$c11){s7=peg$c11;peg$currPos+=6;}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c12);}}
if(s7!==peg$FAILED){s8=peg$parse_();if(s8!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s9=peg$c9;peg$currPos++;}else{s9=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c10);}}
if(s9!==peg$FAILED){s10=peg$parse_();if(s10!==peg$FAILED){s11=[];s12=peg$parseselectCase();if(s12!==peg$FAILED){while(s12!==peg$FAILED){s11.push(s12);s12=peg$parseselectCase();}}else{s11=peg$FAILED;}
if(s11!==peg$FAILED){s12=peg$parse_();if(s12!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s13=peg$c6;peg$currPos++;}else{s13=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c7);}}
if(s13!==peg$FAILED){peg$savedPos=s0;s1=peg$c13(s3,s11);s0=s1;}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}
return s0;}
function peg$parseplural(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9,s10,s11,s12,s13,s14;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===123){s1=peg$c4;peg$currPos++;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c5);}}
if(s1!==peg$FAILED){s2=peg$parse_();if(s2!==peg$FAILED){s3=peg$parseid();if(s3!==peg$FAILED){s4=peg$parse_();if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s5=peg$c9;peg$currPos++;}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c10);}}
if(s5!==peg$FAILED){s6=peg$parse_();if(s6!==peg$FAILED){if(input.substr(peg$currPos,6)===peg$c14){s7=peg$c14;peg$currPos+=6;}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c15);}}
if(s7===peg$FAILED){if(input.substr(peg$currPos,13)===peg$c16){s7=peg$c16;peg$currPos+=13;}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c17);}}}
if(s7!==peg$FAILED){s8=peg$parse_();if(s8!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s9=peg$c9;peg$currPos++;}else{s9=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c10);}}
if(s9!==peg$FAILED){s10=peg$parse_();if(s10!==peg$FAILED){s11=peg$parseoffset();if(s11===peg$FAILED){s11=null;}
if(s11!==peg$FAILED){s12=[];s13=peg$parsepluralCase();if(s13!==peg$FAILED){while(s13!==peg$FAILED){s12.push(s13);s13=peg$parsepluralCase();}}else{s12=peg$FAILED;}
if(s12!==peg$FAILED){s13=peg$parse_();if(s13!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s14=peg$c6;peg$currPos++;}else{s14=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c7);}}
if(s14!==peg$FAILED){peg$savedPos=s0;s1=peg$c18(s3,s7,s11,s12);s0=s1;}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}
return s0;}
function peg$parsefunction(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9,s10;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===123){s1=peg$c4;peg$currPos++;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c5);}}
if(s1!==peg$FAILED){s2=peg$parse_();if(s2!==peg$FAILED){s3=peg$parseid();if(s3!==peg$FAILED){s4=peg$parse_();if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s5=peg$c9;peg$currPos++;}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c10);}}
if(s5!==peg$FAILED){s6=peg$parse_();if(s6!==peg$FAILED){s7=peg$parseid();if(s7!==peg$FAILED){s8=peg$parse_();if(s8!==peg$FAILED){s9=[];s10=peg$parsefunctionParams();while(s10!==peg$FAILED){s9.push(s10);s10=peg$parsefunctionParams();}
if(s9!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s10=peg$c6;peg$currPos++;}else{s10=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c7);}}
if(s10!==peg$FAILED){peg$savedPos=s0;s1=peg$c19(s3,s7,s9);s0=s1;}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}
return s0;}
function peg$parseid(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$currPos;if(peg$c20.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++;}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c21);}}
if(s2!==peg$FAILED){s3=[];if(peg$c22.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++;}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c23);}}
while(s4!==peg$FAILED){s3.push(s4);if(peg$c22.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++;}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c23);}}}
if(s3!==peg$FAILED){s2=[s2,s3];s1=s2;}else{peg$currPos=s1;s1=peg$FAILED;}}else{peg$currPos=s1;s1=peg$FAILED;}
if(s1!==peg$FAILED){s0=input.substring(s0,peg$currPos);}else{s0=s1;}
return s0;}
function peg$parseselectCase(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parse_();if(s1!==peg$FAILED){s2=peg$parseid();if(s2!==peg$FAILED){s3=peg$parse_();if(s3!==peg$FAILED){s4=peg$parsecaseTokens();if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c24(s2,s4);s0=s1;}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}
return s0;}
function peg$parsepluralCase(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parse_();if(s1!==peg$FAILED){s2=peg$parsepluralKey();if(s2!==peg$FAILED){s3=peg$parse_();if(s3!==peg$FAILED){s4=peg$parsecaseTokens();if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c24(s2,s4);s0=s1;}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}
return s0;}
function peg$parsecaseTokens(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===123){s1=peg$c4;peg$currPos++;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c5);}}
if(s1!==peg$FAILED){s2=peg$currPos;s3=peg$parse_();if(s3!==peg$FAILED){s4=peg$currPos;peg$silentFails++;if(input.charCodeAt(peg$currPos)===123){s5=peg$c4;peg$currPos++;}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c5);}}
peg$silentFails--;if(s5!==peg$FAILED){peg$currPos=s4;s4=void 0;}else{s4=peg$FAILED;}
if(s4!==peg$FAILED){s3=[s3,s4];s2=s3;}else{peg$currPos=s2;s2=peg$FAILED;}}else{peg$currPos=s2;s2=peg$FAILED;}
if(s2===peg$FAILED){s2=null;}
if(s2!==peg$FAILED){s3=[];s4=peg$parsetoken();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parsetoken();}
if(s3!==peg$FAILED){s4=peg$parse_();if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s5=peg$c6;peg$currPos++;}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c7);}}
if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c25(s3);s0=s1;}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}
return s0;}
function peg$parseoffset(){var s0,s1,s2,s3,s4,s5,s6,s7;s0=peg$currPos;s1=peg$parse_();if(s1!==peg$FAILED){if(input.substr(peg$currPos,6)===peg$c26){s2=peg$c26;peg$currPos+=6;}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c27);}}
if(s2!==peg$FAILED){s3=peg$parse_();if(s3!==peg$FAILED){if(input.charCodeAt(peg$currPos)===58){s4=peg$c28;peg$currPos++;}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c29);}}
if(s4!==peg$FAILED){s5=peg$parse_();if(s5!==peg$FAILED){s6=peg$parsedigits();if(s6!==peg$FAILED){s7=peg$parse_();if(s7!==peg$FAILED){peg$savedPos=s0;s1=peg$c30(s6);s0=s1;}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}
return s0;}
function peg$parsepluralKey(){var s0,s1,s2;s0=peg$parseid();if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===61){s1=peg$c31;peg$currPos++;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c32);}}
if(s1!==peg$FAILED){s2=peg$parsedigits();if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c30(s2);s0=s1;}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}
return s0;}
function peg$parsefunctionParams(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parse_();if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s2=peg$c9;peg$currPos++;}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c10);}}
if(s2!==peg$FAILED){s3=peg$parse_();if(s3!==peg$FAILED){s4=peg$parseid();if(s4!==peg$FAILED){s5=peg$parse_();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c33(s4);s0=s1;}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}
return s0;}
function peg$parsechar(){var s0,s1,s2,s3,s4,s5;if(peg$c34.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++;}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c35);}}
if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c36){s1=peg$c36;peg$currPos+=2;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c37);}}
if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c38();}
s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c39){s1=peg$c39;peg$currPos+=2;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c40);}}
if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c41();}
s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c42){s1=peg$c42;peg$currPos+=2;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c43);}}
if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c44();}
s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c45){s1=peg$c45;peg$currPos+=2;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c46);}}
if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c47();}
s0=s1;if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c48){s1=peg$c48;peg$currPos+=2;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c49);}}
if(s1!==peg$FAILED){s2=peg$parsehexDigit();if(s2!==peg$FAILED){s3=peg$parsehexDigit();if(s3!==peg$FAILED){s4=peg$parsehexDigit();if(s4!==peg$FAILED){s5=peg$parsehexDigit();if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c50(s2,s3,s4,s5);s0=s1;}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}else{peg$currPos=s0;s0=peg$FAILED;}}}}}}
return s0;}
function peg$parsedigits(){var s0,s1,s2;s0=peg$currPos;s1=[];if(peg$c51.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++;}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c52);}}
if(s2!==peg$FAILED){while(s2!==peg$FAILED){s1.push(s2);if(peg$c51.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++;}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c52);}}}}else{s1=peg$FAILED;}
if(s1!==peg$FAILED){s0=input.substring(s0,peg$currPos);}else{s0=s1;}
return s0;}
function peg$parsehexDigit(){var s0;if(peg$c53.test(input.charAt(peg$currPos))){s0=input.charAt(peg$currPos);peg$currPos++;}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c54);}}
return s0;}
function peg$parse_(){var s0,s1,s2;s0=peg$currPos;s1=[];if(peg$c55.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++;}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c56);}}
while(s2!==peg$FAILED){s1.push(s2);if(peg$c55.test(input.charAt(peg$currPos))){s2=input.charAt(peg$currPos);peg$currPos++;}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c56);}}}
if(s1!==peg$FAILED){s0=input.substring(s0,peg$currPos);}else{s0=s1;}
return s0;}
peg$result=peg$startRuleFunction();if(peg$result!==peg$FAILED&&peg$currPos===input.length){return peg$result;}else{if(peg$result!==peg$FAILED&&peg$currPos<input.length){peg$fail(peg$endExpectation());}
throw peg$buildStructuredError(peg$maxFailExpected,peg$maxFailPos<input.length?input.charAt(peg$maxFailPos):null,peg$maxFailPos<input.length?peg$computeLocation(peg$maxFailPos,peg$maxFailPos+1):peg$computeLocation(peg$maxFailPos,peg$maxFailPos));}}
module.exports={SyntaxError:peg$SyntaxError,parse:peg$parse};},{}],9:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error('setTimeout has not been defined');}
function defaultClearTimeout(){throw new Error('clearTimeout has not been defined');}
(function(){try{if(typeof setTimeout==='function'){cachedSetTimeout=setTimeout;}else{cachedSetTimeout=defaultSetTimout;}}catch(e){cachedSetTimeout=defaultSetTimout;}
try{if(typeof clearTimeout==='function'){cachedClearTimeout=clearTimeout;}else{cachedClearTimeout=defaultClearTimeout;}}catch(e){cachedClearTimeout=defaultClearTimeout;}}())
function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0);}
if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0);}
try{return cachedSetTimeout(fun,0);}catch(e){try{return cachedSetTimeout.call(null,fun,0);}catch(e){return cachedSetTimeout.call(this,fun,0);}}}
function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker);}
if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker);}
try{return cachedClearTimeout(marker);}catch(e){try{return cachedClearTimeout.call(null,marker);}catch(e){return cachedClearTimeout.call(this,marker);}}}
var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return;}
draining=false;if(currentQueue.length){queue=currentQueue.concat(queue);}else{queueIndex=-1;}
if(queue.length){drainQueue();}}
function drainQueue(){if(draining){return;}
var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run();}}
queueIndex=-1;len=queue.length;}
currentQueue=null;draining=false;runClearTimeout(timeout);}
process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i];}}
queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue);}};function Item(fun,array){this.fun=fun;this.array=array;}
Item.prototype.run=function(){this.fun.apply(null,this.array);};process.title='browser';process.browser=true;process.env={};process.argv=[];process.version='';process.versions={};function noop(){}
process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error('process.binding is not supported');};process.cwd=function(){return'/'};process.chdir=function(dir){throw new Error('process.chdir is not supported');};process.umask=function(){return 0;};},{}],10:[function(require,module,exports){module.exports=require('./reserved-words');},{"./reserved-words":11}],11:[function(require,module,exports){var assert=require('assert');var DIALECTS={es3:3,es5:5,es2015:6,es7:7,es6:6,'default':5,next:6};var KEYWORDS=exports.KEYWORDS={};exports.check=function check(word,dialect,strict){dialect=dialect||DIALECTS.default;var version=DIALECTS[dialect]||dialect;if(strict&&version>=5){version+='-strict';}
assert(KEYWORDS[version],'Unknown dialect');return KEYWORDS[version][word];};KEYWORDS['3']=_hash('break    else       new     var','case     finally    return  void','catch    for        switch  while','continue function   this    with','default  if         throw','delete   in         try','do       instanceof typeof','abstract enum       int        short','boolean  export     interface  static','byte     extends    long       super','char     final      native     synchronized','class    float      package    throws','const    goto       private    transient','debugger implements protected  volatile','double   import     public','null true false');KEYWORDS['5']=_hash('break    do       instanceof typeof','case     else     new        var','catch    finally  return     void','continue for      switch     while','debugger function this       with','default  if       throw','delete   in       try','class enum extends super','const export import','null true false');KEYWORDS['5-strict']=_hash(KEYWORDS['5'],'implements let     private   public yield','interface  package protected static');KEYWORDS['6']=_hash('break    do       in         typeof','case     else     instanceof var','catch    export   new        void','class    extends  return     while','const    finally  super      with','continue for      switch     yield','debugger function this','default  if       throw','delete   import   try','enum await','null true false');KEYWORDS['6-strict']=_hash(KEYWORDS['6'],'let static','implements package protected','interface private public');function _hash(){var set=Array.prototype.map.call(arguments,function(v){return typeof v==='string'?v:Object.keys(v).join(' ');}).join(' ');return set.split(/\s+/).reduce(function(res,keyword){res[keyword]=true;return res;},{});}},{"assert":4}],12:[function(require,module,exports){module.exports=function isBuffer(arg){return arg&&typeof arg==='object'&&typeof arg.copy==='function'&&typeof arg.fill==='function'&&typeof arg.readUInt8==='function';}},{}],13:[function(require,module,exports){(function(process,global){var formatRegExp=/%[sdj%]/g;exports.format=function(f){if(!isString(f)){var objects=[];for(var i=0;i<arguments.length;i++){objects.push(inspect(arguments[i]));}
return objects.join(' ');}
var i=1;var args=arguments;var len=args.length;var str=String(f).replace(formatRegExp,function(x){if(x==='%%')return'%';if(i>=len)return x;switch(x){case'%s':return String(args[i++]);case'%d':return Number(args[i++]);case'%j':try{return JSON.stringify(args[i++]);}catch(_){return'[Circular]';}
default:return x;}});for(var x=args[i];i<len;x=args[++i]){if(isNull(x)||!isObject(x)){str+=' '+x;}else{str+=' '+inspect(x);}}
return str;};exports.deprecate=function(fn,msg){if(isUndefined(global.process)){return function(){return exports.deprecate(fn,msg).apply(this,arguments);};}
if(process.noDeprecation===true){return fn;}
var warned=false;function deprecated(){if(!warned){if(process.throwDeprecation){throw new Error(msg);}else if(process.traceDeprecation){console.trace(msg);}else{console.error(msg);}
warned=true;}
return fn.apply(this,arguments);}
return deprecated;};var debugs={};var debugEnviron;exports.debuglog=function(set){if(isUndefined(debugEnviron))
debugEnviron=process.env.NODE_DEBUG||'';set=set.toUpperCase();if(!debugs[set]){if(new RegExp('\\b'+set+'\\b','i').test(debugEnviron)){var pid=process.pid;debugs[set]=function(){var msg=exports.format.apply(exports,arguments);console.error('%s %d: %s',set,pid,msg);};}else{debugs[set]=function(){};}}
return debugs[set];};function inspect(obj,opts){var ctx={seen:[],stylize:stylizeNoColor};if(arguments.length>=3)ctx.depth=arguments[2];if(arguments.length>=4)ctx.colors=arguments[3];if(isBoolean(opts)){ctx.showHidden=opts;}else if(opts){exports._extend(ctx,opts);}
if(isUndefined(ctx.showHidden))ctx.showHidden=false;if(isUndefined(ctx.depth))ctx.depth=2;if(isUndefined(ctx.colors))ctx.colors=false;if(isUndefined(ctx.customInspect))ctx.customInspect=true;if(ctx.colors)ctx.stylize=stylizeWithColor;return formatValue(ctx,obj,ctx.depth);}
exports.inspect=inspect;inspect.colors={'bold':[1,22],'italic':[3,23],'underline':[4,24],'inverse':[7,27],'white':[37,39],'grey':[90,39],'black':[30,39],'blue':[34,39],'cyan':[36,39],'green':[32,39],'magenta':[35,39],'red':[31,39],'yellow':[33,39]};inspect.styles={'special':'cyan','number':'yellow','boolean':'yellow','undefined':'grey','null':'bold','string':'green','date':'magenta','regexp':'red'};function stylizeWithColor(str,styleType){var style=inspect.styles[styleType];if(style){return'\u001b['+inspect.colors[style][0]+'m'+str+'\u001b['+inspect.colors[style][1]+'m';}else{return str;}}
function stylizeNoColor(str,styleType){return str;}
function arrayToHash(array){var hash={};array.forEach(function(val,idx){hash[val]=true;});return hash;}
function formatValue(ctx,value,recurseTimes){if(ctx.customInspect&&value&&isFunction(value.inspect)&&value.inspect!==exports.inspect&&!(value.constructor&&value.constructor.prototype===value)){var ret=value.inspect(recurseTimes,ctx);if(!isString(ret)){ret=formatValue(ctx,ret,recurseTimes);}
return ret;}
var primitive=formatPrimitive(ctx,value);if(primitive){return primitive;}
var keys=Object.keys(value);var visibleKeys=arrayToHash(keys);if(ctx.showHidden){keys=Object.getOwnPropertyNames(value);}
if(isError(value)&&(keys.indexOf('message')>=0||keys.indexOf('description')>=0)){return formatError(value);}
if(keys.length===0){if(isFunction(value)){var name=value.name?': '+value.name:'';return ctx.stylize('[Function'+name+']','special');}
if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),'regexp');}
if(isDate(value)){return ctx.stylize(Date.prototype.toString.call(value),'date');}
if(isError(value)){return formatError(value);}}
var base='',array=false,braces=['{','}'];if(isArray(value)){array=true;braces=['[',']'];}
if(isFunction(value)){var n=value.name?': '+value.name:'';base=' [Function'+n+']';}
if(isRegExp(value)){base=' '+RegExp.prototype.toString.call(value);}
if(isDate(value)){base=' '+Date.prototype.toUTCString.call(value);}
if(isError(value)){base=' '+formatError(value);}
if(keys.length===0&&(!array||value.length==0)){return braces[0]+base+braces[1];}
if(recurseTimes<0){if(isRegExp(value)){return ctx.stylize(RegExp.prototype.toString.call(value),'regexp');}else{return ctx.stylize('[Object]','special');}}
ctx.seen.push(value);var output;if(array){output=formatArray(ctx,value,recurseTimes,visibleKeys,keys);}else{output=keys.map(function(key){return formatProperty(ctx,value,recurseTimes,visibleKeys,key,array);});}
ctx.seen.pop();return reduceToSingleString(output,base,braces);}
function formatPrimitive(ctx,value){if(isUndefined(value))
return ctx.stylize('undefined','undefined');if(isString(value)){var simple='\''+JSON.stringify(value).replace(/^"|"$/g,'').replace(/'/g,"\\'").replace(/\\"/g,'"')+'\'';return ctx.stylize(simple,'string');}
if(isNumber(value))
return ctx.stylize(''+value,'number');if(isBoolean(value))
return ctx.stylize(''+value,'boolean');if(isNull(value))
return ctx.stylize('null','null');}
function formatError(value){return'['+Error.prototype.toString.call(value)+']';}
function formatArray(ctx,value,recurseTimes,visibleKeys,keys){var output=[];for(var i=0,l=value.length;i<l;++i){if(hasOwnProperty(value,String(i))){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,String(i),true));}else{output.push('');}}
keys.forEach(function(key){if(!key.match(/^\d+$/)){output.push(formatProperty(ctx,value,recurseTimes,visibleKeys,key,true));}});return output;}
function formatProperty(ctx,value,recurseTimes,visibleKeys,key,array){var name,str,desc;desc=Object.getOwnPropertyDescriptor(value,key)||{value:value[key]};if(desc.get){if(desc.set){str=ctx.stylize('[Getter/Setter]','special');}else{str=ctx.stylize('[Getter]','special');}}else{if(desc.set){str=ctx.stylize('[Setter]','special');}}
if(!hasOwnProperty(visibleKeys,key)){name='['+key+']';}
if(!str){if(ctx.seen.indexOf(desc.value)<0){if(isNull(recurseTimes)){str=formatValue(ctx,desc.value,null);}else{str=formatValue(ctx,desc.value,recurseTimes-1);}
if(str.indexOf('\n')>-1){if(array){str=str.split('\n').map(function(line){return'  '+line;}).join('\n').substr(2);}else{str='\n'+str.split('\n').map(function(line){return'   '+line;}).join('\n');}}}else{str=ctx.stylize('[Circular]','special');}}
if(isUndefined(name)){if(array&&key.match(/^\d+$/)){return str;}
name=JSON.stringify(''+key);if(name.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)){name=name.substr(1,name.length-2);name=ctx.stylize(name,'name');}else{name=name.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'");name=ctx.stylize(name,'string');}}
return name+': '+str;}
function reduceToSingleString(output,base,braces){var numLinesEst=0;var length=output.reduce(function(prev,cur){numLinesEst++;if(cur.indexOf('\n')>=0)numLinesEst++;return prev+cur.replace(/\u001b\[\d\d?m/g,'').length+1;},0);if(length>60){return braces[0]+
(base===''?'':base+'\n ')+' '+
output.join(',\n  ')+' '+
braces[1];}
return braces[0]+base+' '+output.join(', ')+' '+braces[1];}
function isArray(ar){return Array.isArray(ar);}
exports.isArray=isArray;function isBoolean(arg){return typeof arg==='boolean';}
exports.isBoolean=isBoolean;function isNull(arg){return arg===null;}
exports.isNull=isNull;function isNullOrUndefined(arg){return arg==null;}
exports.isNullOrUndefined=isNullOrUndefined;function isNumber(arg){return typeof arg==='number';}
exports.isNumber=isNumber;function isString(arg){return typeof arg==='string';}
exports.isString=isString;function isSymbol(arg){return typeof arg==='symbol';}
exports.isSymbol=isSymbol;function isUndefined(arg){return arg===void 0;}
exports.isUndefined=isUndefined;function isRegExp(re){return isObject(re)&&objectToString(re)==='[object RegExp]';}
exports.isRegExp=isRegExp;function isObject(arg){return typeof arg==='object'&&arg!==null;}
exports.isObject=isObject;function isDate(d){return isObject(d)&&objectToString(d)==='[object Date]';}
exports.isDate=isDate;function isError(e){return isObject(e)&&(objectToString(e)==='[object Error]'||e instanceof Error);}
exports.isError=isError;function isFunction(arg){return typeof arg==='function';}
exports.isFunction=isFunction;function isPrimitive(arg){return arg===null||typeof arg==='boolean'||typeof arg==='number'||typeof arg==='string'||typeof arg==='symbol'||typeof arg==='undefined';}
exports.isPrimitive=isPrimitive;exports.isBuffer=require('./support/isBuffer');function objectToString(o){return Object.prototype.toString.call(o);}
function pad(n){return n<10?'0'+n.toString(10):n.toString(10);}
var months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];function timestamp(){var d=new Date();var time=[pad(d.getHours()),pad(d.getMinutes()),pad(d.getSeconds())].join(':');return[d.getDate(),months[d.getMonth()],time].join(' ');}
exports.log=function(){console.log('%s - %s',timestamp(),exports.format.apply(exports,arguments));};exports.inherits=require('inherits');exports._extend=function(origin,add){if(!add||!isObject(add))return origin;var keys=Object.keys(add);var i=keys.length;while(i--){origin[keys[i]]=add[keys[i]];}
return origin;};function hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop);}}).call(this,require('_process'),typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./support/isBuffer":12,"_process":9,"inherits":5}]},{},[2])(2)});

!function(t,e){"function"==typeof define&&define.amd?define(["messageformat"],function(t){return e(t)}):"object"==typeof module&&module.exports?module.exports=e(require("messageformat")):e(t.MessageFormat)}(this,function(r){function i(u,t,e,n){"use strict";var a={},c=t.get(e),f=new r("en");return angular.isFunction(n)&&n(f),c||(c=t(e)),c.put("en",f),a.setLocale=function(t){(f=c.get(t))||(f=new r(t),angular.isFunction(n)&&n(f),c.put(t,f))},a.getInterpolationIdentifier=function(){return"messageformat"},a.useSanitizeValueStrategy=function(t){return u.useStrategy(t),this},a.interpolate=function(t,e,n,a){e=e||{},e=u.sanitize(e,"params",a);var r=c.get("mf:"+t);if(!r){for(var i in e)if(e.hasOwnProperty(i)){var o=parseInt(e[i],10);angular.isNumber(o)&&""+o===e[i]&&(e[i]=o)}r=f.compile(t),c.put("mf:"+t,r)}var s=r(e);return u.sanitize(s,"text",a)},a}return angular.module("pascalprecht.translate").constant("TRANSLATE_MF_INTERPOLATION_CACHE","$translateMessageFormatInterpolation").provider("$translateMessageFormatInterpolation",function(){"use strict";var a;this.messageFormatConfigurer=function(t){a=t},this.$get=["$translateSanitization","$cacheFactory","TRANSLATE_MF_INTERPOLATION_CACHE",function(t,e,n){return i(t,e,n,a)}]}),i.displayName="$translateMessageFormatInterpolation","pascalprecht.translate"});
;(function(angular){'use strict';angular.module('li.services.plugins.localization-manager',['li.services.rest.rest-manager','li.services.community.context-manager','li.services.cache.localstorage-cache-manager','pascalprecht.translate']).config(['$translateProvider',function($translateProvider){$translateProvider.useLoader('$liLocalizationManager',{});$translateProvider.preferredLanguage('en');$translateProvider.addInterpolation('$translateMessageFormatInterpolation');$translateProvider.useSanitizeValueStrategy(null);}]).factory('$liLocalizationManager',['$liRestManager','$log','$q','$rootScope','$liContextManager','$timeout','$translate','$liLocalstorageCacheManager',function($liRestManager,$log,$q,$rootScope,$liContextManager,$timeout,$translate,$liLocalstorageCacheManager){var textdata={li:{}};var groups={};var nodeId=$liContextManager.coreNode().id;var nodeType=$liContextManager.coreNode().type;var promises=[];var groupsLoaded=[];var groupLoadedCbs={};var cache=false;if($liContextManager.config().phase==='prod'){var cachekey='$liLocalizationManager'+'::revision::'+$liContextManager.config()['app.revision']+'::lang::'+$liContextManager.currentUserSettings()['profile.language'];cache=$liLocalstorageCacheManager(cachekey,{capacity:30});}
function getGroup(group){if(!textdata.li.hasOwnProperty(group)){textdata.li[group]={};var params={group:'ng-'+group};if(nodeId&&nodeType&&nodeType!=='community'){params[nodeType+'.id']=nodeId;}
return $liRestManager.request('/ui/lang/:group',params,{},'GET',cache).then(function(response){if(response.data&&response.data.li){angular.extend(textdata.li[group],response.data.li[group]);groupsLoaded.push(group);if(groupLoadedCbs[group]){angular.forEach(groupLoadedCbs[group],function(cb){cb();});}}else{$log.error('Error loading text keys data for group: ['+group+']',response);}}).catch(function(){$log.error('Error while getting text keys data for group: '+group);});}else{return $q.when();}}
function service(){angular.forEach(groups,function(val,group){if(!groups[group]){groups[group]=getGroup(group);}
promises.push(groups[group]);});if(promises.length>0){return $q.all(promises).then(function(){return textdata;});}else{return $q.when(textdata);}}
function addPart(group){if(!groups.hasOwnProperty(group)){groups[group]=false;$translate.refresh();}}
function loaded(checkGroups){var isLoaded=true;angular.forEach(checkGroups,function(checkGroup){if(groupsLoaded.indexOf(checkGroup)===-1){isLoaded=false;}});return isLoaded;}
function onLoad(loadGroups,cb){loadGroups=angular.isArray(loadGroups)?loadGroups:[loadGroups];angular.forEach(loadGroups,function(loadGroup){if(groupsLoaded.indexOf(loadGroup)===-1){groupLoadedCbs[loadGroup]=groupLoadedCbs[loadGroup]||[];groupLoadedCbs[loadGroup].push(cb);}else{cb();}});}
function loadGroupFromKey(key){var group;if(key&&key.length>0){var parts=key.split('.');if(parts.length>1&&parts[0]==='li'){group=parts[1];addPart(group);}}
return group;}
function translate(translationId,interpolateParams,interpolation){var defer=$q.defer();onLoad(loadGroupFromKey(translationId),function(){$timeout(function(){$translate(translationId,interpolateParams,interpolation).then(defer.resolve);});});return defer.promise;}
service.addPart=addPart;service.loaded=loaded;service.onLoad=onLoad;service.loadGroupFromKey=loadGroupFromKey;service.translate=translate;return service;}]).filter('translate',['$parse','$translate','$liLocalizationManager','$liContextManager',function($parse,$translate,$liLocalizationManager,$liContextManager){function translateFilter(translationId,interpolateParams,interpolation){var showTextKeys=$liContextManager.server().show_text_keys;$liLocalizationManager.loadGroupFromKey(translationId);if(!angular.isObject(interpolateParams)){interpolateParams=$parse(interpolateParams)();}
return showTextKeys===true?translationId:$translate.instant(translationId,interpolateParams,interpolation);}
translateFilter.$stateful=true;return translateFilter;}]);})(window.LITHIUM&&LITHIUM.angular||angular);

(function(I,b){'use strict';function z(b,h){var d=[],c=b.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[?*])?/g,function(b,c,h,k){b="?"===k||"*?"===k;k="*"===k||"*?"===k;d.push({name:h,optional:b});c=c||"";return(b?"(?:"+c:c+"(?:")+(k?"(.+?)":"([^/]+)")+(b?"?)?":")")}).replace(/([/$*])/g,"\\$1");h.ignoreTrailingSlashes&&(c=c.replace(/\/+$/,"")+"/*");return{keys:d,regexp:new RegExp("^"+c+"(?:[?#]|$)",h.caseInsensitiveMatch?"i":"")}}function A(b){p&&b.get("$route")}function v(u,h,d){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(c,f,g,l,k){function q(){r&&(d.cancel(r),r=null);m&&(m.$destroy(),m=null);s&&(r=d.leave(s),r.done(function(b){!1!==b&&(r=null)}),s=null)}function C(){var g=u.current&&u.current.locals;if(b.isDefined(g&&g.$template)){var g=c.$new(),l=u.current;s=k(g,function(g){d.enter(g,null,s||f).done(function(d){!1===d||!b.isDefined(w)||w&&!c.$eval(w)||h()});q()});m=l.scope=g;m.$emit("$viewContentLoaded");m.$eval(p)}else q()}var m,s,r,w=g.autoscroll,p=g.onload||"";c.$on("$routeChangeSuccess",C);C()}}}function x(b,h,d){return{restrict:"ECA",priority:-400,link:function(c,f){var g=d.current,l=g.locals;f.html(l.$template);var k=b(f.contents());if(g.controller){l.$scope=c;var q=h(g.controller,l);g.controllerAs&&(c[g.controllerAs]=q);f.data("$ngControllerController",q);f.children().data("$ngControllerController",q)}c[g.resolveAs||"$resolve"]=l;k(c)}}}var D,E,F,G,y=b.module("ngRoute",[]).info({angularVersion:"1.8.2"}).provider("$route",function(){function u(d,c){return b.extend(Object.create(d),c)}D=b.isArray;E=b.isObject;F=b.isDefined;G=b.noop;var h={};this.when=function(d,c){var f;f=void 0;if(D(c)){f=f||[];for(var g=0,l=c.length;g<l;g++)f[g]=c[g]}else if(E(c))for(g in f=f||{},c)if("$"!==g.charAt(0)||"$"!==g.charAt(1))f[g]=c[g];f=f||c;b.isUndefined(f.reloadOnUrl)&&(f.reloadOnUrl=!0);b.isUndefined(f.reloadOnSearch)&&(f.reloadOnSearch=!0);b.isUndefined(f.caseInsensitiveMatch)&&(f.caseInsensitiveMatch=this.caseInsensitiveMatch);h[d]=b.extend(f,{originalPath:d},d&&z(d,f));d&&(g="/"===d[d.length-1]?d.substr(0,d.length-1):d+"/",h[g]=b.extend({originalPath:d,redirectTo:d},z(g,f)));return this};this.caseInsensitiveMatch=!1;this.otherwise=function(b){"string"===typeof b&&(b={redirectTo:b});this.when(null,b);return this};p=!0;this.eagerInstantiationEnabled=function(b){return F(b)?(p=b,this):p};this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce","$browser",function(d,c,f,g,l,k,q,p){function m(a){var e=t.current;n=A();(x=!B&&n&&e&&n.$$route===e.$$route&&(!n.reloadOnUrl||!n.reloadOnSearch&&b.equals(n.pathParams,e.pathParams)))||!e&&!n||d.$broadcast("$routeChangeStart",n,e).defaultPrevented&&a&&a.preventDefault()}function s(){var a=t.current,e=n;if(x)a.params=e.params,b.copy(a.params,f),d.$broadcast("$routeUpdate",a);else if(e||a){B=!1;t.current=e;var c=g.resolve(e);p.$$incOutstandingRequestCount("$route");c.then(r).then(w).then(function(g){return g&&c.then(y).then(function(c){e===t.current&&(e&&(e.locals=c,b.copy(e.params,f)),d.$broadcast("$routeChangeSuccess",e,a))})}).catch(function(b){e===t.current&&d.$broadcast("$routeChangeError",e,a,b)}).finally(function(){p.$$completeOutstandingRequest(G,"$route")})}}function r(a){var e={route:a,hasRedirection:!1};if(a)if(a.redirectTo)if(b.isString(a.redirectTo))e.path=v(a.redirectTo,a.params),e.search=a.params,e.hasRedirection=!0;else{var d=c.path(),f=c.search();a=a.redirectTo(a.pathParams,d,f);b.isDefined(a)&&(e.url=a,e.hasRedirection=!0)}else if(a.resolveRedirectTo)return g.resolve(l.invoke(a.resolveRedirectTo)).then(function(a){b.isDefined(a)&&(e.url=a,e.hasRedirection=!0);return e});return e}function w(a){var b=!0;if(a.route!==t.current)b=!1;else if(a.hasRedirection){var g=c.url(),d=a.url;d?c.url(d).replace():d=c.path(a.path).search(a.search).replace().url();d!==g&&(b=!1)}return b}function y(a){if(a){var e=b.extend({},a.resolve);b.forEach(e,function(a,c){e[c]=b.isString(a)?l.get(a):l.invoke(a,null,null,c)});a=z(a);b.isDefined(a)&&(e.$template=a);return g.all(e)}}function z(a){var e,c;b.isDefined(e=a.template)?b.isFunction(e)&&(e=e(a.params)):b.isDefined(c=a.templateUrl)&&(b.isFunction(c)&&(c=c(a.params)),b.isDefined(c)&&(a.loadedTemplateUrl=q.valueOf(c),e=k(c)));return e}function A(){var a,e;b.forEach(h,function(d,g){var f;if(f=!e){var h=c.path();f=d.keys;var l={};if(d.regexp)if(h=d.regexp.exec(h)){for(var k=1,p=h.length;k<p;++k){var m=f[k-1],n=h[k];m&&n&&(l[m.name]=n)}f=l}else f=null;else f=null;f=a=f}f&&(e=u(d,{params:b.extend({},c.search(),a),pathParams:a}),e.$$route=d)});return e||h[null]&&u(h[null],{params:{},pathParams:{}})}function v(a,c){var d=[];b.forEach((a||"").split(":"),function(a,b){if(0===b)d.push(a);else{var f=a.match(/(\w+)(?:[?*])?(.*)/),g=f[1];d.push(c[g]);d.push(f[2]||"");delete c[g]}});return d.join("")}var B=!1,n,x,t={routes:h,reload:function(){B=!0;var a={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0;B=!1}};d.$evalAsync(function(){m(a);a.defaultPrevented||s()})},updateParams:function(a){if(this.current&&this.current.$$route)a=b.extend({},this.current.params,a),c.path(v(this.current.$$route.originalPath,a)),c.search(a);else throw H("norout");}};d.$on("$locationChangeStart",m);d.$on("$locationChangeSuccess",s);return t}]}).run(A),H=b.$$minErr("ngRoute"),p;A.$inject=["$injector"];y.provider("$routeParams",function(){this.$get=function(){return{}}});y.directive("ngView",v);y.directive("ngView",x);v.$inject=["$route","$anchorScroll","$animate"];x.$inject=["$compile","$controller","$route"]})(window,window.angular);
;(function(angular){'use strict';angular.module('li.services.utils.url-manager',['li.services.community.context-manager','ngRoute']).constant('$liUrlManagerConfig',{ImageServerPage:{path:{required:['image-id'],optional:['image-size','crop-image','image-dimensions']},tpl:'{{tapestryContext}}/image/serverpage'},GalleryPage:{path:{optional:['user-id','tab']},tpl:'{{tapestryContext}}/media/gallerypage'},KudosMessagePage:{path:{optional:['image-id','message-uid','tab']},tpl:'{{tapestryContext}}/kudos/messagepage'},NotificationFeedPage:{tpl:'{{tapestryContext}}/notificationfeed/page'},PrivateNotesPage:{tpl:'{{tapestryContext}}/notes/privatenotespage'},RatingDetailPage:{path:{required:['message-uid','rating-system']},tpl:'{{tapestryContext}}/ratings/ratingdetailpage'},RecentPostsPage:{path:{optional:['post-type','user-id']},tpl:'{{tapestryContext}}/forums/recentpostspage'},MyProfilePage:{path:{optional:['tab']},tpl:'{{tapestryContext}}/user/myprofilepage'},ProfilePlusPage:{tpl:'{{tapestryContext}}/user/myprofilepage/tab/personal-profile:profile-plus'},Params:{LABEL_NAME:'label-name',PRODUCT_ID:'product-id',SORT_STRING:'sort-string',TAB:'tab'},SearchPage:{path:{required:['tab']},query:{optional:['filter','location','q','include_ideas','f']},tpl:'{{tapestryContext}}/forums/searchpage'},RegistrationPage:{tpl:'{{tapestryContext}}/user/userregistrationpage'},VerifyEmailPage:{tpl:'{{tapestryContext}}/user/myprofilepage/tab/personal-profile:email'}}).factory('$liUrlManager',['$location','$window','$liUrlManagerConfig','$log','$interpolate','$liContextManager',function($location,$window,$liUrlManagerConfig,$log,$interpolate,$liContextManager){var pathEscapeCharacter=null;var seoEscapePattern=null;if($liContextManager!==undefined&&$liContextManager.seo!==undefined){var seo=$liContextManager.seo();if(seo){var markerEscaping=seo.markerEscaping;if(markerEscaping&&markerEscaping.enabled){var pathElementConfig=markerEscaping.pathElement;if(pathElementConfig){pathEscapeCharacter=pathElementConfig.prefix;if(pathEscapeCharacter!==undefined&&pathEscapeCharacter!==null&&pathEscapeCharacter.length>0){seoEscapePattern=new RegExp(pathElementConfig.match);}}}}}
function escapeForSeoMarkerCollisionAvoidance(pathElement){if(pathEscapeCharacter!==null&&seoEscapePattern!==null&&pathElement!==undefined&&pathElement!==null){var pathElementToCheck=pathElement+'';if(pathElementToCheck.match(seoEscapePattern)){return pathEscapeCharacter+pathElement;}}
return pathElement;}
return{forceRedirect:function forceRedirect(url,$routeParams,params){var query=[];for(var key in params){if($routeParams[key]){if($routeParams[key]!==params[key]){url=url.replace(key+'='+$routeParams[key],key+'='+encodeURIComponent(params[key]));}}else{query.push(key+'='+encodeURIComponent(params[key]));}}
if(query.length>0){if(url.indexOf('?')>0){url=url+'&'+query.join('&');}else{url=url+'?'+query.join('&');}}
$window.location=url;},getHostName:function getHostName(url){var link=document.createElement('a');link.setAttribute('href',url);return link.hostname;},getPath:function getPath(url){var link=document.createElement('a');link.setAttribute('href',url);return link.pathname;},buildUrl:function buildUrl(key,params){var def=$liUrlManagerConfig[key];var pathItems=[];var queryItems=[];var hasError=false;function add(items,keys,params,required){if(keys){for(var i=0;i<keys.length;i++){var key=keys[i];if(required&&!params.hasOwnProperty(key)){hasError=true;$log.error('Required value [%s] was not specified',key,params);}else if(params.hasOwnProperty(key)){items.push({key:key,value:params[key]});}}}}
if(def&&def.tpl){var url;var path;var query;var queryPairs;var fragment;params=params||{};params.tapestryContext=$liContextManager.server().tapestry_prefix;if(def.path){add(pathItems,def.path.required,params,true);add(pathItems,def.path.optional,params,false);}
if(def.query){add(queryItems,def.query.required,params,true);add(queryItems,def.query.optional,params,false);}
fragment=params.fragment?'#'+params.fragment:'';if(hasError){return null;}
url=$interpolate($liUrlManagerConfig[key].tpl)(params);path=url.split('?')[0]||'';query=url.split('?')[1]||'';queryPairs=query?query.split('&'):[];angular.forEach(pathItems,function(pathItem){path+='/'+pathItem.key+'/'+escapeForSeoMarkerCollisionAvoidance(pathItem.value);});angular.forEach(queryItems,function(queryItem){queryPairs.push(queryItem.key+'='+$window.encodeURIComponent(queryItem.value));});query=queryPairs.length>0?'?'+queryPairs.join('&'):'';return path+query+fragment;}else{$log.error('No URL exists for %s',key);}
return null;},adjustUrl:function adjustUrl(url){var path=url.split('?')[0]||url;var query=url.split('?')[1]||'';var queryPairs=query?query.split('&'):[];var fragment='';var urlAdjuster={addPathParam:function addPathParam(pathKey,pathValue){this.removePathParam(pathKey);path+='/'+pathKey+'/'+escapeForSeoMarkerCollisionAvoidance(pathValue);return urlAdjuster;},removePathParam:function removePathParam(pathKey){var prefixPath;var postfixPath;var pathValueEndIndex;var pathItems=path.split('/'+pathKey+'/');if(pathItems.length===1){return urlAdjuster;}
if(pathItems.length!==2){throw'Either the url has more than one path key that was specified or the path key specified is not '+'present. url: '+url+'pathkey: '+pathKey;}
prefixPath=pathItems[0];pathValueEndIndex=pathItems[1].indexOf('/');if(pathValueEndIndex===-1){pathValueEndIndex=pathItems[1].indexOf('?');}
if(pathValueEndIndex===-1){path=prefixPath;}else{postfixPath=pathItems[1].substr(pathValueEndIndex+1);path=prefixPath+'/'+postfixPath;}
return urlAdjuster;},addQueryParam:function addQueryParam(key,value){this.removeQueryParam(key);queryPairs.push(key+'='+$window.encodeURIComponent(value));return urlAdjuster;},removeQueryParam:function removeQueryParam(key){queryPairs=queryPairs.filter(function(value){return value.indexOf(key)!==0;});return urlAdjuster;},compileQueryParams:function compileQueryParams(params){var compiledPairs=[];angular.forEach(queryPairs,function(val){var parts=val.split('=');if(parts.length===2){var queryVal=$window.decodeURIComponent(parts[1]);var compiled=$interpolate(queryVal)(params);compiledPairs.push(parts[0]+'='+$window.encodeURIComponent(compiled));}});queryPairs=compiledPairs;return urlAdjuster;},addFragment:function addFragment(val){fragment=val?'#'+val:'';return urlAdjuster;},build:function build(){query=queryPairs.length>0?'?'+queryPairs.join('&'):'';return path+query+fragment;}};return urlAdjuster;},getPathParameter:function getPathParameter(param,url){var path=url?this.getPath(url):$window.location.pathname;var pathParts=path.split('/');var idx=pathParts.indexOf(param);if(idx>-1&&pathParts.length-1>idx){return decodeURI(pathParts[idx+1]);}else{return null;}},validUrl:function validUrl(url){var urlExp=new RegExp('(http|https)://[\\w-]+(\\.[\\w-]+)+([\\w-.,@?^=%&:/~+#-]*[\\w@?^=%&;/~+#-])?');return url.match(urlExp)!==null;},getImageExtension:function getImageExtension(url){var pathIndex,extensionIndex,protocolIndex;if(url.indexOf('http://')!==-1){protocolIndex=url.indexOf('http://');url=url.substring(protocolIndex+8);}else if(url.indexOf('https://')!==-1){protocolIndex=url.indexOf('http://');url=url.substring(protocolIndex+9);}
pathIndex=url.lastIndexOf('/');extensionIndex=url.lastIndexOf('.');if(pathIndex===-1||pathIndex>extensionIndex){return'';}else{return url.substring(extensionIndex+1);}},getImageFileName:function getImageFileName(url){if(this.validUrl(url)&&this.getImageExtension(url)){var pathIndex=url.lastIndexOf('/');var extensionIndex=url.lastIndexOf('.');return url.substring(pathIndex+1,extensionIndex);}else{return'';}},redirect:function redirect(url){$window.location.href=url;},getCurrentUrl:function getCurrentUrl(){return $location.absUrl();}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.directives.common.auto-focus',[]).constant('liCommonAutoFocusConfig',{events:{onFocus:'LITHIUM:auto-focus:focus'}}).directive('liCommonAutoFocus',['$timeout','liCommonAutoFocusConfig',function($timeout,liCommonAutoFocusConfig){return{restrict:'A',scope:{liAutoFocusOn:'='},link:function link($scope,$element){$timeout(function(){$element[0].focus();},10);$scope.$on(liCommonAutoFocusConfig.events.onFocus,function(){$timeout(function(){$element[0].focus();},10);});}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.directives.common.text-ready',['li.services.plugins.localization-manager']).directive('liCommonTextReady',['$liLocalizationManager','$timeout',function($liLocalizationManager,$timeout){return{restrict:'A',link:function link($scope,$element,$attrs){var checkGroups=$scope.$eval($attrs.liCommonTextReady);checkGroups=angular.isArray(checkGroups)?checkGroups:[checkGroups];$element.addClass('lia-not-ready');$liLocalizationManager.onLoad(checkGroups,function check(){$element.toggleClass('lia-not-ready',!$liLocalizationManager.loaded(checkGroups));});$timeout(function(){angular.forEach(checkGroups,function(group){$liLocalizationManager.addPart(group);});});}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.directives.community.navigation-leaf-group',['li.services.utils.url-manager','li.directives.common.text-ready','li.directives.common.slide-menu']).directive('liCommunityNavigationLeafGroup',['$liUrlManager','$location','liSlideMenuConfig',function($liUrlManager,$location,liSlideMenuConfig){return{restrict:'AE',templateUrl:'community/navigation-leaf-group/navigation-leaf-group.tpl.html',scope:{liNodes:'=liNodes'},link:function link($scope){$scope.goToPage=function(url){if($location.path()!==$liUrlManager.getPath(url)){$scope.$emit(liSlideMenuConfig.events.toggleMenu);$liUrlManager.forceRedirect(url);}};}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.directives.community.navigation',['li.services.community.navigation-manager','li.services.community.context-manager','li.services.plugins.localization-manager','li.services.utils.url-manager','li.directives.common.auto-focus','li.directives.common.slide-menu','li.directives.common.text-ready','li.directives.community.navigation-leaf-group']).directive('liCommunityNavigation',['$timeout','$liNavigationManager','$liContextManager','$liUrlManager','$location','liSlideMenuConfig',function($timeout,$liNavigationManager,$liContextManager,$liUrlManager,$location,liSlideMenuConfig){return{restrict:'AE',templateUrl:'community/navigation/navigation.tpl.html',link:function link($scope,$element){var parentElements=null;function selectNode(nodeId){$scope.selectedNodeId=nodeId;$scope.$emit(liSlideMenuConfig.events.scrollTop);}
$scope.exitedLeft=[];$liNavigationManager.getStructure().then(function(response){$scope.community=response;$scope.selectedNodeId=$liNavigationManager.getRootLevelNodeId();});$scope.hasExited=function(nodeId){return $scope.exitedLeft.indexOf(nodeId)>=0;};$scope.showNode=function(nodeId){return nodeId===$scope.selectedNodeId||nodeId===$scope.visibleChildNodeId||$scope.hasExited(nodeId)||nodeId===$scope.enteringLeftNodeId;};$scope.navHistory=[];$scope.setCurrent=function(nodeId,back,$event){if(back){var elementToFocus=void 0;if($scope.navHistory.length){$scope.navHistory[$scope.navHistory.length-1].focus();elementToFocus=$scope.navHistory.pop();}
$scope.enteringLeftNodeId=nodeId;$timeout(function(){$scope.enteringLeftNodeId='';$scope.exitedLeft.pop();selectNode(nodeId);if(elementToFocus){elementToFocus.focus();}},260);}else{$scope.navHistory.push($event.currentTarget);$scope.exitedLeft.push($scope.selectedNodeId);$scope.visibleChildNodeId=nodeId;$timeout(function(){selectNode($scope.visibleChildNodeId);$scope.visibleChildNodeId='';},260);}
disableHiddenLists();if($event){$event.preventDefault();}};function disableHiddenLists(){$timeout(function(){[].forEach.call($element[0].childNodes,function(element){if(element.classList){if(element.classList.contains('lia-nav-selected')){element.removeAttribute('aria-hidden');}else{element.setAttribute('aria-hidden',true);}}});},400);}
$scope.isEmpty=function(categoryId){var cat;var empty=false;angular.forEach($scope.community,function(node){if(node.id===categoryId){cat=node;}});if(cat.hasOwnProperty('boards')===false&&cat.hasOwnProperty('descendant_categories')===false&&cat.hasOwnProperty('grouphubs')===false){empty=true;}
return empty;};$scope.goToPage=function(url){if($location.path()!==$liUrlManager.getPath(url)){$scope.toggleMenu();$liUrlManager.forceRedirect(url);}};function getElementParents(){if(parentElements===null){parentElements=[];var element=$element[0];if(element){while(element.parentNode){parentElements.push(element);element=element.parentNode;}}}
return parentElements;}
var allQueryElements=document.body.querySelectorAll('*');$scope.$on(liSlideMenuConfig.events.onToggle,function(event,state){if(state){[].forEach.call(allQueryElements,function(element){if(!$element[0].contains(element)&&getElementParents().indexOf(element)===-1){var existingAriaHidden=element.getAttribute('aria-hidden');element.setAttribute('data-lia-previous-aria-hidden',existingAriaHidden!==null?existingAriaHidden:'null');element.setAttribute('aria-hidden',true);}});}else{var allElementsWithPreviousAriaHidden=document.body.querySelectorAll('*[data-lia-previous-aria-hidden]');[].forEach.call(allElementsWithPreviousAriaHidden,function(element){var previousAriaHidden=element.getAttribute('data-lia-previous-aria-hidden');if(previousAriaHidden==='null'){element.removeAttribute('aria-hidden');}else{element.setAttribute('aria-hidden',previousAriaHidden);}
element.removeAttribute('data-lia-previous-aria-hidden');});}});$scope.toggleMenu=function(){$scope.$emit(liSlideMenuConfig.events.toggleMenu);};}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.services.rest.liql',['li.services.rest.rest-manager']).factory('$liql',['$log','$liRestManager','$window',function($log,$liRestManager,$window){var OPERAND_SYMBOL_MAP={eq:'=',neq:'!=',gt:'>',lt:'<',gte:'>=',lte:'<=',in:'IN',matches:'MATCHES'};function liqlBuilder(){var chain;var selectParam;var fromParam;var whereParam;var orderByParam;var limitParam;var offsetParam;var expandParam;function select(param){selectParam=angular.isArray(param)?param:[param];return chain;}
function from(param){fromParam=param;return chain;}
function where(param){whereParam=whereBuilder(chain,param,[]);return whereParam;}
function orderBy(param){orderByParam=orderByBuilder(chain,param,[]);return orderByParam;}
function limit(param){limitParam=param;return chain;}
function offset(param){offsetParam=param;return chain;}
function expand(param){if(param){expandParam=angular.isArray(param)?param:[param];}
return chain;}
function build(forCount){if(selectParam===undefined||fromParam===undefined){throw new Error('$liql requires both a SELECT and FROM to be specified.'+'SELECT: ['+selectParam+'] FROM: ['+fromParam+']');}
var selectVal=forCount?'count(*)':selectParam.join(', ');var statement='SELECT '+selectVal+' FROM '+fromParam;if(whereParam!==undefined&&whereParam.build().length>0){statement+=' WHERE '+whereParam.build();}
if(orderByParam!==undefined&&!forCount){var orderByBuilt=orderByParam.build();if(orderByBuilt.length>0){statement+=' ORDER BY '+orderByParam.build();}}
if(angular.isNumber(limitParam)&&!$window.isNaN(limitParam)&&!forCount){statement+=' LIMIT '+limitParam;}
if(angular.isNumber(offsetParam)&&!$window.isNaN(offsetParam)&&!forCount){statement+=' OFFSET '+offsetParam;}
$log.debug(statement);return statement;}
function count(useCache){return exec(useCache,true).unwrap();}
function exec(useCache,forCount){var params={q:build(forCount)};if(expandParam){params.expands=expandParam.join(',');}
if(useCache===undefined){useCache=true;}
var liqlResponse=$liRestManager.request('/search',params,{},'get',useCache);return liqlPromise(liqlResponse);}
function liqlPromise(res){res.unwrap=function(){return res.then(function(response){if(response.data){if(response.data.items){return response.data.items;}else if(angular.isNumber(response.data.count)){return response.data.count;}
return response.data;}
return response;});};res.first=function(){return res.then(function(response){return response.data&&response.data.items[0]||null;});};return res;}
chain={select:select,from:from,where:where,orderBy:orderBy,limit:limit,offset:offset,expand:expand,build:build,exec:exec,count:count};return chain;}
function whereBuilder(liqlBuilder,key,clauses,connector){var operandParam;var whereChain;var whereClauses=clauses;function op(param){operandParam=param;return whereChain;}
function value(param){whereClauses.push({connector:connector,key:key,operand:operandParam,value:param});liqlBuilder.where=and;liqlBuilder.and=and;liqlBuilder.or=or;return liqlBuilder;}
function and(param){return whereBuilder(liqlBuilder,param,whereClauses,'AND');}
function or(param){return whereBuilder(liqlBuilder,param,whereClauses,'OR');}
function logicalOperand(operand,valueParam){operandParam=operand;return value(valueParam);}
function build(){var statement='';angular.forEach(whereClauses,function(whereClause){var val;if(angular.isString(whereClause.value)&&whereClause.operand==='IN'){val='('+wrapWithQuotes(whereClause.value)+')';}else if(angular.isString(whereClause.value)){val=wrapWithQuotes(whereClause.value);}else if(angular.isArray(whereClause.value)){val='(';angular.forEach(whereClause.value,function(clause,i){val+=wrapWithQuotes(clause);if(i!==whereClause.value.length-1){val+=', ';}});val+=')';}else{val=whereClause.value;}
if(whereClause.key!==undefined&&whereClause.key!==null&&val!==undefined&&val!==null){var connectorStr=statement.length>0&&whereClause.connector?' '+whereClause.connector+' ':'';statement+=connectorStr+whereClause.key+' '+whereClause.operand+' '+val;}});return statement;}
whereChain={op:op,value:value,build:build};angular.forEach(OPERAND_SYMBOL_MAP,function(actual,key){whereChain[key]=function(value){return logicalOperand(actual,value);};});return whereChain;}
function orderByBuilder(liqlBuilder,keyParam,orderBysParam){var orderBys=orderBysParam;var key=keyParam;function add(key,dir){orderBys.push({key:key,dir:dir});liqlBuilder.orderBy=function(key){return orderByBuilder(liqlBuilder,key,orderBys);};return liqlBuilder;}
function asc(){return add(key,'ASC');}
function desc(){return add(key,'DESC');}
function dir(orderDir){return add(key,orderDir);}
function build(){var toJoin=[];angular.forEach(orderBys,function(orderBy){if(orderBy.key&&orderBy.dir){toJoin.push(orderBy.key+' '+orderBy.dir);}});return toJoin.join(', ');}
var orderByChain={asc:asc,desc:desc,dir:dir,build:build};return orderByChain;}
function wrapWithQuotes(input){return'"'+input.replace(/\\/g,'\\\\').replace(/"/g,'\\"')+'"';}
function firstKeyFromObject(obj){return Object.keys(obj)[0];}
function firstValueFromObject(obj){return valuesFromObject(obj)[0];}
function valuesFromObject(obj){return Object.keys(obj).map(function(i){return obj[i];});}
function operandMapReverseLookup(value){var operandValues=valuesFromObject(OPERAND_SYMBOL_MAP);var idx=operandValues.indexOf(value.toUpperCase());return operandValues[idx];}
function addWhereClausesToLiql(liql,constraints){constraints.forEach(function(constraint){var whereProp=firstKeyFromObject(constraint);var operand='=';var whereValue=firstValueFromObject(constraint);if(angular.isObject(whereValue)){var operandKey=firstKeyFromObject(whereValue);operand=operandMapReverseLookup(operandKey);whereValue=whereValue[operandKey];}
liql.where(whereProp).op(operand).value(whereValue);});}
function addSortsToLiql(liql,sorts){sorts.forEach(function(sort){var parts=sort.split(' ');if(parts.length===1){liql.orderBy(parts[0]).desc();}else if(parts.length>1){var orderBy=liql.orderBy(parts[0]);if(parts[1].toLowerCase()==='asc'){orderBy.asc();}else{orderBy.desc();}}});}
function fromJson(obj){var properties=firstValueFromObject(obj);var liql=liqlBuilder().select(properties.fields).from(firstKeyFromObject(obj));if(angular.isArray(properties.constraints)){addWhereClausesToLiql(liql,properties.constraints);}
if(angular.isArray(properties.sorts)){addSortsToLiql(liql,properties.sorts);}
liql.limit(properties.limit).offset(properties.offset);return liql;}
liqlBuilder.exactPhrase=wrapWithQuotes;liqlBuilder.fromJson=fromJson;return liqlBuilder;}]);})(window.LITHIUM&&LITHIUM.angular||angular);

!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(a){return function(b,c){if("__setXHR_"===b){var d=c(this);d instanceof Function&&d(this)}else a.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="12.0.4",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(a,b,c){function d(d){function e(a){j.notify&&j.notify(a),k.progressFunc&&c(function(){k.progressFunc(a)})}function h(a){return null!=d._start&&g?{loaded:a.loaded+d._start,total:d._file&&d._file.size||a.total,type:a.type,config:d,lengthComputable:!0,target:a.target}:a}function i(){a(d).then(function(a){g&&d._chunkSize&&!d._finished&&d._file?(e({loaded:d._end,total:d._file&&d._file.size,config:d,type:"progress"}),f.upload(d,!0)):(d._finished&&delete d._finished,j.resolve(a))},function(a){j.reject(a)},function(a){j.notify(a)})}d.method=d.method||"POST",d.headers=d.headers||{};var j=d._deferred=d._deferred||b.defer(),k=j.promise;return d.disableProgress||(d.headers.__setXHR_=function(){return function(a){a&&a.upload&&a.upload.addEventListener&&(d.__XHR=a,d.xhrFn&&d.xhrFn(a),a.upload.addEventListener("progress",function(a){a.config=d,e(h(a))},!1),a.upload.addEventListener("load",function(a){a.lengthComputable&&(a.config=d,e(h(a)))},!1))}}),g?d._chunkSize&&d._end&&!d._finished?(d._start=d._end,d._end+=d._chunkSize,i()):d.resumeSizeUrl?a.get(d.resumeSizeUrl).then(function(a){d._start=d.resumeSizeResponseReader?d.resumeSizeResponseReader(a.data):parseInt((null==a.data.size?a.data:a.data.size).toString()),d._chunkSize&&(d._end=d._start+d._chunkSize),i()},function(a){throw a}):d.resumeSize?d.resumeSize().then(function(a){d._start=a,i()},function(a){throw a}):(d._chunkSize&&(d._start=0,d._end=d._start+d._chunkSize),i()):i(),k.success=function(a){return k.then(function(b){a(b.data,b.status,b.headers,d)}),k},k.error=function(a){return k.then(null,function(b){a(b.data,b.status,b.headers,d)}),k},k.progress=function(a){return k.progressFunc=a,k.then(null,null,function(b){a(b)}),k},k.abort=k.pause=function(){return d.__XHR&&c(function(){d.__XHR.abort()}),k},k.xhr=function(a){return d.xhrFn=function(b){return function(){b&&b.apply(k,arguments),a.apply(k,arguments)}}(d.xhrFn),k},f.promisesCount++,k["finally"](function(){f.promisesCount--}),k}function e(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}var f=this;f.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var g=this.isResumeSupported();this.isUploadInProgress=function(){return f.promisesCount>0},this.rename=function(a,b){return a.ngfName=b,a},this.jsonBlob=function(a){null==a||angular.isString(a)||(a=JSON.stringify(a));var b=new window.Blob([a],{type:"application/json"});return b._ngfBlob=!0,b},this.json=function(a){return angular.toJson(a)},this.isFile=function(a){return null!=a&&(a instanceof window.Blob||a.flashId&&a.name&&a.size)},this.upload=function(a,b){function c(b,c){if(b._ngfBlob)return b;if(a._file=a._file||b,null!=a._start&&g){a._end&&a._end>=b.size&&(a._finished=!0,a._end=b.size);var d=b.slice(a._start,a._end||b.size);return d.name=b.name,d.ngfName=b.ngfName,a._chunkSize&&(c.append("_chunkSize",a._chunkSize),c.append("_currentChunkSize",a._end-a._start),c.append("_chunkNumber",Math.floor(a._start/a._chunkSize)),c.append("_totalSize",a._file.size)),d}return b}function h(b,d,e){if(void 0!==d)if(angular.isDate(d)&&(d=d.toISOString()),angular.isString(d))b.append(e,d);else if(f.isFile(d)){var g=c(d,b),i=e.split(",");i[1]&&(g.ngfName=i[1].replace(/^\s+|\s+$/g,""),e=i[0]),a._fileKey=a._fileKey||e,b.append(e,g,g.ngfName||g.name)}else if(angular.isObject(d)){if(d.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+e;d.$$ngfCircularDetection=!0;try{for(var j in d)if(d.hasOwnProperty(j)&&"$$ngfCircularDetection"!==j){var k=null==a.objectKey?"[i]":a.objectKey;d.length&&parseInt(j)>-1&&(k=null==a.arrayKey?k:a.arrayKey),h(b,d[j],e+k.replace(/[ik]/g,j))}}finally{delete d.$$ngfCircularDetection}}else b.append(e,d)}function i(){a._chunkSize=f.translateScalars(a.resumeChunkSize),a._chunkSize=a._chunkSize?parseInt(a._chunkSize.toString()):null,a.headers=a.headers||{},a.headers["Content-Type"]=void 0,a.transformRequest=a.transformRequest?angular.isArray(a.transformRequest)?a.transformRequest:[a.transformRequest]:[],a.transformRequest.push(function(b){var c,d=new window.FormData;b=b||a.fields||{},a.file&&(b.file=a.file);for(c in b)if(b.hasOwnProperty(c)){var e=b[c];a.formDataAppender?a.formDataAppender(d,c,e):h(d,e,c)}return d})}return b||(a=e(a)),a._isDigested||(a._isDigested=!0,i()),d(a)},this.http=function(b){return b=e(b),b.transformRequest=b.transformRequest||function(b){return window.ArrayBuffer&&b instanceof window.ArrayBuffer||b instanceof window.Blob?b:a.defaults.transformRequest[0].apply(this,arguments)},b._chunkSize=f.translateScalars(b.resumeChunkSize),b._chunkSize=b._chunkSize?parseInt(b._chunkSize.toString()):null,d(b)},this.translateScalars=function(a){if(angular.isString(a)){if(a.search(/kb/i)===a.length-2)return parseFloat(1024*a.substring(0,a.length-2));if(a.search(/mb/i)===a.length-2)return parseFloat(1048576*a.substring(0,a.length-2));if(a.search(/gb/i)===a.length-2)return parseFloat(1073741824*a.substring(0,a.length-2));if(a.search(/b/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/s/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/m/i)===a.length-1)return parseFloat(60*a.substring(0,a.length-1));if(a.search(/h/i)===a.length-1)return parseFloat(3600*a.substring(0,a.length-1))}return a},this.urlToBlob=function(c){var d=b.defer();return a({url:c,method:"get",responseType:"arraybuffer"}).then(function(a){var b=new Uint8Array(a.data),c=a.headers("content-type")||"image/WebP",e=new window.Blob([b],{type:c});d.resolve(e)},function(a){d.reject(a)}),d.promise},this.setDefaults=function(a){this.defaults=a||{}},this.defaults={},this.version=ngFileUpload.version}]),ngFileUpload.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function(a,b,c,d,e){function f(a,b,c){var e=[i.emptyPromise()];return angular.forEach(a,function(d,f){0===d.type.indexOf("image/jpeg")&&i.attrGetter("ngfFixOrientation",b,c,{$file:d})&&e.push(i.happyPromise(i.applyExifRotation(d),d).then(function(b){a.splice(f,1,b)}))}),d.all(e)}function g(a,b,c){var e=i.attrGetter("ngfResize",b,c);if(!e||!i.isResizeSupported()||!a.length)return i.emptyPromise();if(!(e instanceof Function))return h(e,a,b,c);var f=d.defer();e(a).then(function(d){h(d,a,b,c).then(function(a){f.resolve(a)},function(a){f.reject(a)})},function(a){f.reject(a)})}function h(a,b,c,e){function f(d,f){if(0===d.type.indexOf("image")){if(a.pattern&&!i.validatePattern(d,a.pattern))return;var h=i.resize(d,a.width,a.height,a.quality,a.type,a.ratio,a.centerCrop,function(a,b){return i.attrGetter("ngfResizeIf",c,e,{$width:a,$height:b,$file:d})},a.restoreExif!==!1);g.push(h),h.then(function(a){b.splice(f,1,a)},function(a){d.$error="resize",d.$errorParam=(a?(a.message?a.message:a)+": ":"")+(d&&d.name)})}}for(var g=[i.emptyPromise()],h=0;h<b.length;h++)f(b[h],h);return d.all(g)}var i=e;return i.getAttrWithDefaults=function(a,b){if(null!=a[b])return a[b];var c=i.defaults[b];return null==c?c:angular.isString(c)?c:JSON.stringify(c)},i.attrGetter=function(b,c,d,e){var f=this.getAttrWithDefaults(c,b);if(!d)return f;try{return e?a(f)(d,e):a(f)(d)}catch(g){if(b.search(/min|max|pattern/i))return f;throw g}},i.shouldUpdateOn=function(a,b,c){var d=i.attrGetter("ngModelOptions",b,c);return d&&d.updateOn?d.updateOn.split(" ").indexOf(a)>-1:!0},i.emptyPromise=function(){var a=d.defer(),c=arguments;return b(function(){a.resolve.apply(a,c)}),a.promise},i.rejectPromise=function(){var a=d.defer(),c=arguments;return b(function(){a.reject.apply(a,c)}),a.promise},i.happyPromise=function(a,c){var e=d.defer();return a.then(function(a){e.resolve(a)},function(a){b(function(){throw a}),e.resolve(c)}),e.promise},i.updateModel=function(c,d,e,h,j,k,l){function m(f,g,j,l,m){d.$$ngfPrevValidFiles=f,d.$$ngfPrevInvalidFiles=g;var n=f&&f.length?f[0]:null,o=g&&g.length?g[0]:null;c&&(i.applyModelValidation(c,f),c.$setViewValue(m?n:f)),h&&a(h)(e,{$files:f,$file:n,$newFiles:j,$duplicateFiles:l,$invalidFiles:g,$invalidFile:o,$event:k});var p=i.attrGetter("ngfModelInvalid",d);p&&b(function(){a(p).assign(e,m?o:g)}),b(function(){})}function n(){function a(a,b){return a.name===b.name&&(a.$ngfOrigSize||a.size)===(b.$ngfOrigSize||b.size)&&a.type===b.type}function b(b){var c;for(c=0;c<s.length;c++)if(a(b,s[c]))return!0;for(c=0;c<t.length;c++)if(a(b,t[c]))return!0;return!1}if(j){r=[],u=[];for(var c=0;c<j.length;c++)b(j[c])?u.push(j[c]):r.push(j[c])}}function o(a){return angular.isArray(a)?a:[a]}function p(){w=[],v=[],angular.forEach(r,function(a){a.$error?v.push(a):w.push(a)})}function q(){function a(){b(function(){m(x?s.concat(w):w,x?t.concat(v):v,j,u,y)},A&&A.debounce?A.debounce.change||A.debounce:0)}g(z?r:w,d,e).then(function(){z?i.validate(r,s.length,c,d,e).then(function(){p(),a()}):a()},function(a){throw"Could not resize files "+a})}var r,s,t,u=[],v=[],w=[];s=d.$$ngfPrevValidFiles||[],t=d.$$ngfPrevInvalidFiles||[],c&&c.$modelValue&&(s=o(c.$modelValue));var x=i.attrGetter("ngfKeep",d,e);r=(j||[]).slice(0),("distinct"===x||i.attrGetter("ngfKeepDistinct",d,e)===!0)&&n(d,e);var y=!x&&!i.attrGetter("ngfMultiple",d,e)&&!i.attrGetter("multiple",d);if(!x||r.length){i.attrGetter("ngfBeforeModelChange",d,e,{$files:j,$file:j&&j.length?j[0]:null,$newFiles:r,$duplicateFiles:u,$event:k});var z=i.attrGetter("ngfValidateAfterResize",d,e),A=i.attrGetter("ngModelOptions",d,e);i.validate(r,s.length,c,d,e).then(function(){l?m(r,[],j,u,y):(A&&A.allowInvalid||z?w=r:p(),i.attrGetter("ngfFixOrientation",d,e)&&i.isExifSupported()?f(w,d,e).then(function(){q()}):q())})}},i}]),ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(a,b,c,d){function e(a){var b=a.match(/Android[^\d]*(\d+)\.(\d+)/);if(b&&b.length>2){var c=d.defaults.androidFixMinorVersion||4;return parseInt(b[1])<4||parseInt(b[1])===c&&parseInt(b[2])<c}return-1===a.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(a)}function f(a,b,c,d,f,h,i,j){function k(){return"input"===b[0].tagName.toLowerCase()&&c.type&&"file"===c.type.toLowerCase()}function l(){return t("ngfChange")||t("ngfSelect")}function m(b){if(j.shouldUpdateOn("change",c,a)){for(var e=b.__files_||b.target&&b.target.files,f=[],g=0;g<e.length;g++)f.push(e[g]);j.updateModel(d,c,a,l(),f.length?f:null,b)}}function n(a){if(b!==a)for(var c=0;c<b[0].attributes.length;c++){var d=b[0].attributes[c];"type"!==d.name&&"class"!==d.name&&"style"!==d.name&&((null==d.value||""===d.value)&&("required"===d.name&&(d.value="required"),"multiple"===d.name&&(d.value="multiple")),a.attr(d.name,"id"===d.name?"ngf-"+d.value:d.value))}}function o(){if(k())return b;var a=angular.element('<input type="file">');n(a);var c=angular.element("<label>upload</label>");return c.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),g.push({el:b,ref:c}),document.body.appendChild(c.append(a)[0]),a}function p(c){if(b.attr("disabled"))return!1;if(!t("ngfSelectDisabled",a)){var d=q(c);if(null!=d)return d;r(c);try{k()||document.body.contains(w[0])||(g.push({el:b,ref:w.parent()}),document.body.appendChild(w.parent()[0]),w.bind("change",m))}catch(f){}return e(navigator.userAgent)?setTimeout(function(){w[0].click()},0):w[0].click(),!1}}function q(a){var b=a.changedTouches||a.originalEvent&&a.originalEvent.changedTouches;if("touchstart"===a.type)return v=b?b[0].clientY:0,!0;if(a.stopPropagation(),a.preventDefault(),"touchend"===a.type){var c=b?b[0].clientY:0;if(Math.abs(c-v)>20)return!1}}function r(b){j.shouldUpdateOn("click",c,a)&&w.val()&&(w.val(null),j.updateModel(d,c,a,l(),null,b,!0))}function s(a){if(w&&!w.attr("__ngf_ie10_Fix_")){if(!w[0].parentNode)return void(w=null);a.preventDefault(),a.stopPropagation(),w.unbind("click");var b=w.clone();return w.replaceWith(b),w=b,w.attr("__ngf_ie10_Fix_","true"),w.bind("change",m),w.bind("click",s),w[0].click(),!1}w.removeAttr("__ngf_ie10_Fix_")}var t=function(a,b){return j.attrGetter(a,c,b)};j.registerModelChangeValidator(d,c,a);var u=[];u.push(a.$watch(t("ngfMultiple"),function(){w.attr("multiple",t("ngfMultiple",a))})),u.push(a.$watch(t("ngfCapture"),function(){w.attr("capture",t("ngfCapture",a))})),u.push(a.$watch(t("ngfAccept"),function(){w.attr("accept",t("ngfAccept",a))})),c.$observe("accept",function(){w.attr("accept",t("accept"))}),u.push(function(){c.$$observers&&delete c.$$observers.accept});var v=0,w=b;k()||(w=o()),w.bind("change",m),k()?b.bind("click",r):b.bind("click touchstart touchend",p),-1!==navigator.appVersion.indexOf("MSIE 10")&&w.bind("click",s),d&&d.$formatters.push(function(a){return(null==a||0===a.length)&&w.val()&&w.val(null),a}),a.$on("$destroy",function(){k()||w.parent().remove(),angular.forEach(u,function(a){a()})}),h(function(){for(var a=0;a<g.length;a++){var b=g[a];document.body.contains(b.el[0])||(g.splice(a,1),b.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(b,w,m)}var g=[];return{restrict:"AEC",require:"?ngModel",link:function(e,g,h,i){f(e,g,h,i,a,b,c,d)}}}]),function(){function a(a){return"img"===a.tagName.toLowerCase()?"image":"audio"===a.tagName.toLowerCase()?"audio":"video"===a.tagName.toLowerCase()?"video":/./}function b(b,c,d,e,f,g,h,i){function j(a){var g=b.attrGetter("ngfNoObjectUrl",f,d);b.dataUrl(a,g)["finally"](function(){c(function(){var b=(g?a.$ngfDataUrl:a.$ngfBlobUrl)||a.$ngfDataUrl;i?e.css("background-image","url('"+(b||"")+"')"):e.attr("src",b),b?e.removeClass("ng-hide"):e.addClass("ng-hide")})})}c(function(){var c=d.$watch(f[g],function(c){var d=h;if("ngfThumbnail"===g&&(d||(d={width:e[0].clientWidth,height:e[0].clientHeight}),0===d.width&&window.getComputedStyle)){var f=getComputedStyle(e[0]);d={width:parseInt(f.width.slice(0,-2)),height:parseInt(f.height.slice(0,-2))}}return angular.isString(c)?(e.removeClass("ng-hide"),i?e.css("background-image","url('"+c+"')"):e.attr("src",c)):void(!c||!c.type||0!==c.type.search(a(e[0]))||i&&0!==c.type.indexOf("image")?e.addClass("ng-hide"):d&&b.isResizeSupported()?b.resize(c,d.width,d.height,d.quality).then(function(a){j(a)},function(a){throw a}):j(c))});d.$on("$destroy",function(){c()})})}ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(a,b,c){var d=a;return d.base64DataUrl=function(a){if(angular.isArray(a)){var b=c.defer(),e=0;return angular.forEach(a,function(c){d.dataUrl(c,!0)["finally"](function(){if(e++,e===a.length){var c=[];angular.forEach(a,function(a){c.push(a.$ngfDataUrl)}),b.resolve(c,a)}})}),b.promise}return d.dataUrl(a,!0)},d.dataUrl=function(a,e){if(!a)return d.emptyPromise(a,a);if(e&&null!=a.$ngfDataUrl||!e&&null!=a.$ngfBlobUrl)return d.emptyPromise(e?a.$ngfDataUrl:a.$ngfBlobUrl,a);var f=e?a.$$ngfDataUrlPromise:a.$$ngfBlobUrlPromise;if(f)return f;var g=c.defer();return b(function(){if(window.FileReader&&a&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||a.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||a.size<4e6)){var c=window.URL||window.webkitURL;if(c&&c.createObjectURL&&!e){var f;try{f=c.createObjectURL(a)}catch(h){return void b(function(){a.$ngfBlobUrl="",g.reject()})}b(function(){if(a.$ngfBlobUrl=f,f){g.resolve(f,a),d.blobUrls=d.blobUrls||[],d.blobUrlsTotalSize=d.blobUrlsTotalSize||0,d.blobUrls.push({url:f,size:a.size}),d.blobUrlsTotalSize+=a.size||0;for(var b=d.defaults.blobUrlsMaxMemory||268435456,e=d.defaults.blobUrlsMaxQueueSize||200;(d.blobUrlsTotalSize>b||d.blobUrls.length>e)&&d.blobUrls.length>1;){var h=d.blobUrls.splice(0,1)[0];c.revokeObjectURL(h.url),d.blobUrlsTotalSize-=h.size}}})}else{var i=new FileReader;i.onload=function(c){b(function(){a.$ngfDataUrl=c.target.result,g.resolve(c.target.result,a),b(function(){delete a.$ngfDataUrl},1e3)})},i.onerror=function(){b(function(){a.$ngfDataUrl="",g.reject()})},i.readAsDataURL(a)}}else b(function(){a[e?"$ngfDataUrl":"$ngfBlobUrl"]="",g.reject()})}),f=e?a.$$ngfDataUrlPromise=g.promise:a.$$ngfBlobUrlPromise=g.promise,f["finally"](function(){delete a[e?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),f},d}]),ngFileUpload.directive("ngfSrc",["Upload","$timeout",function(a,c){return{restrict:"AE",link:function(d,e,f){b(a,c,d,e,f,"ngfSrc",a.attrGetter("ngfResize",f,d),!1)}}}]),ngFileUpload.directive("ngfBackground",["Upload","$timeout",function(a,c){return{restrict:"AE",link:function(d,e,f){b(a,c,d,e,f,"ngfBackground",a.attrGetter("ngfResize",f,d),!0)}}}]),ngFileUpload.directive("ngfThumbnail",["Upload","$timeout",function(a,c){return{restrict:"AE",link:function(d,e,f){var g=a.attrGetter("ngfSize",f,d);b(a,c,d,e,f,"ngfThumbnail",g,a.attrGetter("ngfAsBackground",f,d))}}}]),ngFileUpload.config(["$compileProvider",function(a){a.imgSrcSanitizationWhitelist&&a.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/),a.aHrefSanitizationWhitelist&&a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/)}]),ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(a,b){return function(c,d,e){if(angular.isString(c))return b.trustAsResourceUrl(c);var f=c&&((d?c.$ngfDataUrl:c.$ngfBlobUrl)||c.$ngfDataUrl);return c&&!f?(!c.$ngfDataUrlFilterInProgress&&angular.isObject(c)&&(c.$ngfDataUrlFilterInProgress=!0,a.dataUrl(c,d)),""):(c&&delete c.$ngfDataUrlFilterInProgress,(c&&f?e?b.trustAsResourceUrl(f):f:c)||"")}}])}(),ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(a,b,c){function d(a){var b="",c=[];if(a.length>2&&"/"===a[0]&&"/"===a[a.length-1])b=a.substring(1,a.length-1);else{var e=a.split(",");if(e.length>1)for(var f=0;f<e.length;f++){var g=d(e[f]);g.regexp?(b+="("+g.regexp+")",f<e.length-1&&(b+="|")):c=c.concat(g.excludes)}else 0===a.indexOf("!")?c.push("^((?!"+d(a.substring(1)).regexp+").)*$"):(0===a.indexOf(".")&&(a="*"+a),b="^"+a.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",b=b.replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:b,excludes:c}}function e(a,b){null==b||a.$dirty||(a.$setDirty?a.$setDirty():a.$dirty=!0)}var f=a;return f.validatePattern=function(a,b){if(!b)return!0;var c=d(b),e=!0;if(c.regexp&&c.regexp.length){var f=new RegExp(c.regexp,"i");e=null!=a.type&&f.test(a.type)||null!=a.name&&f.test(a.name)}for(var g=c.excludes.length;g--;){var h=new RegExp(c.excludes[g],"i");e=e&&(null==a.type||h.test(a.type))&&(null==a.name||h.test(a.name))}return e},f.ratioToFloat=function(a){var b=a.toString(),c=b.search(/[x:]/i);return b=c>-1?parseFloat(b.substring(0,c))/parseFloat(b.substring(c+1)):parseFloat(b)},f.registerModelChangeValidator=function(a,b,c){a&&a.$formatters.push(function(d){a.$dirty&&(d&&!angular.isArray(d)&&(d=[d]),f.validate(d,0,a,b,c).then(function(){f.applyModelValidation(a,d)}))})},f.applyModelValidation=function(a,b){e(a,b),angular.forEach(a.$ngfValidations,function(b){a.$setValidity(b.name,b.valid)})},f.getValidationAttr=function(a,b,c,d,e){var g="ngf"+c[0].toUpperCase()+c.substr(1),h=f.attrGetter(g,a,b,{$file:e});if(null==h&&(h=f.attrGetter("ngfValidate",a,b,{$file:e}))){var i=(d||c).split(".");h=h[i[0]],i.length>1&&(h=h&&h[i[1]])}return h},f.validate=function(a,c,d,e,g){function h(b,c,h){if(a){for(var i=a.length,j=null;i--;){var k=a[i];if(k){var l=f.getValidationAttr(e,g,b,c,k);null!=l&&(h(k,l,i)||(k.$error=b,(k.$errorMessages=k.$errorMessages||{})[b]=!0,k.$errorParam=l,a.splice(i,1),j=!1))}}null!==j&&d.$ngfValidations.push({name:b,valid:j})}}function i(c,h,i,k,l){function m(a,b,d){null!=d?k(b,d).then(function(e){l(e,d)?a.resolve():(b.$error=c,(b.$errorMessages=b.$errorMessages||{})[c]=!0,b.$errorParam=d,a.reject())},function(){j("ngfValidateForce",{$file:b})?(b.$error=c,(b.$errorMessages=b.$errorMessages||{})[c]=!0,b.$errorParam=d,a.reject()):a.resolve()}):a.resolve()}var n=[f.emptyPromise()];return a?(a=void 0===a.length?[a]:a,angular.forEach(a,function(a){var d=b.defer();return n.push(d.promise),!i||null!=a.type&&0===a.type.search(i)?void("dimensions"===c&&null!=f.attrGetter("ngfDimensions",e)?f.imageDimensions(a).then(function(b){m(d,a,j("ngfDimensions",{$file:a,$width:b.width,$height:b.height}))},function(){d.reject()}):"duration"===c&&null!=f.attrGetter("ngfDuration",e)?f.mediaDuration(a).then(function(b){m(d,a,j("ngfDuration",{$file:a,$duration:b}))},function(){d.reject()}):m(d,a,f.getValidationAttr(e,g,c,h,a))):void d.resolve()}),b.all(n).then(function(){d.$ngfValidations.push({name:c,valid:!0})},function(){d.$ngfValidations.push({name:c,valid:!1})})):void 0}d=d||{},d.$ngfValidations=d.$ngfValidations||[],angular.forEach(d.$ngfValidations,function(a){a.valid=!0});var j=function(a,b){return f.attrGetter(a,e,g,b)};if(null==a||0===a.length)return f.emptyPromise(d);a=void 0===a.length?[a]:a.slice(0),h("maxFiles",null,function(a,b,d){return b>c+d}),h("pattern",null,f.validatePattern),h("minSize","size.min",function(a,b){return a.size+.1>=f.translateScalars(b)}),h("maxSize","size.max",function(a,b){return a.size-.1<=f.translateScalars(b)});var k=0;if(h("maxTotalSize",null,function(b,c){return k+=b.size,k>f.translateScalars(c)?(a.splice(0,a.length),!1):!0}),h("validateFn",null,function(a,b){return b===!0||null===b||""===b}),!a.length)return f.emptyPromise(d,d.$ngfValidations);var l=b.defer(),m=[];return m.push(f.happyPromise(i("maxHeight","height.max",/image/,this.imageDimensions,function(a,b){return a.height<=b}))),m.push(f.happyPromise(i("minHeight","height.min",/image/,this.imageDimensions,function(a,b){return a.height>=b}))),m.push(f.happyPromise(i("maxWidth","width.max",/image/,this.imageDimensions,function(a,b){return a.width<=b}))),m.push(f.happyPromise(i("minWidth","width.min",/image/,this.imageDimensions,function(a,b){return a.width>=b}))),m.push(f.happyPromise(i("dimensions",null,/image/,function(a,b){return f.emptyPromise(b)},function(a){return a}))),m.push(f.happyPromise(i("ratio",null,/image/,this.imageDimensions,function(a,b){for(var c=b.toString().split(","),d=!1,e=0;e<c.length;e++)Math.abs(a.width/a.height-f.ratioToFloat(c[e]))<1e-4&&(d=!0);return d}))),m.push(f.happyPromise(i("maxRatio","ratio.max",/image/,this.imageDimensions,function(a,b){return a.width/a.height-f.ratioToFloat(b)<1e-4}))),m.push(f.happyPromise(i("minRatio","ratio.min",/image/,this.imageDimensions,function(a,b){return a.width/a.height-f.ratioToFloat(b)>-1e-4}))),m.push(f.happyPromise(i("maxDuration","duration.max",/audio|video/,this.mediaDuration,function(a,b){return a<=f.translateScalars(b)}))),m.push(f.happyPromise(i("minDuration","duration.min",/audio|video/,this.mediaDuration,function(a,b){return a>=f.translateScalars(b)}))),m.push(f.happyPromise(i("duration",null,/audio|video/,function(a,b){return f.emptyPromise(b)},function(a){return a}))),m.push(f.happyPromise(i("validateAsyncFn",null,null,function(a,b){return b},function(a){return a===!0||null===a||""===a}))),b.all(m).then(function(){l.resolve(d,d.$ngfValidations)})},f.imageDimensions=function(a){if(a.$ngfWidth&&a.$ngfHeight){var d=b.defer();return c(function(){d.resolve({width:a.$ngfWidth,height:a.$ngfHeight})}),d.promise}if(a.$ngfDimensionPromise)return a.$ngfDimensionPromise;var e=b.defer();return c(function(){return 0!==a.type.indexOf("image")?void e.reject("not image"):void f.dataUrl(a).then(function(b){function d(){var b=h[0].clientWidth,c=h[0].clientHeight;h.remove(),a.$ngfWidth=b,a.$ngfHeight=c,e.resolve({width:b,height:c})}function f(){h.remove(),e.reject("load error")}function g(){c(function(){h[0].parentNode&&(h[0].clientWidth?d():i>10?f():g())},1e3)}var h=angular.element("<img>").attr("src",b).css("visibility","hidden").css("position","fixed").css("max-width","none !important").css("max-height","none !important");h.on("load",d),h.on("error",f);var i=0;g(),angular.element(document.getElementsByTagName("body")[0]).append(h)},function(){e.reject("load error")})}),a.$ngfDimensionPromise=e.promise,a.$ngfDimensionPromise["finally"](function(){delete a.$ngfDimensionPromise}),a.$ngfDimensionPromise},f.mediaDuration=function(a){if(a.$ngfDuration){var d=b.defer();return c(function(){d.resolve(a.$ngfDuration)}),d.promise}if(a.$ngfDurationPromise)return a.$ngfDurationPromise;var e=b.defer();return c(function(){return 0!==a.type.indexOf("audio")&&0!==a.type.indexOf("video")?void e.reject("not media"):void f.dataUrl(a).then(function(b){function d(){var b=h[0].duration;a.$ngfDuration=b,h.remove(),e.resolve(b)}function f(){h.remove(),e.reject("load error")}function g(){c(function(){h[0].parentNode&&(h[0].duration?d():i>10?f():g())},1e3)}var h=angular.element(0===a.type.indexOf("audio")?"<audio>":"<video>").attr("src",b).css("visibility","none").css("position","fixed");h.on("loadedmetadata",d),h.on("error",f);var i=0;g(),angular.element(document.body).append(h)},function(){e.reject("load error")})}),a.$ngfDurationPromise=e.promise,a.$ngfDurationPromise["finally"](function(){delete a.$ngfDurationPromise}),a.$ngfDurationPromise},f}]),ngFileUpload.service("UploadResize",["UploadValidate","$q",function(a,b){var c=a,d=function(a,b,c,d,e){var f=e?Math.max(c/a,d/b):Math.min(c/a,d/b);return{width:a*f,height:b*f,marginX:a*f-c,marginY:b*f-d}},e=function(a,e,f,g,h,i,j,k){var l=b.defer(),m=document.createElement("canvas"),n=document.createElement("img");return n.onload=function(){if(null!=k&&k(n.width,n.height)===!1)return void l.reject("resizeIf");try{if(i){var a=c.ratioToFloat(i),b=n.width/n.height;a>b?(e=n.width,f=e/a):(f=n.height,e=f*a)}e||(e=n.width),f||(f=n.height);var o=d(n.width,n.height,e,f,j);m.width=Math.min(o.width,e),m.height=Math.min(o.height,f);var p=m.getContext("2d");p.drawImage(n,Math.min(0,-o.marginX/2),Math.min(0,-o.marginY/2),o.width,o.height),l.resolve(m.toDataURL(h||"image/WebP",g||.934))}catch(q){l.reject(q)}},n.onerror=function(){l.reject()},n.src=a,l.promise};return c.dataUrltoBlob=function(a,b,c){for(var d=a.split(","),e=d[0].match(/:(.*?);/)[1],f=atob(d[1]),g=f.length,h=new Uint8Array(g);g--;)h[g]=f.charCodeAt(g);var i=new window.Blob([h],{type:e});return i.name=b,i.$ngfOrigSize=c,i},c.isResizeSupported=function(){var a=document.createElement("canvas");return window.atob&&a.getContext&&a.getContext("2d")&&window.Blob},c.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(a){this.$ngfName=a},configurable:!0}),c.resize=function(a,d,f,g,h,i,j,k,l){if(0!==a.type.indexOf("image"))return c.emptyPromise(a);var m=b.defer();return c.dataUrl(a,!0).then(function(b){e(b,d,f,g,h||a.type,i,j,k).then(function(d){if("image/jpeg"===a.type&&l)try{d=c.restoreExif(b,d)}catch(e){setTimeout(function(){throw e},1)}try{var f=c.dataUrltoBlob(d,a.name,a.size);m.resolve(f)}catch(e){m.reject(e)}},function(b){"resizeIf"===b&&m.resolve(a),m.reject(b)})},function(a){m.reject(a)}),m.promise},c}]),function(){function a(a,c,d,e,f,g,h,i,j,k){function l(){return c.attr("disabled")||r("ngfDropDisabled",a)}function m(b,c){i.updateModel(e,d,a,r("ngfChange")||r("ngfDrop"),b,c)}function n(b,c){if(!i.shouldUpdateOn(b,d,a)||!c)return i.rejectPromise([]);var e=[];c.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi,function(a,b,c){e.push(c)});var f=[],g=[];if(e.length){angular.forEach(e,function(a){f.push(i.urlToBlob(a).then(function(a){g.push(a)}))});var h=k.defer();return k.all(f).then(function(){h.resolve(g)},function(a){h.reject(a)}),h.promise}return i.emptyPromise()}function o(a,b,c,d){var e=r("ngfDragOverClass",a,{$event:c}),f="dragover";if(angular.isString(e))f=e;else if(e&&(e.delay&&(v=e.delay),e.accept||e.reject)){var g=c.dataTransfer.items;if(null!=g&&g.length)for(var h=e.pattern||r("ngfPattern",a,{$event:c}),j=g.length;j--;){if(!i.validatePattern(g[j],h)){f=e.reject;break}f=e.accept}else f=e.accept}d(f)}function p(b,c,e,f){function g(a,b){var c=k.defer();if(null!=a)if(a.isDirectory){var d=[i.emptyPromise()];if(m){var e={type:"directory"};e.name=e.path=(b||"")+a.name+a.name,n.push(e)}var f=a.createReader(),h=[],p=function(){f.readEntries(function(e){try{e.length?(h=h.concat(Array.prototype.slice.call(e||[],0)),p()):(angular.forEach(h.slice(0),function(c){n.length<=j&&l>=o&&d.push(g(c,(b?b:"")+a.name+"/"))}),k.all(d).then(function(){c.resolve()},function(a){c.reject(a)}))}catch(f){c.reject(f)}},function(a){c.reject(a)})};p()}else a.file(function(a){try{a.path=(b?b:"")+a.name,m&&(a=i.rename(a,a.path)),n.push(a),o+=a.size,c.resolve()}catch(d){c.reject(d)}},function(a){c.reject(a)});return c.promise}var j=i.getValidationAttr(d,a,"maxFiles")||Number.MAX_VALUE,l=i.getValidationAttr(d,a,"maxTotalSize")||Number.MAX_VALUE,m=r("ngfIncludeDir",a),n=[],o=0,p=[i.emptyPromise()];if(b&&b.length>0&&"file"!==h.protocol())for(var q=0;q<b.length;q++){if(b[q].webkitGetAsEntry&&b[q].webkitGetAsEntry()&&b[q].webkitGetAsEntry().isDirectory){var s=b[q].webkitGetAsEntry();if(s.isDirectory&&!e)continue;null!=s&&p.push(g(s))}else{var t=b[q].getAsFile();null!=t&&(n.push(t),o+=t.size)}if(n.length>j||o>l||!f&&n.length>0)break}else if(null!=c)for(var u=0;u<c.length;u++){var v=c.item(u);if((v.type||v.size>0)&&(n.push(v),o+=v.size),n.length>j||o>l||!f&&n.length>0)break}var w=k.defer();return k.all(p).then(function(){if(f||m||!n.length)w.resolve(n);else{for(var a=0;n[a]&&"directory"===n[a].type;)a++;w.resolve([n[a]])}},function(a){w.reject(a)}),w.promise}var q=b(),r=function(a,b,c){return i.attrGetter(a,d,b,c)};if(r("dropAvailable")&&g(function(){a[r("dropAvailable")]?a[r("dropAvailable")].value=q:a[r("dropAvailable")]=q}),!q)return void(r("ngfHideOnDropNotAvailable",a)===!0&&c.css("display","none"));null==r("ngfSelect")&&i.registerModelChangeValidator(e,d,a);var s,t=null,u=f(r("ngfStopPropagation")),v=1;c[0].addEventListener("dragover",function(b){if(!l()&&i.shouldUpdateOn("drop",d,a)){if(b.preventDefault(),u(a)&&b.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var e=b.dataTransfer.effectAllowed;b.dataTransfer.dropEffect="move"===e||"linkMove"===e?"move":"copy"}g.cancel(t),s||(s="C",o(a,d,b,function(d){s=d,c.addClass(s),r("ngfDrag",a,{$isDragging:!0,$class:s,$event:b})}))}},!1),c[0].addEventListener("dragenter",function(b){!l()&&i.shouldUpdateOn("drop",d,a)&&(b.preventDefault(),u(a)&&b.stopPropagation())},!1),c[0].addEventListener("dragleave",function(b){!l()&&i.shouldUpdateOn("drop",d,a)&&(b.preventDefault(),u(a)&&b.stopPropagation(),t=g(function(){s&&c.removeClass(s),s=null,r("ngfDrag",a,{$isDragging:!1,$event:b})},v||100))},!1),c[0].addEventListener("drop",function(b){if(!l()&&i.shouldUpdateOn("drop",d,a)){b.preventDefault(),u(a)&&b.stopPropagation(),s&&c.removeClass(s),s=null;var e,f=b.dataTransfer.items;try{e=b.dataTransfer&&b.dataTransfer.getData&&b.dataTransfer.getData("text/html")}catch(g){}p(f,b.dataTransfer.files,r("ngfAllowDir",a)!==!1,r("multiple")||r("ngfMultiple",a)).then(function(a){a.length?m(a,b):n("dropUrl",e).then(function(a){m(a,b)})})}},!1),c[0].addEventListener("paste",function(b){if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&r("ngfEnableFirefoxPaste",a)&&b.preventDefault(),!l()&&i.shouldUpdateOn("paste",d,a)){var c=[],e=b.clipboardData||b.originalEvent.clipboardData;if(e&&e.items)for(var f=0;f<e.items.length;f++)-1!==e.items[f].type.indexOf("image")&&c.push(e.items[f].getAsFile());c.length?m(c,b):n("pasteUrl",e).then(function(a){m(a,b)})}},!1),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&r("ngfEnableFirefoxPaste",a)&&(c.attr("contenteditable",!0),c.on("keypress",function(a){a.metaKey||a.ctrlKey||a.preventDefault()}))}function b(){var a=document.createElement("div");return"draggable"in a&&"ondrop"in a&&!/Edge\/12./i.test(navigator.userAgent)}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$location","Upload","$http","$q",function(b,c,d,e,f,g){return{restrict:"AEC",require:"?ngModel",link:function(h,i,j,k){a(h,i,j,k,b,c,d,e,f,g)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(a,c){b()&&c.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(a,c,d){return function(e,f,g){if(b()){var h=a(d.attrGetter("ngfDropAvailable",g));c(function(){h(e),h.assign&&h.assign(e,!0)})}}}])}(),ngFileUpload.service("UploadExif",["UploadResize","$q",function(a,b){function c(a,b,c,d){switch(b){case 2:return a.transform(-1,0,0,1,c,0);case 3:return a.transform(-1,0,0,-1,c,d);case 4:return a.transform(1,0,0,-1,0,d);case 5:return a.transform(0,1,1,0,0,0);case 6:return a.transform(0,1,-1,0,d,0);case 7:return a.transform(0,-1,-1,0,d,c);case 8:return a.transform(0,-1,1,0,0,c)}}function d(a){for(var b="",c=new Uint8Array(a),d=c.byteLength,e=0;d>e;e++)b+=String.fromCharCode(c[e]);return window.btoa(b)}var e=a;return e.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&e.isResizeSupported()},e.readOrientation=function(a){var c=b.defer(),d=new FileReader,e=a.slice?a.slice(0,65536):a;return d.readAsArrayBuffer(e),d.onerror=function(a){return c.reject(a)},d.onload=function(a){var b={orientation:1},d=new DataView(this.result);if(65496!==d.getUint16(0,!1))return c.resolve(b);for(var e=d.byteLength,f=2;e>f;){var g=d.getUint16(f,!1);if(f+=2,65505===g){if(1165519206!==d.getUint32(f+=2,!1))return c.resolve(b);var h=18761===d.getUint16(f+=6,!1);f+=d.getUint32(f+4,h);var i=d.getUint16(f,h);f+=2;for(var j=0;i>j;j++)if(274===d.getUint16(f+12*j,h)){var k=d.getUint16(f+12*j+8,h);return k>=2&&8>=k&&(d.setUint16(f+12*j+8,1,h),b.fixedArrayBuffer=a.target.result),b.orientation=k,c.resolve(b)}}else{if(65280!==(65280&g))break;f+=d.getUint16(f,!1)}}return c.resolve(b)},c.promise},e.applyExifRotation=function(a){if(0!==a.type.indexOf("image/jpeg"))return e.emptyPromise(a);var f=b.defer();return e.readOrientation(a).then(function(b){return b.orientation<2||b.orientation>8?f.resolve(a):void e.dataUrl(a,!0).then(function(g){var h=document.createElement("canvas"),i=document.createElement("img");i.onload=function(){try{h.width=b.orientation>4?i.height:i.width,h.height=b.orientation>4?i.width:i.height;var g=h.getContext("2d");c(g,b.orientation,i.width,i.height),g.drawImage(i,0,0);var j=h.toDataURL(a.type||"image/WebP",.934);j=e.restoreExif(d(b.fixedArrayBuffer),j);var k=e.dataUrltoBlob(j,a.name);f.resolve(k)}catch(l){return f.reject(l)}},i.onerror=function(){f.reject()},i.src=g},function(a){f.reject(a)})},function(a){f.reject(a)}),f.promise},e.restoreExif=function(a,b){var c={};return c.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c.encode64=function(a){var b,c,d,e,f,g="",h="",i="",j=0;do b=a[j++],c=a[j++],h=a[j++],d=b>>2,e=(3&b)<<4|c>>4,f=(15&c)<<2|h>>6,i=63&h,isNaN(c)?f=i=64:isNaN(h)&&(i=64),g=g+this.KEY_STR.charAt(d)+this.KEY_STR.charAt(e)+this.KEY_STR.charAt(f)+this.KEY_STR.charAt(i),b=c=h="",d=e=f=i="";while(j<a.length);return g},c.restore=function(a,b){a.match("data:image/jpeg;base64,")&&(a=a.replace("data:image/jpeg;base64,",""));var c=this.decode64(a),d=this.slice2Segments(c),e=this.exifManipulation(b,d);return"data:image/jpeg;base64,"+this.encode64(e)},c.exifManipulation=function(a,b){var c=this.getExifArray(b),d=this.insertExif(a,c);return new Uint8Array(d)},c.getExifArray=function(a){for(var b,c=0;c<a.length;c++)if(b=a[c],255===b[0]&225===b[1])return b;return[]},c.insertExif=function(a,b){var c=a.replace("data:image/jpeg;base64,",""),d=this.decode64(c),e=d.indexOf(255,3),f=d.slice(0,e),g=d.slice(e),h=f;return h=h.concat(b),h=h.concat(g)},c.slice2Segments=function(a){for(var b=0,c=[];;){if(255===a[b]&218===a[b+1])break;if(255===a[b]&216===a[b+1])b+=2;else{var d=256*a[b+2]+a[b+3],e=b+d+2,f=a.slice(b,e);c.push(f),b=e}if(b>a.length)break}return c},c.decode64=function(a){var b,c,d,e,f,g="",h="",i=0,j=[],k=/[^A-Za-z0-9\+\/\=]/g;k.exec(a)&&console.log("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding."),a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");do d=this.KEY_STR.indexOf(a.charAt(i++)),e=this.KEY_STR.indexOf(a.charAt(i++)),f=this.KEY_STR.indexOf(a.charAt(i++)),h=this.KEY_STR.indexOf(a.charAt(i++)),b=d<<2|e>>4,c=(15&e)<<4|f>>2,g=(3&f)<<6|h,j.push(b),64!==f&&j.push(c),64!==h&&j.push(g),b=c=g="",d=e=f=h="";while(i<a.length);return j},c.restore(a,b)},e}]);

!function(){function a(a,b){window.XMLHttpRequest.prototype[a]=b(window.XMLHttpRequest.prototype[a])}function b(a,b,c){try{Object.defineProperty(a,b,{get:c})}catch(d){}}if(window.FileAPI||(window.FileAPI={}),!window.XMLHttpRequest)throw"AJAX is not supported. XMLHttpRequest is not defined.";if(FileAPI.shouldLoad=!window.FormData||FileAPI.forceLoad,FileAPI.shouldLoad){var c=function(a){if(!a.__listeners){a.upload||(a.upload={}),a.__listeners=[];var b=a.upload.addEventListener;a.upload.addEventListener=function(c,d){a.__listeners[c]=d,b&&b.apply(this,arguments)}}};a("open",function(a){return function(b,d,e){c(this),this.__url=d;try{a.apply(this,[b,d,e])}catch(f){f.message.indexOf("Access is denied")>-1&&(this.__origError=f,a.apply(this,[b,"_fix_for_ie_crossdomain__",e]))}}}),a("getResponseHeader",function(a){return function(b){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(b):null==a?null:a.apply(this,[b])}}),a("getAllResponseHeaders",function(a){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==a?null:a.apply(this)}}),a("abort",function(a){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==a?null:a.apply(this)}}),a("setRequestHeader",function(a){return function(b,d){if("__setXHR_"===b){c(this);var e=d(this);e instanceof Function&&e(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[b]=d,a.apply(this,arguments)}}),a("send",function(a){return function(){var c=this;if(arguments[0]&&arguments[0].__isFileAPIShim){var d=arguments[0],e={url:c.__url,jsonp:!1,cache:!0,complete:function(a,d){a&&angular.isString(a)&&-1!==a.indexOf("#2174")&&(a=null),c.__completed=!0,!a&&c.__listeners.load&&c.__listeners.load({type:"load",loaded:c.__loaded,total:c.__total,target:c,lengthComputable:!0}),!a&&c.__listeners.loadend&&c.__listeners.loadend({type:"loadend",loaded:c.__loaded,total:c.__total,target:c,lengthComputable:!0}),"abort"===a&&c.__listeners.abort&&c.__listeners.abort({type:"abort",loaded:c.__loaded,total:c.__total,target:c,lengthComputable:!0}),void 0!==d.status&&b(c,"status",function(){return 0===d.status&&a&&"abort"!==a?500:d.status}),void 0!==d.statusText&&b(c,"statusText",function(){return d.statusText}),b(c,"readyState",function(){return 4}),void 0!==d.response&&b(c,"response",function(){return d.response});var e=d.responseText||(a&&0===d.status&&"abort"!==a?a:void 0);b(c,"responseText",function(){return e}),b(c,"response",function(){return e}),a&&b(c,"err",function(){return a}),c.__fileApiXHR=d,c.onreadystatechange&&c.onreadystatechange(),c.onload&&c.onload()},progress:function(a){if(a.target=c,c.__listeners.progress&&c.__listeners.progress(a),c.__total=a.total,c.__loaded=a.loaded,a.total===a.loaded){var b=this;setTimeout(function(){c.__completed||(c.getAllResponseHeaders=function(){},b.complete(null,{status:204,statusText:"No Content"}))},FileAPI.noContentTimeout||1e4)}},headers:c.__requestHeaders};e.data={},e.files={};for(var f=0;f<d.data.length;f++){var g=d.data[f];null!=g.val&&null!=g.val.name&&null!=g.val.size&&null!=g.val.type?e.files[g.key]=g.val:e.data[g.key]=g.val}setTimeout(function(){if(!FileAPI.hasFlash)throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';c.__fileApiXHR=FileAPI.upload(e)},1)}else{if(this.__origError)throw this.__origError;a.apply(c,arguments)}}}),window.XMLHttpRequest.__isFileAPIShim=!0,window.FormData=FormData=function(){return{append:function(a,b,c){b.__isFileAPIBlobShim&&(b=b.data[0]),this.data.push({key:a,val:b,name:c})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(a){return{data:a,__isFileAPIBlobShim:!0}}}}(),function(){function a(a){return"input"===a[0].tagName.toLowerCase()&&a.attr("type")&&"file"===a.attr("type").toLowerCase()}function b(){try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(a)return!0}catch(b){if(void 0!==navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1}function c(a){var b=0,c=0;if(window.jQuery)return jQuery(a).offset();if(a.offsetParent)do b+=a.offsetLeft-a.scrollLeft,c+=a.offsetTop-a.scrollTop,a=a.offsetParent;while(a);return{left:b,top:c}}if(FileAPI.shouldLoad){if(FileAPI.hasFlash=b(),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var d,e,f,g,h,i=document.createElement("script"),j=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)d=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)e=window.FileAPI.jsPath;else for(f=0;f<j.length;f++)if(h=j[f].src,g=h.search(/\/ng\-file\-upload[\-a-zA-z0-9\.]*\.js/),g>-1){e=h.substring(0,g+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=e),i.setAttribute("src",d||e+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(i)}FileAPI.ngfFixIE=function(d,e,f){if(!b())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';var g=function(){var b=e.parent();d.attr("disabled")?b&&b.removeClass("js-fileapi-wrapper"):(e.attr("__ngf_flash_")||(e.unbind("change"),e.unbind("click"),e.bind("change",function(a){h.apply(this,[a]),f.apply(this,[a])}),e.attr("__ngf_flash_","true")),b.addClass("js-fileapi-wrapper"),a(d)||(b.css("position","absolute").css("top",c(d[0]).top+"px").css("left",c(d[0]).left+"px").css("width",d[0].offsetWidth+"px").css("height",d[0].offsetHeight+"px").css("filter","alpha(opacity=0)").css("display",d.css("display")).css("overflow","hidden").css("z-index","900000").css("visibility","visible"),e.css("width",d[0].offsetWidth+"px").css("height",d[0].offsetHeight+"px").css("position","absolute").css("top","0px").css("left","0px")))};d.bind("mouseenter",g);var h=function(a){for(var b=FileAPI.getFiles(a),c=0;c<b.length;c++)void 0===b[c].size&&(b[c].size=0),void 0===b[c].name&&(b[c].name="file"),void 0===b[c].type&&(b[c].type="undefined");a.target||(a.target={}),a.target.files=b,a.target.files!==b&&(a.__files_=b),(a.__files_||a.target.files).item=function(b){return(a.__files_||a.target.files)[b]||null}}},FileAPI.disableFileInput=function(a,b){b?a.removeClass("js-fileapi-wrapper"):a.addClass("js-fileapi-wrapper")}}}(),window.FileReader||(window.FileReader=function(){var a=this,b=!1;this.listeners={},this.addEventListener=function(b,c){a.listeners[b]=a.listeners[b]||[],a.listeners[b].push(c)},this.removeEventListener=function(b,c){a.listeners[b]&&a.listeners[b].splice(a.listeners[b].indexOf(c),1)},this.dispatchEvent=function(b){var c=a.listeners[b.type];if(c)for(var d=0;d<c.length;d++)c[d].call(a,b)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var c=function(b,c){var d={type:b,target:a,loaded:c.loaded,total:c.total,error:c.error};return null!=c.result&&(d.target.result=c.result),d},d=function(d){b||(b=!0,a.onloadstart&&a.onloadstart(c("loadstart",d)));var e;"load"===d.type?(a.onloadend&&a.onloadend(c("loadend",d)),e=c("load",d),a.onload&&a.onload(e),a.dispatchEvent(e)):"progress"===d.type?(e=c("progress",d),a.onprogress&&a.onprogress(e),a.dispatchEvent(e)):(e=c("error",d),a.onerror&&a.onerror(e),a.dispatchEvent(e))};this.readAsDataURL=function(a){FileAPI.readAsDataURL(a,d)},this.readAsText=function(a){FileAPI.readAsText(a,d)}});

(function(){var debug=false;var root=this;var EXIF=function(obj){if(obj instanceof EXIF)return obj;if(!(this instanceof EXIF))return new EXIF(obj);this.EXIFwrapped=obj;};if(typeof exports!=='undefined'){if(typeof module!=='undefined'&&module.exports){exports=module.exports=EXIF;}
exports.EXIF=EXIF;}else{root.EXIF=EXIF;}
var ExifTags=EXIF.Tags={0x9000:"ExifVersion",0xA000:"FlashpixVersion",0xA001:"ColorSpace",0xA002:"PixelXDimension",0xA003:"PixelYDimension",0x9101:"ComponentsConfiguration",0x9102:"CompressedBitsPerPixel",0x927C:"MakerNote",0x9286:"UserComment",0xA004:"RelatedSoundFile",0x9003:"DateTimeOriginal",0x9004:"DateTimeDigitized",0x9290:"SubsecTime",0x9291:"SubsecTimeOriginal",0x9292:"SubsecTimeDigitized",0x829A:"ExposureTime",0x829D:"FNumber",0x8822:"ExposureProgram",0x8824:"SpectralSensitivity",0x8827:"ISOSpeedRatings",0x8828:"OECF",0x9201:"ShutterSpeedValue",0x9202:"ApertureValue",0x9203:"BrightnessValue",0x9204:"ExposureBias",0x9205:"MaxApertureValue",0x9206:"SubjectDistance",0x9207:"MeteringMode",0x9208:"LightSource",0x9209:"Flash",0x9214:"SubjectArea",0x920A:"FocalLength",0xA20B:"FlashEnergy",0xA20C:"SpatialFrequencyResponse",0xA20E:"FocalPlaneXResolution",0xA20F:"FocalPlaneYResolution",0xA210:"FocalPlaneResolutionUnit",0xA214:"SubjectLocation",0xA215:"ExposureIndex",0xA217:"SensingMethod",0xA300:"FileSource",0xA301:"SceneType",0xA302:"CFAPattern",0xA401:"CustomRendered",0xA402:"ExposureMode",0xA403:"WhiteBalance",0xA404:"DigitalZoomRation",0xA405:"FocalLengthIn35mmFilm",0xA406:"SceneCaptureType",0xA407:"GainControl",0xA408:"Contrast",0xA409:"Saturation",0xA40A:"Sharpness",0xA40B:"DeviceSettingDescription",0xA40C:"SubjectDistanceRange",0xA005:"InteroperabilityIFDPointer",0xA420:"ImageUniqueID"};var TiffTags=EXIF.TiffTags={0x0100:"ImageWidth",0x0101:"ImageHeight",0x8769:"ExifIFDPointer",0x8825:"GPSInfoIFDPointer",0xA005:"InteroperabilityIFDPointer",0x0102:"BitsPerSample",0x0103:"Compression",0x0106:"PhotometricInterpretation",0x0112:"Orientation",0x0115:"SamplesPerPixel",0x011C:"PlanarConfiguration",0x0212:"YCbCrSubSampling",0x0213:"YCbCrPositioning",0x011A:"XResolution",0x011B:"YResolution",0x0128:"ResolutionUnit",0x0111:"StripOffsets",0x0116:"RowsPerStrip",0x0117:"StripByteCounts",0x0201:"JPEGInterchangeFormat",0x0202:"JPEGInterchangeFormatLength",0x012D:"TransferFunction",0x013E:"WhitePoint",0x013F:"PrimaryChromaticities",0x0211:"YCbCrCoefficients",0x0214:"ReferenceBlackWhite",0x0132:"DateTime",0x010E:"ImageDescription",0x010F:"Make",0x0110:"Model",0x0131:"Software",0x013B:"Artist",0x8298:"Copyright"};var GPSTags=EXIF.GPSTags={0x0000:"GPSVersionID",0x0001:"GPSLatitudeRef",0x0002:"GPSLatitude",0x0003:"GPSLongitudeRef",0x0004:"GPSLongitude",0x0005:"GPSAltitudeRef",0x0006:"GPSAltitude",0x0007:"GPSTimeStamp",0x0008:"GPSSatellites",0x0009:"GPSStatus",0x000A:"GPSMeasureMode",0x000B:"GPSDOP",0x000C:"GPSSpeedRef",0x000D:"GPSSpeed",0x000E:"GPSTrackRef",0x000F:"GPSTrack",0x0010:"GPSImgDirectionRef",0x0011:"GPSImgDirection",0x0012:"GPSMapDatum",0x0013:"GPSDestLatitudeRef",0x0014:"GPSDestLatitude",0x0015:"GPSDestLongitudeRef",0x0016:"GPSDestLongitude",0x0017:"GPSDestBearingRef",0x0018:"GPSDestBearing",0x0019:"GPSDestDistanceRef",0x001A:"GPSDestDistance",0x001B:"GPSProcessingMethod",0x001C:"GPSAreaInformation",0x001D:"GPSDateStamp",0x001E:"GPSDifferential"};var IFD1Tags=EXIF.IFD1Tags={0x0100:"ImageWidth",0x0101:"ImageHeight",0x0102:"BitsPerSample",0x0103:"Compression",0x0106:"PhotometricInterpretation",0x0111:"StripOffsets",0x0112:"Orientation",0x0115:"SamplesPerPixel",0x0116:"RowsPerStrip",0x0117:"StripByteCounts",0x011A:"XResolution",0x011B:"YResolution",0x011C:"PlanarConfiguration",0x0128:"ResolutionUnit",0x0201:"JpegIFOffset",0x0202:"JpegIFByteCount",0x0211:"YCbCrCoefficients",0x0212:"YCbCrSubSampling",0x0213:"YCbCrPositioning",0x0214:"ReferenceBlackWhite"};var StringValues=EXIF.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0x0000:"Flash did not fire",0x0001:"Flash fired",0x0005:"Strobe return light not detected",0x0007:"Strobe return light detected",0x0009:"Flash fired, compulsory flash mode",0x000D:"Flash fired, compulsory flash mode, return light not detected",0x000F:"Flash fired, compulsory flash mode, return light detected",0x0010:"Flash did not fire, compulsory flash mode",0x0018:"Flash did not fire, auto mode",0x0019:"Flash fired, auto mode",0x001D:"Flash fired, auto mode, return light not detected",0x001F:"Flash fired, auto mode, return light detected",0x0020:"No flash function",0x0041:"Flash fired, red-eye reduction mode",0x0045:"Flash fired, red-eye reduction mode, return light not detected",0x0047:"Flash fired, red-eye reduction mode, return light detected",0x0049:"Flash fired, compulsory flash mode, red-eye reduction mode",0x004D:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",0x004F:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",0x0059:"Flash fired, auto mode, red-eye reduction mode",0x005D:"Flash fired, auto mode, return light not detected, red-eye reduction mode",0x005F:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function addEvent(element,event,handler){if(element.addEventListener){element.addEventListener(event,handler,false);}else if(element.attachEvent){element.attachEvent("on"+event,handler);}}
function imageHasData(img){return!!(img.exifdata);}
function base64ToArrayBuffer(base64,contentType){contentType=contentType||base64.match(/^data\:([^\;]+)\;base64,/mi)[1]||'';base64=base64.replace(/^data\:([^\;]+)\;base64,/gmi,'');var binary=atob(base64);var len=binary.length;var buffer=new ArrayBuffer(len);var view=new Uint8Array(buffer);for(var i=0;i<len;i++){view[i]=binary.charCodeAt(i);}
return buffer;}
function objectURLToBlob(url,callback){var http=new XMLHttpRequest();http.open("GET",url,true);http.responseType="blob";http.onload=function(e){if(this.status==200||this.status===0){callback(this.response);}};http.send();}
function getImageData(img,callback){function handleBinaryFile(binFile){var data=findEXIFinJPEG(binFile);img.exifdata=data||{};var iptcdata=findIPTCinJPEG(binFile);img.iptcdata=iptcdata||{};if(EXIF.isXmpEnabled){var xmpdata=findXMPinJPEG(binFile);img.xmpdata=xmpdata||{};}
if(callback){callback.call(img);}}
if(img.src){if(/^data\:/i.test(img.src)){var arrayBuffer=base64ToArrayBuffer(img.src);handleBinaryFile(arrayBuffer);}else if(/^blob\:/i.test(img.src)){var fileReader=new FileReader();fileReader.onload=function(e){handleBinaryFile(e.target.result);};objectURLToBlob(img.src,function(blob){fileReader.readAsArrayBuffer(blob);});}else{var http=new XMLHttpRequest();http.onload=function(){if(this.status==200||this.status===0){handleBinaryFile(http.response);}else{throw"Could not load image";}
http=null;};http.open("GET",img.src,true);http.responseType="arraybuffer";http.send(null);}}else if(self.FileReader&&(img instanceof self.Blob||img instanceof self.File)){var fileReader=new FileReader();fileReader.onload=function(e){if(debug)console.log("Got file of length "+e.target.result.byteLength);handleBinaryFile(e.target.result);};fileReader.readAsArrayBuffer(img);}}
function findEXIFinJPEG(file){var dataView=new DataView(file);if(debug)console.log("Got file of length "+file.byteLength);if((dataView.getUint8(0)!=0xFF)||(dataView.getUint8(1)!=0xD8)){if(debug)console.log("Not a valid JPEG");return false;}
var offset=2,length=file.byteLength,marker;while(offset<length){if(dataView.getUint8(offset)!=0xFF){if(debug)console.log("Not a valid marker at offset "+offset+", found: "+dataView.getUint8(offset));return false;}
marker=dataView.getUint8(offset+1);if(debug)console.log(marker);if(marker==225){if(debug)console.log("Found 0xFFE1 marker");return readEXIFData(dataView,offset+4,dataView.getUint16(offset+2)-2);}else{offset+=2+dataView.getUint16(offset+2);}}}
function findIPTCinJPEG(file){var dataView=new DataView(file);if(debug)console.log("Got file of length "+file.byteLength);if((dataView.getUint8(0)!=0xFF)||(dataView.getUint8(1)!=0xD8)){if(debug)console.log("Not a valid JPEG");return false;}
var offset=2,length=file.byteLength;var isFieldSegmentStart=function(dataView,offset){return(dataView.getUint8(offset)===0x38&&dataView.getUint8(offset+1)===0x42&&dataView.getUint8(offset+2)===0x49&&dataView.getUint8(offset+3)===0x4D&&dataView.getUint8(offset+4)===0x04&&dataView.getUint8(offset+5)===0x04);};while(offset<length){if(isFieldSegmentStart(dataView,offset)){var nameHeaderLength=dataView.getUint8(offset+7);if(nameHeaderLength%2!==0)nameHeaderLength+=1;if(nameHeaderLength===0){nameHeaderLength=4;}
var startOffset=offset+8+nameHeaderLength;var sectionLength=dataView.getUint16(offset+6+nameHeaderLength);return readIPTCData(file,startOffset,sectionLength);break;}
offset++;}}
var IptcFieldMap={0x78:'caption',0x6E:'credit',0x19:'keywords',0x37:'dateCreated',0x50:'byline',0x55:'bylineTitle',0x7A:'captionWriter',0x69:'headline',0x74:'copyright',0x0F:'category'};function readIPTCData(file,startOffset,sectionLength){var dataView=new DataView(file);var data={};var fieldValue,fieldName,dataSize,segmentType,segmentSize;var segmentStartPos=startOffset;while(segmentStartPos<startOffset+sectionLength){if(dataView.getUint8(segmentStartPos)===0x1C&&dataView.getUint8(segmentStartPos+1)===0x02){segmentType=dataView.getUint8(segmentStartPos+2);if(segmentType in IptcFieldMap){dataSize=dataView.getInt16(segmentStartPos+3);segmentSize=dataSize+5;fieldName=IptcFieldMap[segmentType];fieldValue=getStringFromDB(dataView,segmentStartPos+5,dataSize);if(data.hasOwnProperty(fieldName)){if(data[fieldName]instanceof Array){data[fieldName].push(fieldValue);}
else{data[fieldName]=[data[fieldName],fieldValue];}}
else{data[fieldName]=fieldValue;}}}
segmentStartPos++;}
return data;}
function readTags(file,tiffStart,dirStart,strings,bigEnd){var entries=file.getUint16(dirStart,!bigEnd),tags={},entryOffset,tag,i;for(i=0;i<entries;i++){entryOffset=dirStart+i*12+2;tag=strings[file.getUint16(entryOffset,!bigEnd)];if(!tag&&debug)console.log("Unknown tag: "+file.getUint16(entryOffset,!bigEnd));tags[tag]=readTagValue(file,entryOffset,tiffStart,dirStart,bigEnd);}
return tags;}
function readTagValue(file,entryOffset,tiffStart,dirStart,bigEnd){var type=file.getUint16(entryOffset+2,!bigEnd),numValues=file.getUint32(entryOffset+4,!bigEnd),valueOffset=file.getUint32(entryOffset+8,!bigEnd)+tiffStart,offset,vals,val,n,numerator,denominator;switch(type){case 1:case 7:if(numValues==1){return file.getUint8(entryOffset+8,!bigEnd);}else{offset=numValues>4?valueOffset:(entryOffset+8);vals=[];for(n=0;n<numValues;n++){vals[n]=file.getUint8(offset+n);}
return vals;}
case 2:offset=numValues>4?valueOffset:(entryOffset+8);return getStringFromDB(file,offset,numValues-1);case 3:if(numValues==1){return file.getUint16(entryOffset+8,!bigEnd);}else{offset=numValues>2?valueOffset:(entryOffset+8);vals=[];for(n=0;n<numValues;n++){vals[n]=file.getUint16(offset+2*n,!bigEnd);}
return vals;}
case 4:if(numValues==1){return file.getUint32(entryOffset+8,!bigEnd);}else{vals=[];for(n=0;n<numValues;n++){vals[n]=file.getUint32(valueOffset+4*n,!bigEnd);}
return vals;}
case 5:if(numValues==1){numerator=file.getUint32(valueOffset,!bigEnd);denominator=file.getUint32(valueOffset+4,!bigEnd);val=new Number(numerator/denominator);val.numerator=numerator;val.denominator=denominator;return val;}else{vals=[];for(n=0;n<numValues;n++){numerator=file.getUint32(valueOffset+8*n,!bigEnd);denominator=file.getUint32(valueOffset+4+8*n,!bigEnd);vals[n]=new Number(numerator/denominator);vals[n].numerator=numerator;vals[n].denominator=denominator;}
return vals;}
case 9:if(numValues==1){return file.getInt32(entryOffset+8,!bigEnd);}else{vals=[];for(n=0;n<numValues;n++){vals[n]=file.getInt32(valueOffset+4*n,!bigEnd);}
return vals;}
case 10:if(numValues==1){return file.getInt32(valueOffset,!bigEnd)/file.getInt32(valueOffset+4,!bigEnd);}else{vals=[];for(n=0;n<numValues;n++){vals[n]=file.getInt32(valueOffset+8*n,!bigEnd)/file.getInt32(valueOffset+4+8*n,!bigEnd);}
return vals;}}}
function getNextIFDOffset(dataView,dirStart,bigEnd){var entries=dataView.getUint16(dirStart,!bigEnd);return dataView.getUint32(dirStart+2+entries*12,!bigEnd);}
function readThumbnailImage(dataView,tiffStart,firstIFDOffset,bigEnd){var IFD1OffsetPointer=getNextIFDOffset(dataView,tiffStart+firstIFDOffset,bigEnd);if(!IFD1OffsetPointer){return{};}
else if(IFD1OffsetPointer>dataView.byteLength){return{};}
var thumbTags=readTags(dataView,tiffStart,tiffStart+IFD1OffsetPointer,IFD1Tags,bigEnd)
if(thumbTags['Compression']){switch(thumbTags['Compression']){case 6:if(thumbTags.JpegIFOffset&&thumbTags.JpegIFByteCount){var tOffset=tiffStart+thumbTags.JpegIFOffset;var tLength=thumbTags.JpegIFByteCount;thumbTags['blob']=new Blob([new Uint8Array(dataView.buffer,tOffset,tLength)],{type:'image/jpeg'});}
break;case 1:console.log("Thumbnail image format is TIFF, which is not implemented.");break;default:console.log("Unknown thumbnail image format '%s'",thumbTags['Compression']);}}
else if(thumbTags['PhotometricInterpretation']==2){console.log("Thumbnail image format is RGB, which is not implemented.");}
return thumbTags;}
function getStringFromDB(buffer,start,length){var outstr="";for(n=start;n<start+length;n++){outstr+=String.fromCharCode(buffer.getUint8(n));}
return outstr;}
function readEXIFData(file,start){if(getStringFromDB(file,start,4)!="Exif"){if(debug)console.log("Not valid EXIF data! "+getStringFromDB(file,start,4));return false;}
var bigEnd,tags,tag,exifData,gpsData,tiffOffset=start+6;if(file.getUint16(tiffOffset)==0x4949){bigEnd=false;}else if(file.getUint16(tiffOffset)==0x4D4D){bigEnd=true;}else{if(debug)console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)");return false;}
if(file.getUint16(tiffOffset+2,!bigEnd)!=0x002A){if(debug)console.log("Not valid TIFF data! (no 0x002A)");return false;}
var firstIFDOffset=file.getUint32(tiffOffset+4,!bigEnd);if(firstIFDOffset<0x00000008){if(debug)console.log("Not valid TIFF data! (First offset less than 8)",file.getUint32(tiffOffset+4,!bigEnd));return false;}
tags=readTags(file,tiffOffset,tiffOffset+firstIFDOffset,TiffTags,bigEnd);if(tags.ExifIFDPointer){exifData=readTags(file,tiffOffset,tiffOffset+tags.ExifIFDPointer,ExifTags,bigEnd);for(tag in exifData){switch(tag){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":exifData[tag]=StringValues[tag][exifData[tag]];break;case"ExifVersion":case"FlashpixVersion":exifData[tag]=String.fromCharCode(exifData[tag][0],exifData[tag][1],exifData[tag][2],exifData[tag][3]);break;case"ComponentsConfiguration":exifData[tag]=StringValues.Components[exifData[tag][0]]+
StringValues.Components[exifData[tag][1]]+
StringValues.Components[exifData[tag][2]]+
StringValues.Components[exifData[tag][3]];break;}
tags[tag]=exifData[tag];}}
if(tags.GPSInfoIFDPointer){gpsData=readTags(file,tiffOffset,tiffOffset+tags.GPSInfoIFDPointer,GPSTags,bigEnd);for(tag in gpsData){switch(tag){case"GPSVersionID":gpsData[tag]=gpsData[tag][0]+"."+gpsData[tag][1]+"."+gpsData[tag][2]+"."+gpsData[tag][3];break;}
tags[tag]=gpsData[tag];}}
tags['thumbnail']=readThumbnailImage(file,tiffOffset,firstIFDOffset,bigEnd);return tags;}
function findXMPinJPEG(file){if(!('DOMParser'in self)){return;}
var dataView=new DataView(file);if(debug)console.log("Got file of length "+file.byteLength);if((dataView.getUint8(0)!=0xFF)||(dataView.getUint8(1)!=0xD8)){if(debug)console.log("Not a valid JPEG");return false;}
var offset=2,length=file.byteLength,dom=new DOMParser();while(offset<(length-4)){if(getStringFromDB(dataView,offset,4)=="http"){var startOffset=offset-1;var sectionLength=dataView.getUint16(offset-2)-1;var xmpString=getStringFromDB(dataView,startOffset,sectionLength)
var xmpEndIndex=xmpString.indexOf('xmpmeta>')+8;xmpString=xmpString.substring(xmpString.indexOf('<x:xmpmeta'),xmpEndIndex);var indexOfXmp=xmpString.indexOf('x:xmpmeta')+10
xmpString=xmpString.slice(0,indexOfXmp)
+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" '
+'xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '
+'xmlns:tiff="http://ns.adobe.com/tiff/1.0/" '
+'xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" '
+'xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" '
+'xmlns:exif="http://ns.adobe.com/exif/1.0/" '
+'xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" '
+'xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" '
+'xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" '
+'xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" '
+'xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '
+xmpString.slice(indexOfXmp)
var domDocument=dom.parseFromString(xmpString,'text/xml');return xml2Object(domDocument);}else{offset++;}}}
function xml2json(xml){var json={};if(xml.nodeType==1){if(xml.attributes.length>0){json['@attributes']={};for(var j=0;j<xml.attributes.length;j++){var attribute=xml.attributes.item(j);json['@attributes'][attribute.nodeName]=attribute.nodeValue;}}}else if(xml.nodeType==3){return xml.nodeValue;}
if(xml.hasChildNodes()){for(var i=0;i<xml.childNodes.length;i++){var child=xml.childNodes.item(i);var nodeName=child.nodeName;if(json[nodeName]==null){json[nodeName]=xml2json(child);}else{if(json[nodeName].push==null){var old=json[nodeName];json[nodeName]=[];json[nodeName].push(old);}
json[nodeName].push(xml2json(child));}}}
return json;}
function xml2Object(xml){try{var obj={};if(xml.children.length>0){for(var i=0;i<xml.children.length;i++){var item=xml.children.item(i);var attributes=item.attributes;for(var idx in attributes){var itemAtt=attributes[idx];var dataKey=itemAtt.nodeName;var dataValue=itemAtt.nodeValue;if(dataKey!==undefined){obj[dataKey]=dataValue;}}
var nodeName=item.nodeName;if(typeof(obj[nodeName])=="undefined"){obj[nodeName]=xml2json(item);}else{if(typeof(obj[nodeName].push)=="undefined"){var old=obj[nodeName];obj[nodeName]=[];obj[nodeName].push(old);}
obj[nodeName].push(xml2json(item));}}}else{obj=xml.textContent;}
return obj;}catch(e){console.log(e.message);}}
EXIF.enableXmp=function(){EXIF.isXmpEnabled=true;}
EXIF.disableXmp=function(){EXIF.isXmpEnabled=false;}
EXIF.getData=function(img,callback){if(((self.Image&&img instanceof self.Image)||(self.HTMLImageElement&&img instanceof self.HTMLImageElement))&&!img.complete)
return false;if(!imageHasData(img)){getImageData(img,callback);}else{if(callback){callback.call(img);}}
return true;}
EXIF.getTag=function(img,tag){if(!imageHasData(img))return;return img.exifdata[tag];}
EXIF.getIptcTag=function(img,tag){if(!imageHasData(img))return;return img.iptcdata[tag];}
EXIF.getAllTags=function(img){if(!imageHasData(img))return{};var a,data=img.exifdata,tags={};for(a in data){if(data.hasOwnProperty(a)){tags[a]=data[a];}}
return tags;}
EXIF.getAllIptcTags=function(img){if(!imageHasData(img))return{};var a,data=img.iptcdata,tags={};for(a in data){if(data.hasOwnProperty(a)){tags[a]=data[a];}}
return tags;}
EXIF.pretty=function(img){if(!imageHasData(img))return"";var a,data=img.exifdata,strPretty="";for(a in data){if(data.hasOwnProperty(a)){if(typeof data[a]=="object"){if(data[a]instanceof Number){strPretty+=a+" : "+data[a]+" ["+data[a].numerator+"/"+data[a].denominator+"]\r\n";}else{strPretty+=a+" : ["+data[a].length+" values]\r\n";}}else{strPretty+=a+" : "+data[a]+"\r\n";}}}
return strPretty;}
EXIF.readFromBinaryFile=function(file){return findEXIFinJPEG(file);}
if(typeof define==='function'&&define.amd){define('exif-js',[],function(){return EXIF;});}}.call(this));

angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.debounce","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["uib/template/accordion/accordion-group.html","uib/template/accordion/accordion.html","uib/template/alert/alert.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html","uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/popup.html","uib/template/datepicker/year.html","uib/template/modal/backdrop.html","uib/template/modal/window.html","uib/template/pager/pager.html","uib/template/pagination/pagination.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/progressbar/bar.html","uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html","uib/template/rating/rating.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/timepicker/timepicker.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$injector",function(a,b){var c=b.has("$animateCss")?b.get("$animateCss"):null;return{link:function(b,d,e){function f(){d.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),c?c(d,{addClass:"in",easing:"ease",to:{height:d[0].scrollHeight+"px"}}).start()["finally"](g):a.addClass(d,"in",{to:{height:d[0].scrollHeight+"px"}}).then(g)}function g(){d.removeClass("collapsing").addClass("collapse").css({height:"auto"})}function h(){return d.hasClass("collapse")||d.hasClass("in")?(d.css({height:d[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),void(c?c(d,{removeClass:"in",to:{height:"0"}}).start()["finally"](i):a.removeClass(d,"in",{to:{height:"0"}}).then(i))):i()}function i(){d.css({height:"0"}),d.removeClass("collapsing").addClass("collapse")}b.$eval(e.uibCollapse)||d.addClass("in").addClass("collapse").css({height:"auto"}),b.$watch(e.uibCollapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(c){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(b,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){d.addGroup(a),a.openClass=c.openClass||"panel-open",a.panelClass=c.panelClass||"panel-default",a.$watch("isOpen",function(c){b.toggleClass(a.openClass,!!c),c&&d.closeOthers(a)}),a.toggleOpen=function(b){a.isDisabled||b&&32!==b.which||(a.isOpen=!a.isOpen)}}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,angular.noop))}}}).directive("uibAccordionTransclude",function(){return{require:"^uibAccordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.uibAccordionTransclude]},function(a){a&&(b.find("span").html(""),b.find("span").append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$attrs","$interpolate","$timeout",function(a,b,c,d){a.closeable=!!b.close;var e=angular.isDefined(b.dismissOnTimeout)?c(b.dismissOnTimeout)(a.$parent):null;e&&d(function(){a.close()},parseInt(e,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",templateUrl:function(a,b){return b.templateUrl||"uib/template/alert/alert.html"},transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function(a){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(b,c,d,e){var f=e[0],g=e[1],h=a(d.uibUncheckable);c.find("input").css({display:"none"}),g.$render=function(){c.toggleClass(f.activeClass,angular.equals(g.$modelValue,b.$eval(d.uibBtnRadio)))},c.on(f.toggleEvent,function(){if(!d.disabled){var a=c.hasClass(f.activeClass);(!a||angular.isDefined(d.uncheckable))&&b.$apply(function(){g.$setViewValue(a?null:b.$eval(d.uibBtnRadio)),g.$render()})}}),d.uibUncheckable&&b.$watch(h,function(a){d.$set("uncheckable",a?"":null)})}}}]).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){return angular.isDefined(b)?a.$eval(b):c}var h=d[0],i=d[1];b.find("input").css({display:"none"}),i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.on(h.toggleEvent,function(){c.disabled||a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function(a,b,c,d,e){function f(){for(;s.length;)s.shift()}function g(a){if(angular.isUndefined(p[a].index))return p[a];for(var b=0,c=p.length;c>b;++b)if(p[b].index===a)return p[b]}function h(c,d,g){t||(angular.extend(c,{direction:g,active:!0}),angular.extend(o.currentSlide||{},{direction:g,active:!1}),e.enabled(b)&&!a.$currentTransition&&c.$element&&o.slides.length>1&&(c.$element.data(q,c.direction),o.currentSlide&&o.currentSlide.$element&&o.currentSlide.$element.data(q,c.direction),a.$currentTransition=!0,e.on("addClass",c.$element,function(b,c){if("close"===c&&(a.$currentTransition=null,e.off("addClass",b),s.length)){var d=s.pop(),g=a.indexOfSlide(d),i=g>o.getCurrentIndex()?"next":"prev";f(),h(d,g,i)}})),o.currentSlide=c,r=d,k())}function i(){m&&(c.cancel(m),m=null)}function j(b){b.length||(a.$currentTransition=null,f())}function k(){i();var b=+a.interval;!isNaN(b)&&b>0&&(m=c(l,b))}function l(){var b=+a.interval;n&&!isNaN(b)&&b>0&&p.length?a.next():a.pause()}var m,n,o=this,p=o.slides=a.slides=[],q="uib-slideDirection",r=-1,s=[];o.currentSlide=null;var t=!1;o.addSlide=function(b,c){b.$element=c,p.push(b),1===p.length||b.active?(a.$currentTransition&&(a.$currentTransition=null),o.select(p[p.length-1]),1===p.length&&a.play()):b.active=!1},o.getCurrentIndex=function(){return o.currentSlide&&angular.isDefined(o.currentSlide.index)?+o.currentSlide.index:r},o.next=a.next=function(){var b=(o.getCurrentIndex()+1)%p.length;return 0===b&&a.noWrap()?void a.pause():o.select(g(b),"next")},o.prev=a.prev=function(){var b=o.getCurrentIndex()-1<0?p.length-1:o.getCurrentIndex()-1;return a.noWrap()&&b===p.length-1?void a.pause():o.select(g(b),"prev")},o.removeSlide=function(a){angular.isDefined(a.index)&&p.sort(function(a,b){return+a.index>+b.index});var b=s.indexOf(a);-1!==b&&s.splice(b,1);var c=p.indexOf(a);p.splice(c,1),d(function(){p.length>0&&a.active?c>=p.length?o.select(p[c-1]):o.select(p[c]):r>c&&r--}),0===p.length&&(o.currentSlide=null,f())},o.select=a.select=function(b,c){var d=a.indexOfSlide(b);void 0===c&&(c=d>o.getCurrentIndex()?"next":"prev"),b&&b!==o.currentSlide&&!a.$currentTransition?h(b,d,c):b&&b!==o.currentSlide&&a.$currentTransition&&(s.push(b),b.active=!1)},a.indexOfSlide=function(a){return angular.isDefined(a.index)?+a.index:p.indexOf(a)},a.isActive=function(a){return o.currentSlide===a},a.pause=function(){a.noPause||(n=!1,i())},a.play=function(){n||(n=!0,k())},a.$on("$destroy",function(){t=!0,i()}),a.$watch("noTransition",function(a){e.enabled(b,!a)}),a.$watch("interval",k),a.$watchCollection("slides",j)}]).directive("uibCarousel",function(){return{transclude:!0,replace:!0,controller:"UibCarouselController",controllerAs:"carousel",templateUrl:function(a,b){return b.templateUrl||"uib/template/carousel/carousel.html"},scope:{interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",function(){return{require:"^uibCarousel",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/carousel/slide.html"},scope:{active:"=?",actual:"=?",index:"=?"},link:function(a,b,c,d){d.addSlide(a,b),a.$on("$destroy",function(){d.removeSlide(a)}),a.$watch("active",function(b){b&&d.select(a)})}}}).animation(".item",["$animateCss",function(a){function b(a,b,c){a.removeClass(b),c&&c()}var c="uib-slideDirection";return{beforeAddClass:function(d,e,f){if("active"===e){var g=!1,h=d.data(c),i="next"===h?"left":"right",j=b.bind(this,d,i+" "+h,f);return d.addClass(h),a(d,{addClass:i}).start().done(j),function(){g=!0}}f()},beforeRemoveClass:function(d,e,f){if("active"===e){var g=!1,h=d.data(c),i="next"===h?"left":"right",j=b.bind(this,d,i,f);return a(d,{addClass:i}).start().done(j),function(){g=!0}}f()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","orderByFilter",function(a,b,c){function d(a){var b=[],d=a.split(""),e=a.indexOf("'");if(e>-1){var f=!1;a=a.split("");for(var g=e;g<a.length;g++)f?("'"===a[g]&&(g+1<a.length&&"'"===a[g+1]?(a[g+1]="$",d[g+1]=""):(d[g]="",f=!1)),a[g]="$"):"'"===a[g]&&(a[g]="$",d[g]="",f=!0);a=a.join("")}return angular.forEach(m,function(c){var e=a.indexOf(c.key);if(e>-1){a=a.split(""),d[e]="("+c.regex+")",a[e]="$";for(var f=e+1,g=e+c.key.length;g>f;f++)d[f]="",a[f]="$";a=a.join(""),b.push({index:e,apply:c.apply,matcher:c.regex})}}),{regex:new RegExp("^"+d.join("")+"$"),map:c(b,"index")}}function e(a,b,c){return 1>c?!1:1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3===b||5===b||8===b||10===b?31>c:!0}function f(a){return parseInt(a,10)}function g(a,b){return a&&b?k(a,b):a}function h(a,b){return a&&b?k(a,b,!0):a}function i(a,b){var c=Date.parse("Jan 01, 1970 00:00:00 "+a)/6e4;return isNaN(c)?b:c}function j(a,b){return a=new Date(a.getTime()),a.setMinutes(a.getMinutes()+b),a}function k(a,b,c){c=c?-1:1;var d=i(b,a.getTimezoneOffset());return j(a,c*(d-a.getTimezoneOffset()))}var l,m,n=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.init=function(){l=b.id,this.parsers={},m=[{key:"yyyy",regex:"\\d{4}",apply:function(a){this.year=+a}},{key:"yy",regex:"\\d{2}",apply:function(a){this.year=+a+2e3}},{key:"y",regex:"\\d{1,4}",apply:function(a){this.year=+a}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(a){this.month=a-1}},{key:"MMMM",regex:b.DATETIME_FORMATS.MONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.MONTH.indexOf(a)}},{key:"MMM",regex:b.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(a){this.month=b.DATETIME_FORMATS.SHORTMONTH.indexOf(a)}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},{key:"EEEE",regex:b.DATETIME_FORMATS.DAY.join("|")},{key:"EEE",regex:b.DATETIME_FORMATS.SHORTDAY.join("|")},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(a){this.hours=+a}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(a){this.hours=+a}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(a){this.hours=+a}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(a){this.hours=+a}},{key:"mm",regex:"[0-5][0-9]",apply:function(a){this.minutes=+a}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(a){this.minutes=+a}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(a){this.milliseconds=+a}},{key:"ss",regex:"[0-5][0-9]",apply:function(a){this.seconds=+a}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(a){this.seconds=+a}},{key:"a",regex:b.DATETIME_FORMATS.AMPMS.join("|"),apply:function(a){12===this.hours&&(this.hours=0),"PM"===a&&(this.hours+=12)}},{key:"Z",regex:"[+-]\\d{4}",apply:function(a){var b=a.match(/([+-])(\d{2})(\d{2})/),c=b[1],d=b[2],e=b[3];this.hours+=f(c+d),this.minutes+=f(c+e)}},{key:"ww",regex:"[0-4][0-9]|5[0-3]"},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]"},{key:"GGGG",regex:b.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s")},{key:"GGG",regex:b.DATETIME_FORMATS.ERAS.join("|")},{key:"GG",regex:b.DATETIME_FORMATS.ERAS.join("|")},{key:"G",regex:b.DATETIME_FORMATS.ERAS.join("|")}]},this.init(),this.parse=function(c,f,g){if(!angular.isString(c)||!f)return c;f=b.DATETIME_FORMATS[f]||f,f=f.replace(n,"\\$&"),b.id!==l&&this.init(),this.parsers[f]||(this.parsers[f]=d(f));var h=this.parsers[f],i=h.regex,j=h.map,k=c.match(i),m=!1;if(k&&k.length){var o,p;angular.isDate(g)&&!isNaN(g.getTime())?o={year:g.getFullYear(),month:g.getMonth(),date:g.getDate(),hours:g.getHours(),minutes:g.getMinutes(),seconds:g.getSeconds(),milliseconds:g.getMilliseconds()}:(g&&a.warn("dateparser:","baseDate is not a valid date"),o={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var q=1,r=k.length;r>q;q++){var s=j[q-1];"Z"===s.matcher&&(m=!0),s.apply&&s.apply.call(o,k[q])}var t=m?Date.prototype.setUTCFullYear:Date.prototype.setFullYear,u=m?Date.prototype.setUTCHours:Date.prototype.setHours;return e(o.year,o.month,o.date)&&(!angular.isDate(g)||isNaN(g.getTime())||m?(p=new Date(0),t.call(p,o.year,o.month,o.date),u.call(p,o.hours||0,o.minutes||0,o.seconds||0,o.milliseconds||0)):(p=new Date(g),t.call(p,o.year,o.month,o.date),u.call(p,o.hours,o.minutes,o.seconds,o.milliseconds))),p}},this.toTimezone=g,this.fromTimezone=h,this.timezoneToOffset=i,this.addDateMinutes=j,this.convertTimezoneToLocal=k}]),angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function(a){var b=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/,c=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;return{restrict:"A",compile:function(d,e){function f(a,b,c){i.push(a),j.push({scope:a,element:b}),o.forEach(function(b,c){g(b,a)}),a.$on("$destroy",h)}function g(b,d){var e=b.match(c),f=d.$eval(e[1]),g=e[2],h=k[b];if(!h){var i=function(b){var c=null;j.some(function(a){var d=a.scope.$eval(m);return d===b?(c=a,!0):void 0}),h.lastActivated!==c&&(h.lastActivated&&a.removeClass(h.lastActivated.element,f),c&&a.addClass(c.element,f),h.lastActivated=c)};k[b]=h={lastActivated:null,scope:d,watchFn:i,compareWithExp:g,watcher:d.$watch(g,i)}}h.watchFn(d.$eval(g))}function h(a){var b=a.targetScope,c=i.indexOf(b);if(i.splice(c,1),j.splice(c,1),i.length){var d=i[0];angular.forEach(k,function(a){a.scope===b&&(a.watcher=d.$watch(a.compareWithExp,a.watchFn),a.scope=d)})}else k={}}var i=[],j=[],k={},l=e.uibIsClass.match(b),m=l[2],n=l[1],o=n.split(",");return f}}}]),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(a,b){var c,d={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},e={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/};return{getRawNode:function(a){return a[0]||a},parseStyle:function(a){return a=parseFloat(a),isFinite(a)?a:0},offsetParent:function(c){function d(a){return"static"===(b.getComputedStyle(a).position||"static")}c=this.getRawNode(c);for(var e=c.offsetParent||a[0].documentElement;e&&e!==a[0].documentElement&&d(e);)e=e.offsetParent;return e||a[0].documentElement},scrollbarWidth:function(){if(angular.isUndefined(c)){var b=angular.element('<div style="position: absolute; top: -9999px; width: 50px; height: 50px; overflow: scroll;"></div>');a.find("body").append(b),c=b[0].offsetWidth-b[0].clientWidth,c=isFinite(c)?c:0,b.remove()}return c},scrollParent:function(c,e){c=this.getRawNode(c);var f=e?d.hidden:d.normal,g=a[0].documentElement,h=b.getComputedStyle(c),i="absolute"===h.position,j=c.parentElement||g;if(j===g||"fixed"===h.position)return g;for(;j.parentElement&&j!==g;){var k=b.getComputedStyle(j);if(i&&"static"!==k.position&&(i=!1),!i&&f.test(k.overflow+k.overflowY+k.overflowX))break;j=j.parentElement}return j},position:function(c,d){c=this.getRawNode(c);var e=this.offset(c);if(d){var f=b.getComputedStyle(c);e.top-=this.parseStyle(f.marginTop),e.left-=this.parseStyle(f.marginLeft)}var g=this.offsetParent(c),h={top:0,left:0};return g!==a[0].documentElement&&(h=this.offset(g),h.top+=g.clientTop-g.scrollTop,h.left+=g.clientLeft-g.scrollLeft),{width:Math.round(angular.isNumber(e.width)?e.width:c.offsetWidth),height:Math.round(angular.isNumber(e.height)?e.height:c.offsetHeight),top:Math.round(e.top-h.top),left:Math.round(e.left-h.left)}},offset:function(c){c=this.getRawNode(c);var d=c.getBoundingClientRect();return{width:Math.round(angular.isNumber(d.width)?d.width:c.offsetWidth),height:Math.round(angular.isNumber(d.height)?d.height:c.offsetHeight),top:Math.round(d.top+(b.pageYOffset||a[0].documentElement.scrollTop)),left:Math.round(d.left+(b.pageXOffset||a[0].documentElement.scrollLeft))}},viewportOffset:function(c,d,e){c=this.getRawNode(c),e=e!==!1?!0:!1;var f=c.getBoundingClientRect(),g={top:0,left:0,bottom:0,right:0},h=d?a[0].documentElement:this.scrollParent(c),i=h.getBoundingClientRect();if(g.top=i.top+h.clientTop,g.left=i.left+h.clientLeft,h===a[0].documentElement&&(g.top+=b.pageYOffset,g.left+=b.pageXOffset),g.bottom=g.top+h.clientHeight,g.right=g.left+h.clientWidth,e){var j=b.getComputedStyle(h);g.top+=this.parseStyle(j.paddingTop),g.bottom-=this.parseStyle(j.paddingBottom),g.left+=this.parseStyle(j.paddingLeft),g.right-=this.parseStyle(j.paddingRight)}return{top:Math.round(f.top-g.top),bottom:Math.round(g.bottom-f.bottom),left:Math.round(f.left-g.left),right:Math.round(g.right-f.right)}},parsePlacement:function(a){var b=e.auto.test(a);return b&&(a=a.replace(e.auto,"")),a=a.split("-"),a[0]=a[0]||"top",e.primary.test(a[0])||(a[0]="top"),a[1]=a[1]||"center",e.secondary.test(a[1])||(a[1]="center"),b?a[2]=!0:a[2]=!1,a},positionElements:function(a,c,d,f){a=this.getRawNode(a),c=this.getRawNode(c);var g=angular.isDefined(c.offsetWidth)?c.offsetWidth:c.prop("offsetWidth"),h=angular.isDefined(c.offsetHeight)?c.offsetHeight:c.prop("offsetHeight");d=this.parsePlacement(d);var i=f?this.offset(a):this.position(a),j={top:0,left:0,placement:""};if(d[2]){var k=this.viewportOffset(a),l=b.getComputedStyle(c),m={width:g+Math.round(Math.abs(this.parseStyle(l.marginLeft)+this.parseStyle(l.marginRight))),height:h+Math.round(Math.abs(this.parseStyle(l.marginTop)+this.parseStyle(l.marginBottom)))};if(d[0]="top"===d[0]&&m.height>k.top&&m.height<=k.bottom?"bottom":"bottom"===d[0]&&m.height>k.bottom&&m.height<=k.top?"top":"left"===d[0]&&m.width>k.left&&m.width<=k.right?"right":"right"===d[0]&&m.width>k.right&&m.width<=k.left?"left":d[0],d[1]="top"===d[1]&&m.height-i.height>k.bottom&&m.height-i.height<=k.top?"bottom":"bottom"===d[1]&&m.height-i.height>k.top&&m.height-i.height<=k.bottom?"top":"left"===d[1]&&m.width-i.width>k.right&&m.width-i.width<=k.left?"right":"right"===d[1]&&m.width-i.width>k.left&&m.width-i.width<=k.right?"left":d[1],"center"===d[1])if(e.vertical.test(d[0])){var n=i.width/2-g/2;k.left+n<0&&m.width-i.width<=k.right?d[1]="left":k.right+n<0&&m.width-i.width<=k.left&&(d[1]="right")}else{var o=i.height/2-m.height/2;k.top+o<0&&m.height-i.height<=k.bottom?d[1]="top":k.bottom+o<0&&m.height-i.height<=k.top&&(d[1]="bottom")}}switch(d[0]){case"top":j.top=i.top-h;break;case"bottom":j.top=i.top+i.height;break;case"left":j.left=i.left-g;break;case"right":j.left=i.left+i.width}switch(d[1]){case"top":j.top=i.top;break;case"bottom":j.top=i.top+i.height-h;break;case"left":j.left=i.left;break;case"right":j.left=i.left+i.width-g;break;case"center":e.vertical.test(d[0])?j.left=i.left+i.width/2-g/2:j.top=i.top+i.height/2-h/2}return j.top=Math.round(j.top),j.left=Math.round(j.left),j.placement="center"===d[1]?d[0]:d[0]+"-"+d[1],j},positionArrow:function(a,c){a=this.getRawNode(a);var d=!0,f=a.querySelector(".tooltip-inner");if(f||(d=!1,f=a.querySelector(".popover-inner")),f){var g=d?a.querySelector(".tooltip-arrow"):a.querySelector(".arrow");if(g){if(c=this.parsePlacement(c),"center"===c[1])return void angular.element(g).css({top:"",bottom:"",right:"",left:"",margin:""});var h="border-"+c[0]+"-width",i=b.getComputedStyle(g)[h],j="border-";j+=e.vertical.test(c[0])?c[0]+"-"+c[1]:c[1]+"-"+c[0],j+="-radius";var k=b.getComputedStyle(d?f:a)[j],l={top:"auto",bottom:"auto",left:"auto",right:"auto",margin:0};switch(c[0]){case"top":l.bottom=d?"0":"-"+i;break;case"bottom":l.top=d?"0":"-"+i;break;case"left":l.right=d?"0":"-"+i;break;case"right":l.left=d?"0":"-"+i}l[c[1]]=k,angular.element(g).css(l)}}}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.position"]).value("$datepickerSuppressError",!1).constant("uibDatepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRows:4,yearColumns:5,minDate:null,maxDate:null,shortcutPropagation:!1,ngModelOptions:{}}).controller("UibDatepickerController",["$scope","$attrs","$parse","$interpolate","$log","dateFilter","uibDatepickerConfig","$datepickerSuppressError","uibDateParser",function(a,b,c,d,e,f,g,h,i){var j=this,k={$setViewValue:angular.noop},l={};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle"],function(c){j[c]=angular.isDefined(b[c])?d(b[c])(a.$parent):g[c]}),angular.forEach(["showWeeks","startingDay","yearRows","yearColumns","shortcutPropagation"],function(c){j[c]=angular.isDefined(b[c])?a.$parent.$eval(b[c]):g[c]}),angular.forEach(["minDate","maxDate"],function(c){b[c]?a.$parent.$watch(b[c],function(a){j[c]=a?angular.isDate(a)?i.fromTimezone(new Date(a),l.timezone):new Date(f(a,"medium")):null,j.refreshView()}):j[c]=g[c]?i.fromTimezone(new Date(g[c]),l.timezone):null}),angular.forEach(["minMode","maxMode"],function(c){b[c]?a.$parent.$watch(b[c],function(d){j[c]=a[c]=angular.isDefined(d)?d:b[c],("minMode"===c&&j.modes.indexOf(a.datepickerMode)<j.modes.indexOf(j[c])||"maxMode"===c&&j.modes.indexOf(a.datepickerMode)>j.modes.indexOf(j[c]))&&(a.datepickerMode=j[c])}):j[c]=a[c]=g[c]||null}),a.datepickerMode=a.datepickerMode||g.datepickerMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),angular.isDefined(b.initDate)?(this.activeDate=i.fromTimezone(a.$parent.$eval(b.initDate),l.timezone)||new Date,a.$parent.$watch(b.initDate,function(a){a&&(k.$isEmpty(k.$modelValue)||k.$invalid)&&(j.activeDate=i.fromTimezone(a,l.timezone),j.refreshView())})):this.activeDate=new Date,a.disabled=angular.isDefined(b.disabled)||!1,angular.isDefined(b.ngDisabled)&&a.$parent.$watch(b.ngDisabled,function(b){a.disabled=b,j.refreshView()}),a.isActive=function(b){return 0===j.compare(b.date,j.activeDate)?(a.activeDateId=b.uid,!0):!1},this.init=function(a){k=a,l=a.$options||g.ngModelOptions,k.$modelValue&&(this.activeDate=k.$modelValue),k.$render=function(){j.render()}},this.render=function(){if(k.$viewValue){var a=new Date(k.$viewValue),b=!isNaN(a);b?this.activeDate=i.fromTimezone(a,l.timezone):h||e.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){if(this.element){a.selectedDt=null,this._refreshView(),a.activeDt&&(a.activeDateId=a.activeDt.uid);var b=k.$viewValue?new Date(k.$viewValue):null;b=i.fromTimezone(b,l.timezone),k.$setValidity("dateDisabled",!b||this.element&&!this.isDisabled(b))}},this.createDateObject=function(b,c){var d=k.$viewValue?new Date(k.$viewValue):null;d=i.fromTimezone(d,l.timezone);var e={date:b,label:f(b,c.replace(/d!/,"dd")).replace(/M!/,"MM"),selected:d&&0===this.compare(b,d),disabled:this.isDisabled(b),current:0===this.compare(b,new Date),customClass:this.customClass(b)||null};return d&&0===this.compare(b,d)&&(a.selectedDt=e),j.activeDate&&0===this.compare(e.date,j.activeDate)&&(a.activeDt=e),e},this.isDisabled=function(c){return a.disabled||this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.customClass=function(b){return a.customClass({date:b,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===j.minMode){var c=k.$viewValue?i.fromTimezone(new Date(k.$viewValue),l.timezone):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),c=i.toTimezone(c,l.timezone),k.$setViewValue(c),k.$render()}else j.activeDate=b,a.datepickerMode=j.modes[j.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=j.activeDate.getFullYear()+a*(j.step.years||0),c=j.activeDate.getMonth()+a*(j.step.months||0);j.activeDate.setFullYear(b,c,1),j.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===j.maxMode&&1===b||a.datepickerMode===j.minMode&&-1===b||(a.datepickerMode=j.modes[j.modes.indexOf(a.datepickerMode)+b])},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var m=function(){j.element[0].focus()};a.$on("uib:datepicker.focus",m),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey&&!a.disabled)if(b.preventDefault(),j.shortcutPropagation||b.stopPropagation(),"enter"===c||"space"===c){if(j.isDisabled(j.activeDate))return;a.select(j.activeDate)}else!b.ctrlKey||"up"!==c&&"down"!==c?(j.handleKeyDown(c,b),j.refreshView()):a.toggleMode("up"===c?1:-1)}}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(a,b,c){function d(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?f[b]:29}function e(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}var f=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=b,this.init=function(b){angular.extend(b,this),a.showWeeks=b.showWeeks,b.refreshView()},this.getDates=function(a,b){for(var c,d=new Array(b),e=new Date(a),f=0;b>f;)c=new Date(e),d[f++]=c,e.setDate(e.getDate()+1);return d},this._refreshView=function(){var b=this.activeDate.getFullYear(),d=this.activeDate.getMonth(),f=new Date(this.activeDate);f.setFullYear(b,d,1);var g=this.startingDay-f.getDay(),h=g>0?7-g:-g,i=new Date(f);h>0&&i.setDate(-h+1);for(var j=this.getDates(i,42),k=0;42>k;k++)j[k]=angular.extend(this.createDateObject(j[k],this.formatDay),{secondary:j[k].getMonth()!==d,uid:a.uniqueId+"-"+k});a.labels=new Array(7);for(var l=0;7>l;l++)a.labels[l]={abbr:c(j[l].date,this.formatDayHeader),full:c(j[l].date,"EEEE")};if(a.title=c(this.activeDate,this.formatDayTitle),a.rows=this.split(j,7),a.showWeeks){a.weekNumbers=[];for(var m=(11-this.startingDay)%7,n=a.rows.length,o=0;n>o;o++)a.weekNumbers.push(e(a.rows[o][m].date))}},this.compare=function(a,b){var c=new Date(a.getFullYear(),a.getMonth(),a.getDate()),d=new Date(b.getFullYear(),b.getMonth(),b.getDate());return c.setFullYear(a.getFullYear()),d.setFullYear(b.getFullYear()),c-d},this.handleKeyDown=function(a,b){var c=this.activeDate.getDate();if("left"===a)c-=1;else if("up"===a)c-=7;else if("right"===a)c+=1;else if("down"===a)c+=7;else if("pageup"===a||"pagedown"===a){var e=this.activeDate.getMonth()+("pageup"===a?-1:1);this.activeDate.setMonth(e,1),c=Math.min(d(this.activeDate.getFullYear(),this.activeDate.getMonth()),c)}else"home"===a?c=1:"end"===a&&(c=d(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(c)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(a,b,c){this.step={years:1},this.element=b,this.init=function(a){angular.extend(a,this),a.refreshView()},this._refreshView=function(){for(var b,d=new Array(12),e=this.activeDate.getFullYear(),f=0;12>f;f++)b=new Date(this.activeDate),b.setFullYear(e,f,1),d[f]=angular.extend(this.createDateObject(b,this.formatMonth),{uid:a.uniqueId+"-"+f});a.title=c(this.activeDate,this.formatMonthTitle),a.rows=this.split(d,3)},this.compare=function(a,b){var c=new Date(a.getFullYear(),a.getMonth()),d=new Date(b.getFullYear(),b.getMonth());return c.setFullYear(a.getFullYear()),d.setFullYear(b.getFullYear()),c-d},this.handleKeyDown=function(a,b){var c=this.activeDate.getMonth();if("left"===a)c-=1;else if("up"===a)c-=3;else if("right"===a)c+=1;else if("down"===a)c+=3;else if("pageup"===a||"pagedown"===a){var d=this.activeDate.getFullYear()+("pageup"===a?-1:1);this.activeDate.setFullYear(d)}else"home"===a?c=0:"end"===a&&(c=11);this.activeDate.setMonth(c)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(a,b,c){function d(a){return parseInt((a-1)/f,10)*f+1}var e,f;this.element=b,this.yearpickerInit=function(){e=this.yearColumns,f=this.yearRows*e,this.step={years:f}},this._refreshView=function(){for(var b,c=new Array(f),g=0,h=d(this.activeDate.getFullYear());f>g;g++)b=new Date(this.activeDate),b.setFullYear(h+g,0,1),c[g]=angular.extend(this.createDateObject(b,this.formatYear),{uid:a.uniqueId+"-"+g});a.title=[c[0].label,c[f-1].label].join(" - "),a.rows=this.split(c,e),a.columns=e},this.compare=function(a,b){return a.getFullYear()-b.getFullYear()},this.handleKeyDown=function(a,b){var c=this.activeDate.getFullYear();"left"===a?c-=1:"up"===a?c-=e:"right"===a?c+=1:"down"===a?c+=e:"pageup"===a||"pagedown"===a?c+=("pageup"===a?-1:1)*f:"home"===a?c=d(this.activeDate.getFullYear()):"end"===a&&(c=d(this.activeDate.getFullYear())+f-1),this.activeDate.setFullYear(c)}}]).directive("uibDatepicker",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerMode:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["uibDatepicker","^ngModel"],controller:"UibDatepickerController",controllerAs:"datepicker",link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}).directive("uibDaypicker",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],controller:"UibDaypickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibMonthpicker",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],controller:"UibMonthpickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibYearpicker",function(){return{replace:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],controller:"UibYearpickerController",link:function(a,b,c,d){var e=d[0];angular.extend(e,d[1]),e.yearpickerInit(),e.refreshView()}}}).constant("uibDatepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepicker/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0,onOpenFocus:!0,altInputFormats:[]}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$parse","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function o(b){var c=j.parse(b,t,a.date);if(isNaN(c))for(var d=0;d<E.length;d++)if(c=j.parse(b,E[d],a.date),!isNaN(c))return c;return c}function p(a){if(angular.isNumber(a)&&(a=new Date(a)),!a)return null;if(angular.isDate(a)&&!isNaN(a))return a;if(angular.isString(a)){var b=o(a);if(!isNaN(b))return j.toTimezone(b,C.timezone)}return B.$options&&B.$options.allowInvalid?a:void 0}function q(a,b){var d=a||b;return c.ngRequired||d?(angular.isNumber(d)&&(d=new Date(d)),d?angular.isDate(d)&&!isNaN(d)?!0:angular.isString(d)?!isNaN(o(b)):!1:!0):!0}function r(c){if(a.isOpen||!a.disabled){var d=D[0],e=b[0].contains(c.target),f=void 0!==d.contains&&d.contains(c.target);!a.isOpen||e||f||a.$apply(function(){a.isOpen=!1})}}function s(c){27===c.which&&a.isOpen?(c.preventDefault(),c.stopPropagation(),a.$apply(function(){a.isOpen=!1}),b[0].focus()):40!==c.which||a.isOpen||(c.preventDefault(),c.stopPropagation(),a.$apply(function(){a.isOpen=!0}))}var t,u,v,w,x,y,z,A,B,C,D,E,F={},G=!1;a.watchData={},this.init=function(h){if(B=h,C=h.$options||m.ngModelOptions,u=angular.isDefined(c.closeOnDateSelection)?a.$parent.$eval(c.closeOnDateSelection):k.closeOnDateSelection,v=angular.isDefined(c.datepickerAppendToBody)?a.$parent.$eval(c.datepickerAppendToBody):k.appendToBody,w=angular.isDefined(c.onOpenFocus)?a.$parent.$eval(c.onOpenFocus):k.onOpenFocus,x=angular.isDefined(c.datepickerPopupTemplateUrl)?c.datepickerPopupTemplateUrl:k.datepickerPopupTemplateUrl,y=angular.isDefined(c.datepickerTemplateUrl)?c.datepickerTemplateUrl:k.datepickerTemplateUrl,E=angular.isDefined(c.altInputFormats)?a.$parent.$eval(c.altInputFormats):k.altInputFormats,a.showButtonBar=angular.isDefined(c.showButtonBar)?a.$parent.$eval(c.showButtonBar):k.showButtonBar,k.html5Types[c.type]?(t=k.html5Types[c.type],G=!0):(t=c.uibDatepickerPopup||k.datepickerPopup,c.$observe("uibDatepickerPopup",function(a,b){var c=a||k.datepickerPopup;if(c!==t&&(t=c,B.$modelValue=null,!t))throw new Error("uibDatepickerPopup must have a date format specified.")})),!t)throw new Error("uibDatepickerPopup must have a date format specified.");if(G&&c.uibDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");if(z=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),a.ngModelOptions=angular.copy(C),a.ngModelOptions.timezone=null,z.attr({"ng-model":"date","ng-model-options":"ngModelOptions","ng-change":"dateSelection(date)","template-url":x}),A=angular.element(z.children()[0]),A.attr("template-url",y),G&&"month"===c.type&&(A.attr("datepicker-mode",'"month"'),A.attr("min-mode","month")),c.datepickerOptions){var l=a.$parent.$eval(c.datepickerOptions);l&&l.initDate&&(a.initDate=j.fromTimezone(l.initDate,C.timezone),A.attr("init-date","initDate"),delete l.initDate),angular.forEach(l,function(a,b){A.attr(n(b),a)})}angular.forEach(["minMode","maxMode"],function(b){c[b]&&(a.$parent.$watch(function(){return c[b]},function(c){a.watchData[b]=c}),A.attr(n(b),"watchData."+b))}),angular.forEach(["datepickerMode","shortcutPropagation"],function(b){if(c[b]){var d=e(c[b]),f={get:function(){return d(a.$parent)}};if(A.attr(n(b),"watchData."+b),"datepickerMode"===b){var g=d.assign;f.set=function(b){g(a.$parent,b)}}Object.defineProperty(a.watchData,b,f)}}),angular.forEach(["minDate","maxDate","initDate"],function(b){if(c[b]){var d=e(c[b]);a.$parent.$watch(d,function(c){("minDate"===b||"maxDate"===b)&&(F[b]=angular.isDate(c)?j.fromTimezone(new Date(c),C.timezone):new Date(i(c,"medium"))),a.watchData[b]=F[b]||j.fromTimezone(new Date(c),C.timezone)}),A.attr(n(b),"watchData."+b)}}),c.dateDisabled&&A.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","showWeeks","startingDay","yearRows","yearColumns"],function(a){angular.isDefined(c[a])&&A.attr(n(a),c[a])}),c.customClass&&A.attr("custom-class","customClass({ date: date, mode: mode })"),G?B.$formatters.push(function(b){return a.date=j.fromTimezone(b,C.timezone),b}):(B.$$parserName="date",B.$validators.date=q,B.$parsers.unshift(p),B.$formatters.push(function(b){return B.$isEmpty(b)?(a.date=b,b):(a.date=j.fromTimezone(b,C.timezone),t=t.replace(/M!/,"MM").replace(/d!/,"dd"),i(a.date,t))})),B.$viewChangeListeners.push(function(){a.date=o(B.$viewValue)}),b.bind("keydown",s),D=d(z)(a),z.remove(),v?f.find("body").append(D):b.after(D),a.$on("$destroy",function(){a.isOpen===!0&&(g.$$phase||a.$apply(function(){a.isOpen=!1})),D.remove(),b.unbind("keydown",s),f.unbind("click",r)})},a.getText=function(b){return a[b+"Text"]||k[b+"Text"]},a.isDisabled=function(b){return"today"===b&&(b=new Date),a.watchData.minDate&&a.compare(b,F.minDate)<0||a.watchData.maxDate&&a.compare(b,F.maxDate)>0},a.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},a.dateSelection=function(c){angular.isDefined(c)&&(a.date=c);var d=a.date?i(a.date,t):null;b.val(d),B.$setViewValue(d),u&&(a.isOpen=!1,b[0].focus())},a.keydown=function(c){27===c.which&&(c.stopPropagation(),a.isOpen=!1,b[0].focus())},a.select=function(b){if("today"===b){var c=new Date;angular.isDate(a.date)?(b=new Date(a.date),b.setFullYear(c.getFullYear(),c.getMonth(),c.getDate())):b=new Date(c.setHours(0,0,0,0))}a.dateSelection(b)},a.close=function(){a.isOpen=!1,b[0].focus()},a.disabled=angular.isDefined(c.disabled)||!1,c.ngDisabled&&a.$parent.$watch(e(c.ngDisabled),function(b){a.disabled=b}),a.$watch("isOpen",function(c){c?a.disabled?a.isOpen=!1:(a.position=v?h.offset(b):h.position(b),a.position.top=a.position.top+b.prop("offsetHeight"),l(function(){w&&a.$broadcast("uib:datepicker.focus"),f.bind("click",r)},0,!1)):f.unbind("click",r)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(a,b,c,d){var e=d[0],f=d[1];f.init(e)}}}).directive("uibDatepickerPopupWrap",function(){return{replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/datepicker/popup.html"}}}),angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function(a){return function(b,c){var d;return function(){var e=this,f=Array.prototype.slice.call(arguments);d&&a.cancel(d),d=a(function(){b.apply(e,f)},c)}}}]),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope",function(a,b){var c=null;this.open=function(b){c||(a.on("click",d),a.on("keydown",e)),c&&c!==b&&(c.isOpen=!1),c=b},this.close=function(b){c===b&&(c=null,a.off("click",d),a.off("keydown",e))};var d=function(a){if(c&&!(a&&"disabled"===c.getAutoClose()||a&&3===a.which)){var d=c.getToggleElement();if(!(a&&d&&d[0].contains(a.target))){var e=c.getDropdownElement();a&&"outsideClick"===c.getAutoClose()&&e&&e[0].contains(a.target)||(c.isOpen=!1,b.$$phase||c.$apply())}}},e=function(a){27===a.which?(c.focusToggleElement(),d()):c.isKeynavEnabled()&&-1!==[38,40].indexOf(a.which)&&c.isOpen&&(a.preventDefault(),a.stopPropagation(),c.focusDropdownEntry(a.which))}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(a,b,c,d,e,f,g,h,i,j,k){var l,m,n=this,o=a.$new(),p=e.appendToOpenClass,q=e.openClass,r=angular.noop,s=c.onToggle?d(c.onToggle):angular.noop,t=!1,u=null,v=!1,w=i.find("body");b.addClass("dropdown"),this.init=function(){if(c.isOpen&&(m=d(c.isOpen),r=m.assign,a.$watch(m,function(a){o.isOpen=!!a})),angular.isDefined(c.dropdownAppendTo)){var e=d(c.dropdownAppendTo)(o);e&&(u=angular.element(e))}t=angular.isDefined(c.dropdownAppendToBody),v=angular.isDefined(c.keyboardNav),t&&!u&&(u=w),u&&n.dropdownMenu&&(u.append(n.dropdownMenu),b.on("$destroy",function(){n.dropdownMenu.remove()}))},this.toggle=function(a){return o.isOpen=arguments.length?!!a:!o.isOpen},this.isOpen=function(){return o.isOpen},o.getToggleElement=function(){return n.toggleElement},o.getAutoClose=function(){return c.autoClose||"always"},o.getElement=function(){return b},o.isKeynavEnabled=function(){return v},o.focusDropdownEntry=function(a){var c=n.dropdownMenu?angular.element(n.dropdownMenu).find("a"):b.find("ul").eq(0).find("a");switch(a){case 40:angular.isNumber(n.selectedOption)?n.selectedOption=n.selectedOption===c.length-1?n.selectedOption:n.selectedOption+1:n.selectedOption=0;break;case 38:angular.isNumber(n.selectedOption)?n.selectedOption=0===n.selectedOption?0:n.selectedOption-1:n.selectedOption=c.length-1}c[n.selectedOption].focus()},o.getDropdownElement=function(){return n.dropdownMenu},o.focusToggleElement=function(){n.toggleElement&&n.toggleElement[0].focus()},o.$watch("isOpen",function(c,d){if(u&&n.dropdownMenu){var e,i,m=h.positionElements(b,n.dropdownMenu,"bottom-left",!0);if(e={top:m.top+"px",display:c?"block":"none"},i=n.dropdownMenu.hasClass("dropdown-menu-right"),i?(e.left="auto",e.right=window.innerWidth-(m.left+b.prop("offsetWidth"))+"px"):(e.left=m.left+"px",e.right="auto"),!t){var v=h.offset(u);e.top=m.top-v.top+"px",i?e.right=window.innerWidth-(m.left-v.left+b.prop("offsetWidth"))+"px":e.left=m.left-v.left+"px"}n.dropdownMenu.css(e)}var w=u?u:b;if(g[c?"addClass":"removeClass"](w,u?p:q).then(function(){angular.isDefined(c)&&c!==d&&s(a,{open:!!c})}),c)n.dropdownMenuTemplateUrl&&k(n.dropdownMenuTemplateUrl).then(function(a){l=o.$new(),j(a.trim())(l,function(a){var b=a;n.dropdownMenu.replaceWith(b),n.dropdownMenu=b})}),o.focusToggleElement(),f.open(o);else{if(n.dropdownMenuTemplateUrl){l&&l.$destroy();var x=angular.element('<ul class="dropdown-menu"></ul>');n.dropdownMenu.replaceWith(x),n.dropdownMenu=x}f.close(o),n.selectedOption=null}angular.isFunction(r)&&r(a,c)}),a.$on("$locationChangeSuccess",function(){"disabled"!==o.getAutoClose()&&(o.isOpen=!1)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(a,b,c,d){d.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(a,b,c,d){if(d&&!angular.isDefined(c.dropdownNested)){b.addClass("dropdown-menu");var e=c.templateUrl;e&&(d.dropdownMenuTemplateUrl=e),d.dropdownMenu||(d.dropdownMenu=b)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(a,b,c,d){if(d){b.addClass("dropdown-toggle"),d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b===a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b===a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.stackedMap"]).factory("$$multiMap",function(){return{createNew:function(){var a={};return{entries:function(){return Object.keys(a).map(function(b){return{key:b,value:a[b]}})},get:function(b){return a[b]},hasKey:function(b){return!!a[b]},keys:function(){return Object.keys(a)},put:function(b,c){a[b]||(a[b]=[]),a[b].push(c)},remove:function(b,c){var d=a[b];if(d){var e=d.indexOf(c);-1!==e&&d.splice(e,1),d.length||delete a[b]}}}}}}).provider("$uibResolve",function(){var a=this;this.resolver=null,this.setResolver=function(a){this.resolver=a},this.$get=["$injector","$q",function(b,c){var d=a.resolver?b.get(a.resolver):null;return{resolve:function(a,e,f,g){if(d)return d.resolve(a,e,f,g);var h=[];return angular.forEach(a,function(a){angular.isFunction(a)||angular.isArray(a)?h.push(c.resolve(b.invoke(a))):angular.isString(a)?h.push(c.resolve(b.get(a))):h.push(c.resolve(a))}),c.all(h).then(function(b){var c={},d=0;return angular.forEach(a,function(a,e){c[e]=b[d++]}),c})}}}]}).directive("uibModalBackdrop",["$animateCss","$injector","$uibModalStack",function(a,b,c){function d(b,d,e){e.modalInClass&&(a(d,{addClass:e.modalInClass}).start(),b.$on(c.NOW_CLOSING_EVENT,function(c,f){var g=f();b.modalOptions.animation?a(d,{removeClass:e.modalInClass}).start().then(g):g()}))}return{replace:!0,templateUrl:"uib/template/modal/backdrop.html",compile:function(a,b){return a.addClass(b.backdropClass),d}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animate","$animateCss","$document",function(a,b,c,d,e){return{scope:{index:"@"},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"uib/template/modal/window.html"},link:function(f,g,h){g.addClass(h.windowClass||""),g.addClass(h.windowTopClass||""),f.size=h.size,f.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!==c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))},g.on("click",f.close),f.$isRendered=!0;var i=b.defer();h.$observe("modalRender",function(a){"true"===a&&i.resolve()}),i.promise.then(function(){var i=null;h.modalInClass&&(i=d(g,{addClass:h.modalInClass}).start(),f.$on(a.NOW_CLOSING_EVENT,function(a,b){var e=b();d?d(g,{removeClass:h.modalInClass}).start().then(e):c.removeClass(g,h.modalInClass).then(e)})),b.when(i).then(function(){if(!e[0].activeElement||!g[0].contains(e[0].activeElement)){var a=g[0].querySelector("[autofocus]");a?a.focus():g[0].focus()}});var j=a.getTop();j&&a.modalRendered(j.key)})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(a,b){b.modalAnimation&&a.addClass(b.uibModalAnimationClass)}}}).directive("uibModalTransclude",function(){return{link:function(a,b,c,d,e){e(a.$parent,function(a){b.empty(),b.append(a)})}}}).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap",function(a,b,c,d,e,f,g,h){function i(){for(var a=-1,b=t.keys(),c=0;c<b.length;c++)t.get(b[c]).value.backdrop&&(a=c);return a}function j(a,b){var c=t.get(a).value,d=c.appendTo;t.remove(a),m(c.modalDomEl,c.modalScope,function(){var b=c.openedClass||s;u.remove(b,a),d.toggleClass(b,u.hasKey(b)),k(!0)}),l(),b&&b.focus?b.focus():d.focus&&d.focus()}function k(a){var b;t.length()>0&&(b=t.top().value,b.modalDomEl.toggleClass(b.windowTopClass||"",a))}function l(){if(p&&-1===i()){var a=q;m(p,q,function(){a=null}),p=void 0,q=void 0}}function m(a,c,d,e){function g(){g.done||(g.done=!0,b(a,{event:"leave"}).start().then(function(){a.remove(),e&&e.resolve()}),c.$destroy(),d&&d())}var h,i=null,j=function(){return h||(h=f.defer(),i=h.promise),function(){h.resolve()}};return c.$broadcast(v.NOW_CLOSING_EVENT,j),f.when(i).then(g)}function n(a){if(a.isDefaultPrevented())return a;var b=t.top();if(b)switch(a.which){case 27:b.value.keyboard&&(a.preventDefault(),e.$apply(function(){v.dismiss(b.key,"escape key press")}));break;case 9:v.loadFocusElementList(b);var c=!1;a.shiftKey?v.isFocusInFirstItem(a)&&(c=v.focusLastFocusableElement()):v.isFocusInLastItem(a)&&(c=v.focusFirstFocusableElement()),c&&(a.preventDefault(),a.stopPropagation())}}function o(a,b,c){return!a.value.modalScope.$broadcast("modal.closing",b,c).defaultPrevented}var p,q,r,s="modal-open",t=h.createNew(),u=g.createNew(),v={NOW_CLOSING_EVENT:"modal.stack.now-closing"},w=0,x="a[href], area[href], input:not([disabled]), button:not([disabled]),select:not([disabled]), textarea:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable=true]";return e.$watch(i,function(a){q&&(q.index=a)}),c.on("keydown",n),e.$on("$destroy",function(){c.off("keydown",n)}),v.open=function(b,f){var g=c[0].activeElement,h=f.openedClass||s;k(!1),t.add(b,{deferred:f.deferred,renderDeferred:f.renderDeferred,closedDeferred:f.closedDeferred,modalScope:f.scope,backdrop:f.backdrop,keyboard:f.keyboard,openedClass:f.openedClass,windowTopClass:f.windowTopClass,animation:f.animation,appendTo:f.appendTo}),u.put(h,b);var j=f.appendTo,l=i();if(!j.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");l>=0&&!p&&(q=e.$new(!0),q.modalOptions=f,q.index=l,p=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>'),p.attr("backdrop-class",f.backdropClass),f.animation&&p.attr("modal-animation","true"),d(p)(q),a.enter(p,j));var m=angular.element('<div uib-modal-window="modal-window"></div>');m.attr({"template-url":f.windowTemplateUrl,"window-class":f.windowClass,"window-top-class":f.windowTopClass,size:f.size,index:t.length()-1,animate:"animate"}).html(f.content),f.animation&&m.attr("modal-animation","true"),a.enter(m,j).then(function(){d(m)(f.scope),a.addClass(j,h)}),t.top().value.modalDomEl=m,t.top().value.modalOpener=g,v.clearFocusListCache()},v.close=function(a,b){var c=t.get(a);return c&&o(c,b,!0)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.resolve(b),j(a,c.value.modalOpener),!0):!c},v.dismiss=function(a,b){var c=t.get(a);return c&&o(c,b,!1)?(c.value.modalScope.$$uibDestructionScheduled=!0,c.value.deferred.reject(b),j(a,c.value.modalOpener),!0):!c},v.dismissAll=function(a){for(var b=this.getTop();b&&this.dismiss(b.key,a);)b=this.getTop()},v.getTop=function(){return t.top()},v.modalRendered=function(a){var b=t.get(a);b&&b.value.renderDeferred.resolve()},v.focusFirstFocusableElement=function(){return r.length>0?(r[0].focus(),!0):!1},v.focusLastFocusableElement=function(){return r.length>0?(r[r.length-1].focus(),!0):!1},v.isFocusInFirstItem=function(a){return r.length>0?(a.target||a.srcElement)===r[0]:!1},v.isFocusInLastItem=function(a){return r.length>0?(a.target||a.srcElement)===r[r.length-1]:!1},v.clearFocusListCache=function(){r=[],w=0},v.loadFocusElementList=function(a){if((void 0===r||!r.length)&&a){var b=a.value.modalDomEl;b&&b.length&&(r=b[0].querySelectorAll(x))}},v}]).provider("$uibModal",function(){var a={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?c.when(a.template):e(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl)}var j={},k=null;return j.getPromiseChain=function(){return k},j.open=function(e){function j(){return r}var l=c.defer(),m=c.defer(),n=c.defer(),o=c.defer(),p={result:l.promise,opened:m.promise,closed:n.promise,rendered:o.promise,close:function(a){return h.close(p,a)},dismiss:function(a){return h.dismiss(p,a)}};if(e=angular.extend({},a.options,e),e.resolve=e.resolve||{},e.appendTo=e.appendTo||d.find("body").eq(0),!e.template&&!e.templateUrl)throw new Error("One of template or templateUrl options is required.");var q,r=c.all([i(e),g.resolve(e.resolve,{},null,null)]);return q=k=c.all([k]).then(j,j).then(function(a){var c=e.scope||b,d=c.$new();d.$close=p.close,d.$dismiss=p.dismiss,d.$on("$destroy",function(){d.$$uibDestructionScheduled||d.$dismiss("$uibUnscheduledDestruction")});var g,i={};e.controller&&(i.$scope=d,i.$uibModalInstance=p,angular.forEach(a[1],function(a,b){i[b]=a}),g=f(e.controller,i),e.controllerAs&&(e.bindToController&&(g.$close=d.$close,g.$dismiss=d.$dismiss,angular.extend(g,c)),d[e.controllerAs]=g)),h.open(p,{scope:d,deferred:l,renderDeferred:o,closedDeferred:n,content:a[0],animation:e.animation,backdrop:e.backdrop,keyboard:e.keyboard,backdropClass:e.backdropClass,windowTopClass:e.windowTopClass,windowClass:e.windowClass,windowTemplateUrl:e.windowTemplateUrl,size:e.size,openedClass:e.openedClass,appendTo:e.appendTo}),m.resolve(!0)},function(a){m.reject(a),l.reject(a)})["finally"](function(){k===q&&(k=null)}),p},j}]};return a}),angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function(a){return{create:function(b,c,d){b.setNumPages=d.numPages?a(d.numPages).assign:angular.noop,b.ngModelCtrl={$setViewValue:angular.noop},b.init=function(e,f){b.ngModelCtrl=e,b.config=f,e.$render=function(){b.render()},d.itemsPerPage?c.$parent.$watch(a(d.itemsPerPage),function(a){b.itemsPerPage=parseInt(a,10),c.totalPages=b.calculateTotalPages(),b.updatePage()}):b.itemsPerPage=f.itemsPerPage,c.$watch("totalItems",function(a,d){(angular.isDefined(a)||a!==d)&&(c.totalPages=b.calculateTotalPages(),b.updatePage())})},b.calculateTotalPages=function(){var a=b.itemsPerPage<1?1:Math.ceil(c.totalItems/b.itemsPerPage);return Math.max(a||0,1)},b.render=function(){c.page=parseInt(b.ngModelCtrl.$viewValue,10)||1},c.selectPage=function(a,d){d&&d.preventDefault();var e=!c.ngDisabled||!d;e&&c.page!==a&&a>0&&a<=c.totalPages&&(d&&d.target&&d.target.blur(),b.ngModelCtrl.$setViewValue(a),b.ngModelCtrl.$render())},c.getText=function(a){return c[a+"Text"]||b.config[a+"Text"]},c.noPrevious=function(){return 1===c.page},c.noNext=function(){return c.page===c.totalPages},b.updatePage=function(){b.setNumPages(c.$parent,c.totalPages),c.page>c.totalPages?c.selectPage(c.totalPages):b.ngModelCtrl.$render()}}}}]),angular.module("ui.bootstrap.pager",["ui.bootstrap.paging"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function(a,b,c,d){a.align=angular.isDefined(b.align)?a.$parent.$eval(b.align):d.align,c.create(this,a,b)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("uibPager",["uibPagerConfig",function(a){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],controller:"UibPagerController",controllerAs:"pager",templateUrl:function(a,b){return b.templateUrl||"uib/template/pager/pager.html"},replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&f.init(g,a)}}}]),angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function(a,b,c,d,e){function f(a,b,c){return{number:a,text:b,active:c}}function g(a,b){var c=[],d=1,e=b,g=angular.isDefined(i)&&b>i;g&&(j?(d=Math.max(a-Math.floor(i/2),1),e=d+i-1,e>b&&(e=b,d=e-i+1)):(d=(Math.ceil(a/i)-1)*i+1,e=Math.min(d+i-1,b)));for(var h=d;e>=h;h++){var m=f(h,h,h===a);c.push(m)}if(g&&i>0&&(!j||k||l)){if(d>1){if(!l||d>3){var n=f(d-1,"...",!1);c.unshift(n)}if(l){if(3===d){var o=f(2,"2",!1);c.unshift(o)}var p=f(1,"1",!1);c.unshift(p)}}if(b>e){if(!l||b-2>e){var q=f(e+1,"...",!1);c.push(q)}if(l){if(e===b-2){var r=f(b-1,b-1,!1);c.push(r)}var s=f(b,b,!1);c.push(s)}}}return c}var h=this,i=angular.isDefined(b.maxSize)?a.$parent.$eval(b.maxSize):e.maxSize,j=angular.isDefined(b.rotate)?a.$parent.$eval(b.rotate):e.rotate,k=angular.isDefined(b.forceEllipses)?a.$parent.$eval(b.forceEllipses):e.forceEllipses,l=angular.isDefined(b.boundaryLinkNumbers)?a.$parent.$eval(b.boundaryLinkNumbers):e.boundaryLinkNumbers;a.boundaryLinks=angular.isDefined(b.boundaryLinks)?a.$parent.$eval(b.boundaryLinks):e.boundaryLinks,a.directionLinks=angular.isDefined(b.directionLinks)?a.$parent.$eval(b.directionLinks):e.directionLinks,d.create(this,a,b),b.maxSize&&a.$parent.$watch(c(b.maxSize),function(a){i=parseInt(a,10),h.render()});var m=this.render;this.render=function(){m(),a.page>0&&a.page<=a.totalPages&&(a.pages=g(a.page,a.totalPages))}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function(a,b){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(a,b){return b.templateUrl||"uib/template/pagination/pagination.html"},replace:!0,link:function(a,c,d,e){var f=e[0],g=e[1];g&&f.init(g,b)}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",placementClassPrefix:"",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},c={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(e,f,g,h,i,j,k,l,m){function n(a){if(27===a.which){var b=o.top();b&&(b.value.close(),o.removeTop(),b=null)}}var o=m.createNew();return h.on("keypress",n),k.$on("$destroy",function(){h.off("keypress",n)}),function(e,k,m,n){function p(a){var b=(a||n.trigger||m).split(" "),d=b.map(function(a){return c[a]||a});return{show:b,hide:d}}n=angular.extend({},b,d,n);var q=a(e),r=j.startSymbol(),s=j.endSymbol(),t="<div "+q+'-popup title="'+r+"title"+s+'" '+(n.useContentExp?'content-exp="contentExp()" ':'content="'+r+"content"+s+'" ')+'placement="'+r+"placement"+s+'" popup-class="'+r+"popupClass"+s+'" animation="animation" is-open="isOpen"origin-scope="origScope" style="visibility: hidden; display: block; top: -9999px; left: -9999px;"></div>';return{compile:function(a,b){var c=f(t);return function(a,b,d,f){function j(){M.isOpen?q():m()}function m(){(!L||a.$eval(d[k+"Enable"]))&&(u(),x(),M.popupDelay?G||(G=g(r,M.popupDelay,!1)):r())}function q(){s(),M.popupCloseDelay?H||(H=g(t,M.popupCloseDelay,!1)):t()}function r(){return s(),u(),M.content?(v(),void M.$evalAsync(function(){M.isOpen=!0,y(!0),R()})):angular.noop}function s(){G&&(g.cancel(G),G=null),I&&(g.cancel(I),I=null)}function t(){M&&M.$evalAsync(function(){M.isOpen=!1,y(!1),M.animation?F||(F=g(w,150,!1)):w()})}function u(){H&&(g.cancel(H),H=null),F&&(g.cancel(F),F=null)}function v(){D||(E=M.$new(),D=c(E,function(a){J?h.find("body").append(a):b.after(a)}),z())}function w(){s(),u(),A(),D&&(D.remove(),D=null),E&&(E.$destroy(),E=null)}function x(){M.title=d[k+"Title"],P?M.content=P(a):M.content=d[e],M.popupClass=d[k+"Class"],M.placement=angular.isDefined(d[k+"Placement"])?d[k+"Placement"]:n.placement;var b=parseInt(d[k+"PopupDelay"],10),c=parseInt(d[k+"PopupCloseDelay"],10);M.popupDelay=isNaN(b)?n.popupDelay:b,M.popupCloseDelay=isNaN(c)?n.popupCloseDelay:c}function y(b){O&&angular.isFunction(O.assign)&&O.assign(a,b)}function z(){Q.length=0,P?(Q.push(a.$watch(P,function(a){M.content=a,!a&&M.isOpen&&t()})),Q.push(E.$watch(function(){N||(N=!0,E.$$postDigest(function(){N=!1,M&&M.isOpen&&R()}))}))):Q.push(d.$observe(e,function(a){M.content=a,!a&&M.isOpen?t():R()})),Q.push(d.$observe(k+"Title",function(a){M.title=a,M.isOpen&&R()})),Q.push(d.$observe(k+"Placement",function(a){M.placement=a?a:n.placement,M.isOpen&&R()}))}function A(){Q.length&&(angular.forEach(Q,function(a){a()}),Q.length=0)}function B(a){M&&M.isOpen&&D&&(b[0].contains(a.target)||D[0].contains(a.target)||q())}function C(){var a=d[k+"Trigger"];S(),K=p(a),"none"!==K.show&&K.show.forEach(function(a,c){"outsideClick"===a?(b.on("click",j),h.on("click",B)):a===K.hide[c]?b.on(a,j):a&&(b.on(a,m),b.on(K.hide[c],q)),b.on("keypress",function(a){27===a.which&&q()})})}var D,E,F,G,H,I,J=angular.isDefined(n.appendToBody)?n.appendToBody:!1,K=p(void 0),L=angular.isDefined(d[k+"Enable"]),M=a.$new(!0),N=!1,O=angular.isDefined(d[k+"IsOpen"])?l(d[k+"IsOpen"]):!1,P=n.useContentExp?l(d[e]):!1,Q=[],R=function(){D&&D.html()&&(I||(I=g(function(){D.css({top:0,left:0});var a=i.positionElements(b,D,M.placement,J);D.css({top:a.top+"px",left:a.left+"px",visibility:"visible"}),n.placementClassPrefix&&D.removeClass("top bottom left right"),D.removeClass(n.placementClassPrefix+"top "+n.placementClassPrefix+"top-left "+n.placementClassPrefix+"top-right "+n.placementClassPrefix+"bottom "+n.placementClassPrefix+"bottom-left "+n.placementClassPrefix+"bottom-right "+n.placementClassPrefix+"left "+n.placementClassPrefix+"left-top "+n.placementClassPrefix+"left-bottom "+n.placementClassPrefix+"right "+n.placementClassPrefix+"right-top "+n.placementClassPrefix+"right-bottom");var c=a.placement.split("-");D.addClass(c[0],n.placementClassPrefix+a.placement),i.positionArrow(D,a.placement),I=null},0,!1)))};M.origScope=a,M.isOpen=!1,o.add(M,{close:t}),M.contentExp=function(){return M.content},d.$observe("disabled",function(a){a&&s(),a&&M.isOpen&&t()}),O&&a.$watch(O,function(a){M&&!a===M.isOpen&&j()});var S=function(){K.show.forEach(function(a){"outsideClick"===a?b.off("click",j):(b.off(a,m),b.off(a,j))}),K.hide.forEach(function(a){"outsideClick"===a?h.off("click",B):b.off(a,q)})};C();var T=a.$eval(d[k+"Animation"]);M.animation=angular.isDefined(T)?!!T:n.animation;var U,V=k+"AppendToBody";U=V in d&&void 0===d[V]?!0:a.$eval(d[V]),J=angular.isDefined(U)?U:J,J&&a.$on("$locationChangeSuccess",function(){M.isOpen&&t()}),a.$on("$destroy",function(){S(),w(),o.remove(M),M=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(a,b,c,d){return{link:function(e,f,g){var h,i,j,k=e.$eval(g.tooltipTemplateTranscludeScope),l=0,m=function(){i&&(i.remove(),i=null),h&&(h.$destroy(),h=null),j&&(a.leave(j).then(function(){i=null}),i=j,j=null)};e.$watch(b.parseAsResourceUrl(g.uibTooltipTemplateTransclude),function(b){var g=++l;b?(d(b,!0).then(function(d){if(g===l){var e=k.$new(),i=d,n=c(i)(e,function(b){m(),a.enter(b,f)});h=e,j=n,h.$emit("$includeContentLoaded",b)}},function(){g===l&&(m(),e.$emit("$includeContentError",b))}),e.$emit("$includeContentRequested",b)):m()}),e.$on("$destroy",m)}}}]).directive("uibTooltipClasses",["$uibPosition",function(a){return{restrict:"A",link:function(b,c,d){if(b.placement){var e=a.parsePlacement(b.placement);c.addClass(e[0])}else c.addClass("top");b.popupClass&&c.addClass(b.popupClass),b.animation()&&c.addClass(d.tooltipAnimationClass)}}}]).directive("uibTooltipPopup",function(){return{replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function(a){return a("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function(a){return a("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function(a){return a("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{replace:!0,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function(a){return a("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",title:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function(a){return a("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{replace:!0,scope:{title:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function(a){return a("uibPopover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(a,b,c){var d=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular.isDefined(a.max)?a.max:c.max,this.addBar=function(b,c,f){e||c.css({transition:"none"}),this.bars.push(b),b.max=a.max,b.title=f&&angular.isDefined(f.title)?f.title:"progressbar",b.$watch("value",function(a){b.recalculatePercentage()}),b.recalculatePercentage=function(){var a=d.bars.reduce(function(a,b){return b.percent=+(100*b.value/b.max).toFixed(2),a+b.percent},0);a>100&&(b.percent-=a-100)},b.$on("$destroy",function(){c=null,d.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1),this.bars.forEach(function(a){a.recalculatePercentage()})},a.$watch("max",function(b){d.bars.forEach(function(b){b.max=a.max,b.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{max:"=?"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b,c)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",max:"=?",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]),{title:c.title})}}}),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,d.$formatters.push(function(a){return angular.isNumber(a)&&a<<0!==a&&(a=Math.round(a)),a}),this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.titles)?a.$parent.$eval(b.titles):c.titles;this.titles=angular.isArray(f)&&f.length>0?f:c.titles;var g=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(g)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;c>b;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(b)},a[b]);return a},this.getTitle=function(a){return a>=this.titles.length?a+1:this.titles[a]},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(d.$viewValue===b?0:b),d.$render())},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect(),a.selectCalled=!1)}),a.active=!0,a.selectCalled||(a.onSelect(),a.selectCalled=!0)},b.addTab=function(a){c.push(a),1===c.length&&a.active!==!1?a.active=!0:a.active?b.select(a):a.active=!1},b.removeTab=function(a){var e=c.indexOf(a);if(a.active&&c.length>1&&!d){var f=e===c.length-1?e-1:e+1;b.select(c[f])}c.splice(e,1)};var d;a.$on("$destroy",function(){d=!0})}]).directive("uibTabset",function(){return{transclude:!0,replace:!0,scope:{type:"@"},controller:"UibTabsetController",templateUrl:"uib/template/tabs/tabset.html",link:function(a,b,c){a.vertical=angular.isDefined(c.vertical)?a.$parent.$eval(c.vertical):!1,a.justified=angular.isDefined(c.justified)?a.$parent.$eval(c.justified):!1}}}).directive("uibTab",["$parse",function(a){return{require:"^uibTabset",replace:!0,templateUrl:"uib/template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(b,c,d,e,f){b.$watch("active",function(a){a&&e.select(b)}),b.disabled=!1,d.disable&&b.$parent.$watch(a(d.disable),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},e.addTab(b),b.$on("$destroy",function(){e.removeTab(b)}),b.$transcludeFn=f}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}).directive("uibTabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("uib-tab-heading")||a.hasAttribute("data-uib-tab-heading")||a.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===a.tagName.toLowerCase()||"data-uib-tab-heading"===a.tagName.toLowerCase()||"x-uib-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^uibTabset",link:function(b,c,d){var e=b.$eval(d.uibTabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:!0,showSeconds:!1,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function(a,b,c,d,e,f,g){function h(){var b=+a.hours,c=a.showMeridian?b>0&&13>b:b>=0&&24>b;return c?(a.showMeridian&&(12===b&&(b=0),a.meridian===t[1]&&(b+=12)),b):void 0}function i(){var b=+a.minutes;return b>=0&&60>b?b:void 0}function j(){var b=+a.seconds;return b>=0&&60>b?b:void 0}function k(a){return null===a?"":angular.isDefined(a)&&a.toString().length<2?"0"+a:a.toString()}function l(a){m(),s.$setViewValue(new Date(r)),n(a)}function m(){s.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1,a.invalidSeconds=!1}function n(b){if(s.$modelValue){var c=r.getHours(),d=r.getMinutes(),e=r.getSeconds();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:k(c),"m"!==b&&(a.minutes=k(d)),a.meridian=r.getHours()<12?t[0]:t[1],"s"!==b&&(a.seconds=k(e)),a.meridian=r.getHours()<12?t[0]:t[1]}else a.hours=null,a.minutes=null,a.seconds=null,a.meridian=t[0]}function o(a){r=q(r,a),l()}function p(a,b){return q(a,60*b)}function q(a,b){var c=new Date(a.getTime()+1e3*b),d=new Date(a);return d.setHours(c.getHours(),c.getMinutes(),c.getSeconds()),d}var r=new Date,s={$setViewValue:angular.noop},t=angular.isDefined(c.meridians)?a.$parent.$eval(c.meridians):g.meridians||f.DATETIME_FORMATS.AMPMS;a.tabindex=angular.isDefined(c.tabindex)?c.tabindex:0,b.removeAttr("tabindex"),this.init=function(b,d){s=b,s.$render=this.render,s.$formatters.unshift(function(a){return a?new Date(a):null});var e=d.eq(0),f=d.eq(1),h=d.eq(2),i=angular.isDefined(c.mousewheel)?a.$parent.$eval(c.mousewheel):g.mousewheel;i&&this.setupMousewheelEvents(e,f,h);var j=angular.isDefined(c.arrowkeys)?a.$parent.$eval(c.arrowkeys):g.arrowkeys;j&&this.setupArrowkeyEvents(e,f,h),a.readonlyInput=angular.isDefined(c.readonlyInput)?a.$parent.$eval(c.readonlyInput):g.readonlyInput,this.setupInputEvents(e,f,h)};var u=g.hourStep;c.hourStep&&a.$parent.$watch(d(c.hourStep),function(a){u=+a});var v=g.minuteStep;c.minuteStep&&a.$parent.$watch(d(c.minuteStep),function(a){v=+a});var w;a.$parent.$watch(d(c.min),function(a){var b=new Date(a);w=isNaN(b)?void 0:b});var x;a.$parent.$watch(d(c.max),function(a){var b=new Date(a);x=isNaN(b)?void 0:b});var y=!1;c.ngDisabled&&a.$parent.$watch(d(c.ngDisabled),function(a){y=a}),a.noIncrementHours=function(){var a=p(r,60*u);return y||a>x||r>a&&w>a},a.noDecrementHours=function(){var a=p(r,60*-u);return y||w>a||a>r&&a>x},a.noIncrementMinutes=function(){var a=p(r,v);return y||a>x||r>a&&w>a},a.noDecrementMinutes=function(){var a=p(r,-v);return y||w>a||a>r&&a>x},a.noIncrementSeconds=function(){var a=q(r,z);return y||a>x||r>a&&w>a},a.noDecrementSeconds=function(){var a=q(r,-z);return y||w>a||a>r&&a>x},a.noToggleMeridian=function(){return r.getHours()<12?y||p(r,720)>x:y||p(r,-720)<w};var z=g.secondStep;c.secondStep&&a.$parent.$watch(d(c.secondStep),function(a){z=+a}),a.showSeconds=g.showSeconds,c.showSeconds&&a.$parent.$watch(d(c.showSeconds),function(b){a.showSeconds=!!b}),a.showMeridian=g.showMeridian,c.showMeridian&&a.$parent.$watch(d(c.showMeridian),function(b){if(a.showMeridian=!!b,s.$error.time){var c=h(),d=i();angular.isDefined(c)&&angular.isDefined(d)&&(r.setHours(c),l())}else n()}),this.setupMousewheelEvents=function(b,c,d){var e=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){y||a.$apply(e(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){y||a.$apply(e(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()}),d.bind("mousewheel wheel",function(b){y||a.$apply(e(b)?a.incrementSeconds():a.decrementSeconds()),b.preventDefault()})},this.setupArrowkeyEvents=function(b,c,d){b.bind("keydown",function(b){y||(38===b.which?(b.preventDefault(),a.incrementHours(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementHours(),a.$apply()))}),c.bind("keydown",function(b){y||(38===b.which?(b.preventDefault(),a.incrementMinutes(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementMinutes(),a.$apply()))}),d.bind("keydown",function(b){y||(38===b.which?(b.preventDefault(),a.incrementSeconds(),a.$apply()):40===b.which&&(b.preventDefault(),a.decrementSeconds(),a.$apply()))})},this.setupInputEvents=function(b,c,d){if(a.readonlyInput)return a.updateHours=angular.noop,a.updateMinutes=angular.noop,void(a.updateSeconds=angular.noop);var e=function(b,c,d){s.$setViewValue(null),s.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c),angular.isDefined(d)&&(a.invalidSeconds=d)};a.updateHours=function(){var a=h(),b=i();s.$setDirty(),angular.isDefined(a)&&angular.isDefined(b)?(r.setHours(a),r.setMinutes(b),w>r||r>x?e(!0):l("h")):e(!0)},b.bind("blur",function(b){s.$setTouched(),null===a.hours||""===a.hours?e(!0):!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=k(a.hours)})}),a.updateMinutes=function(){var a=i(),b=h();s.$setDirty(),angular.isDefined(a)&&angular.isDefined(b)?(r.setHours(b),r.setMinutes(a),w>r||r>x?e(void 0,!0):l("m")):e(void 0,!0)},c.bind("blur",function(b){s.$setTouched(),null===a.minutes?e(void 0,!0):!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=k(a.minutes)})}),a.updateSeconds=function(){var a=j();s.$setDirty(),angular.isDefined(a)?(r.setSeconds(a),l("s")):e(void 0,void 0,!0)},d.bind("blur",function(b){!a.invalidSeconds&&a.seconds<10&&a.$apply(function(){a.seconds=k(a.seconds)})})},this.render=function(){var b=s.$viewValue;isNaN(b)?(s.$setValidity("time",!1),e.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(b&&(r=b),w>r||r>x?(s.$setValidity("time",!1),a.invalidHours=!0,a.invalidMinutes=!0):m(),n())},a.showSpinners=angular.isDefined(c.showSpinners)?a.$parent.$eval(c.showSpinners):g.showSpinners,a.incrementHours=function(){a.noIncrementHours()||o(60*u*60)},a.decrementHours=function(){a.noDecrementHours()||o(60*-u*60)},a.incrementMinutes=function(){a.noIncrementMinutes()||o(60*v)},a.decrementMinutes=function(){a.noDecrementMinutes()||o(60*-v)},a.incrementSeconds=function(){a.noIncrementSeconds()||o(z)},a.decrementSeconds=function(){a.noDecrementSeconds()||o(-z)},a.toggleMeridian=function(){var b=i(),c=h();a.noToggleMeridian()||(angular.isDefined(b)&&angular.isDefined(c)?o(720*(r.getHours()<12?60:-60)):a.meridian=a.meridian===t[0]?t[1]:t[0])},a.blur=function(){s.$setTouched()}}]).directive("uibTimepicker",["uibTimepickerConfig",function(a){return{require:["uibTimepicker","?^ngModel"],controller:"UibTimepickerController",controllerAs:"timepicker",replace:!0,scope:{},templateUrl:function(b,c){return c.templateUrl||a.templateUrl},link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(a){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){N.moveInProgress||(N.moveInProgress=!0,N.$digest()),Y()}function o(){N.position=D?l.offset(b):l.position(b),N.position.top+=b.prop("offsetHeight")}var p,q,r=[9,13,27,38,40],s=200,t=a.$eval(c.typeaheadMinLength);t||0===t||(t=1);var u=a.$eval(c.typeaheadWaitMs)||0,v=a.$eval(c.typeaheadEditable)!==!1;a.$watch(c.typeaheadEditable,function(a){v=a!==!1});var w,x,y=e(c.typeaheadLoading).assign||angular.noop,z=e(c.typeaheadOnSelect),A=angular.isDefined(c.typeaheadSelectOnBlur)?a.$eval(c.typeaheadSelectOnBlur):!1,B=e(c.typeaheadNoResults).assign||angular.noop,C=c.typeaheadInputFormatter?e(c.typeaheadInputFormatter):void 0,D=c.typeaheadAppendToBody?a.$eval(c.typeaheadAppendToBody):!1,E=c.typeaheadAppendTo?a.$eval(c.typeaheadAppendTo):null,F=a.$eval(c.typeaheadFocusFirst)!==!1,G=c.typeaheadSelectOnExact?a.$eval(c.typeaheadSelectOnExact):!1,H=e(c.typeaheadIsOpen).assign||angular.noop,I=a.$eval(c.typeaheadShowHint)||!1,J=e(c.ngModel),K=e(c.ngModel+"($$$p)"),L=function(b,c){return angular.isFunction(J(a))&&q&&q.$options&&q.$options.getterSetter?K(b,{$$$p:c}):J.assign(b,c)},M=m.parse(c.uibTypeahead),N=a.$new(),O=a.$on("$destroy",function(){N.$destroy()});N.$on("$destroy",O);var P="typeahead-"+N.$id+"-"+Math.floor(1e4*Math.random());b.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":P});var Q,R;I&&(Q=angular.element("<div></div>"),Q.css("position","relative"),b.after(Q),R=b.clone(),R.attr("placeholder",""),R.val(""),R.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"}),b.css({position:"relative","vertical-align":"top","background-color":"transparent"}),Q.append(R),R.after(b));var S=angular.element("<div uib-typeahead-popup></div>");S.attr({id:P,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"}),angular.isDefined(c.typeaheadTemplateUrl)&&S.attr("template-url",c.typeaheadTemplateUrl),angular.isDefined(c.typeaheadPopupTemplateUrl)&&S.attr("popup-template-url",c.typeaheadPopupTemplateUrl);var T=function(){I&&R.val("")},U=function(){N.matches=[],N.activeIdx=-1,b.attr("aria-expanded",!1),T()},V=function(a){return P+"-option-"+a};N.$watch("activeIdx",function(a){0>a?b.removeAttr("aria-activedescendant"):b.attr("aria-activedescendant",V(a))});var W=function(a,b){return N.matches.length>b&&a?a.toUpperCase()===N.matches[b].label.toUpperCase():!1},X=function(c,d){var e={$viewValue:c};y(a,!0),B(a,!1),f.when(M.source(a,e)).then(function(f){var g=c===p.$viewValue;if(g&&w)if(f&&f.length>0){N.activeIdx=F?0:-1,B(a,!1),N.matches.length=0;for(var h=0;h<f.length;h++)e[M.itemName]=f[h],N.matches.push({id:V(h),label:M.viewMapper(N,e),model:f[h]});if(N.query=c,o(),b.attr("aria-expanded",!0),G&&1===N.matches.length&&W(c,0)&&(angular.isNumber(N.debounceUpdate)||angular.isObject(N.debounceUpdate)?k(function(){N.select(0,d)},angular.isNumber(N.debounceUpdate)?N.debounceUpdate:N.debounceUpdate["default"]):N.select(0,d)),I){var i=N.matches[0].label;c.length>0&&i.slice(0,c.length).toUpperCase()===c.toUpperCase()?R.val(c+i.slice(c.length)):R.val("")}}else U(),B(a,!0);g&&y(a,!1)},function(){U(),y(a,!1),B(a,!0)})};D&&(angular.element(i).on("resize",n),h.find("body").on("scroll",n));var Y=k(function(){N.matches.length&&o(),N.moveInProgress=!1},s);N.moveInProgress=!1,N.query=void 0;var Z,$=function(a){Z=g(function(){X(a)},u)},_=function(){Z&&g.cancel(Z)};U(),N.assignIsOpen=function(b){H(a,b)},N.select=function(d,e){var f,h,i={};x=!0,i[M.itemName]=h=N.matches[d].model,f=M.modelMapper(a,i),L(a,f),p.$setValidity("editable",!0),p.$setValidity("parse",!0),z(a,{$item:h,$model:f,$label:M.viewMapper(a,i),$event:e}),U(),N.$eval(c.typeaheadFocusOnSelect)!==!1&&g(function(){b[0].focus()},0,!1)},b.on("keydown",function(a){if(0!==N.matches.length&&-1!==r.indexOf(a.which)){if(-1===N.activeIdx&&(9===a.which||13===a.which))return U(),void N.$digest();a.preventDefault();var b;switch(a.which){case 9:case 13:N.$apply(function(){angular.isNumber(N.debounceUpdate)||angular.isObject(N.debounceUpdate)?k(function(){N.select(N.activeIdx,a)},angular.isNumber(N.debounceUpdate)?N.debounceUpdate:N.debounceUpdate["default"]):N.select(N.activeIdx,a)});break;case 27:a.stopPropagation(),U(),N.$digest();break;case 38:N.activeIdx=(N.activeIdx>0?N.activeIdx:N.matches.length)-1,N.$digest(),b=S.find("li")[N.activeIdx],b.parentNode.scrollTop=b.offsetTop;break;case 40:N.activeIdx=(N.activeIdx+1)%N.matches.length,N.$digest(),b=S.find("li")[N.activeIdx],b.parentNode.scrollTop=b.offsetTop}}}),b.bind("focus",function(a){w=!0,0!==t||p.$viewValue||g(function(){X(p.$viewValue,a)},0)}),b.bind("blur",function(a){A&&N.matches.length&&-1!==N.activeIdx&&!x&&(x=!0,N.$apply(function(){angular.isObject(N.debounceUpdate)&&angular.isNumber(N.debounceUpdate.blur)?k(function(){N.select(N.activeIdx,a)},N.debounceUpdate.blur):N.select(N.activeIdx,a)})),!v&&p.$error.editable&&(p.$viewValue="",b.val("")),w=!1,x=!1});var aa=function(a){b[0]!==a.target&&3!==a.which&&0!==N.matches.length&&(U(),j.$$phase||N.$digest())};h.on("click",aa),a.$on("$destroy",function(){h.off("click",aa),(D||E)&&ba.remove(),D&&(angular.element(i).off("resize",n),h.find("body").off("scroll",n)),S.remove(),I&&Q.remove()});var ba=d(S)(N);D?h.find("body").append(ba):E?angular.element(E).eq(0).append(ba):b.after(ba),this.init=function(b,c){p=b,q=c,N.debounceUpdate=p.$options&&e(p.$options.debounce)(a),p.$parsers.unshift(function(b){return w=!0,0===t||b&&b.length>=t?u>0?(_(),$(b)):X(b):(y(a,!1),_(),U()),v?b:b?void p.$setValidity("editable",!1):(p.$setValidity("editable",!0),null)}),p.$formatters.push(function(b){var c,d,e={};return v||p.$setValidity("editable",!0),C?(e.$model=b,C(a,e)):(e[M.itemName]=b,c=M.viewMapper(a,e),e[M.itemName]=void 0,d=M.viewMapper(a,e),c!==d?c:b)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","^?ngModelOptions","uibTypeahead"],link:function(a,b,c,d){d[2].init(d[0],d[1])}}}).directive("uibTypeaheadPopup",["$$debounce",function(a){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:!0,templateUrl:function(a,b){return b.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(b,c,d){b.templateUrl=d.templateUrl,b.isOpen=function(){var a=b.matches.length>0;return b.assignIsOpen({isOpen:a}),a},b.isActive=function(a){return b.active===a},b.selectActive=function(a){b.active=a},b.selectMatch=function(c,d){var e=b.debounce();angular.isNumber(e)||angular.isObject(e)?a(function(){b.select({activeIdx:c,evt:d})},angular.isNumber(e)?e:e["default"]):b.select({activeIdx:c,evt:d})}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(a,b,c){return{scope:{index:"=",match:"=",query:"="},link:function(d,e,f){var g=c(f.templateUrl)(d.$parent)||"uib/template/typeahead/typeahead-match.html";a(g).then(function(a){var c=angular.element(a.trim());e.replaceWith(c),b(c)(d)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(a,b,c){function d(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function e(a){return/<.*>/g.test(a)}var f;return f=b.has("$sanitize"),function(b,g){return!f&&e(b)&&c.warn("Unsafe use of typeahead please use ngSanitize"),b=g?(""+b).replace(new RegExp(d(g),"gi"),"<strong>$&</strong>"):b,f||(b=a.trustAsHtml(b)),b}}]),angular.module("uib/template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("uib/template/accordion/accordion-group.html",'<div class="panel" ng-class="panelClass || \'panel-default\'">\n  <div class="panel-heading" ng-keypress="toggleOpen($event)">\n    <h4 class="panel-title">\n      <div tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></div>\n    </h4>\n  </div>\n  <div class="panel-collapse collapse" uib-collapse="!isOpen">\n   <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("uib/template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("uib/template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissible\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("uib/template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n  <div class="carousel-inner" ng-transclude></div>\n  <a role="button" href class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n    <span class="sr-only">previous</span>\n  </a>\n  <a role="button" href class="right carousel-control" ng-click="next()" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n    <span class="sr-only">next</span>\n  </a>\n  <ol class="carousel-indicators" ng-show="slides.length > 1">\n    <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n      <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n    </li>\n  </ol>\n</div>')}]),angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("uib/template/carousel/slide.html",'<div ng-class="{\n    \'active\': active\n  }" class="item text-center" ng-transclude></div>\n')}]),angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/datepicker.html",'<div class="uib-datepicker" ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <uib-daypicker ng-switch-when="day" tabindex="0"></uib-daypicker>\n  <uib-monthpicker ng-switch-when="month" tabindex="0"></uib-monthpicker>\n  <uib-yearpicker ng-switch-when="year" tabindex="0"></uib-yearpicker>\n</div>')}]),angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/day.html",'<table class="uib-daypicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-weeks" ng-repeat="row in rows track by $index">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default btn-sm"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/month.html",'<table class="uib-monthpicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-months" ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/popup.html",'<ul class="uib-datepicker-popup dropdown-menu" dropdown-nested ng-if="isOpen" style="display: block" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n <li ng-transclude></li>\n <li ng-if="showButtonBar" style="padding:10px 9px 2px" class="uib-button-bar">\n  <span class="btn-group pull-left">\n   <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\')" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n   <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n  </span>\n  <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close()">{{ getText(\'close\') }}</button>\n </li>\n</ul>\n')}]),angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("uib/template/datepicker/year.html",'<table class="uib-yearpicker" role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-years" ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("uib/template/modal/backdrop.html",'<div class="modal-backdrop"\n     uib-modal-animation-class="fade"\n     modal-in-class="in"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n');}]),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(a){a.put("uib/template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    uib-modal-animation-class="fade"\n    modal-in-class="in"\n    ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}">\n    <div class="modal-dialog" ng-class="size ? \'modal-\' + size : \'\'"><div class="modal-content" uib-modal-transclude></div></div>\n</div>\n')}]),angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function(a){a.put("uib/template/pager/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n</ul>\n')}]),angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("uib/template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)">{{::getText(\'first\')}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)">{{::getText(\'last\')}}</a></li>\n</ul>\n')}]),angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"\n    uib-tooltip-template-transclude="contentExp()"\n    tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover-html.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind-html="contentExp()"></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover-template.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content"\n        uib-tooltip-template-transclude="contentExp()"\n        tooltip-template-transclude-scope="originScope()"></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("uib/template/popover/popover.html",'<div class="popover"\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}]),angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]),angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("uib/template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}" aria-valuetext="{{r.title}}"></i>\n</span>\n')}]),angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("uib/template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}" class="uib-tab">\n  <div ng-click="select()" uib-tab-heading-transclude>{{heading}}</div>\n</li>\n')}]),angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("uib/template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("uib/template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("uib/template/timepicker/timepicker.html",'<table class="uib-timepicker">\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n        <input style="width:50px;" type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n      </td>\n      <td class="uib-separator">:</td>\n      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n        <input style="width:50px;" type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n      </td>\n      <td ng-show="showSeconds" class="uib-separator">:</td>\n      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n        <input style="width:50px;" type="text" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n      </td>\n      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("uib/template/typeahead/typeahead-match.html",'<a href tabindex="-1" ng-bind-html="match.label | uibTypeaheadHighlight:query"></a>\n')}]),angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("ui.bootstrap.carousel").run(function(){!angular.$$csp().noInlineStyle&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>')}),angular.module("ui.bootstrap.tabs").run(function(){!angular.$$csp().noInlineStyle&&angular.element(document).find("head").prepend('<style type="text/css">.uib-tab > div{position:relative;display:block;padding:10px 15px;outline:0;color:#337ab7;}.uib-tab > div:focus,.uib-tab > div:hover{background-color:#eee;color:#23527c;}.uib-tab.disabled > div{color:#777;}.uib-tab.disabled > div:focus,.uib-tab.disabled > div:hover{color:#777;cursor:not-allowed;background-color:transparent;}.nav-tabs > .uib-tab > div{margin-right:2px;line-height:1.42857143;border:1px solid transparent;border-radius:4px 4px 0 0;}.nav-tabs > .uib-tab > div:hover{border-color:#eee #eee #ddd;}.nav-tabs > .uib-tab.active > div,.nav-tabs > .uib-tab.active > div:focus,.nav-tabs > .uib-tab.active > div:hover{color:#555;cursor:default;background-color:#fff;border-color:#ddd #ddd transparent #ddd;}.nav-pills > .uib-tab > div{border-radius:4px;}.nav-pills > .uib-tab.active > div,.nav-pills > .uib-tab.active > div:focus,.nav-pills > .uib-tab.active > div:hover{color:#fff;background-color:#337ab7;}</style>')});
;(function(angular){'use strict';angular.module('li.services.media.image-manager',['li.services.rest.rest-manager','li.services.community.context-manager','li.services.utils.lodash-utils','li.services.rest.liql','li.services.utils.url-manager','ngFileUpload','ui.bootstrap']).constant('$liImageManagerConfig',{settings:{maxFileSizeKey:'imageupload.max_file_size',allowedfileExtKey:'imageupload.legal_file_extensions',maxNumOfUploadAtATimeKey:'imageupload.max_uploaded_images_per_upload'},policies:{processAndRemoveExif:'image-upload.process-and-remove-exif-metadata'}}).factory('$liImageManager',['$liRestManager','$log','$liContextManager','$liImageManagerConfig','$interval','$liLodashUtils','$liql','Upload','$rootScope','$uibModal','$location','$liUrlManager','$document','$q','$timeout',function($liRestManager,$log,$liContextManager,$liImageManagerConfig,$interval,$liLodashUtils,$liql,Upload,$rootScope,$uibModal,$location,$liUrlManager,$document,$q,$timeout){var lightboxOpened=false;function startFakeProgress(image){var fakeProgressInterval=$interval(function(){if(image.progressStarted){$interval.cancel(fakeProgressInterval);}else if(image.progress<65){image.progress++;}},200);}
return{getImage:function getImage(fields,id){return $liql().select(fields).from('images').where('id').eq(id).exec().first();},getImagesForMessage:function getImagesForMessage(messageId,fields,associationType,limit,offset){return $liql().select(fields&&fields.length>0?fields:'*').from('images').where('messages.id').eq(messageId+'').and('association_type').eq(associationType).limit(limit).offset(offset).exec().unwrap();},getImageByDisplayId:function getImageByDisplayId(imgId,fields,useCache){useCache=useCache===undefined?true:useCache;return $liql().select(fields&&fields.length>0?fields:'*').from('images').where('id').eq(imgId+'').exec(useCache).first();},getImagesByUser:function getImagesByUser(userId,privacyLevel,visibility,fields,limit,offset){return $liql().select(fields&&fields.length>0?fields:'*').from('images').where('owner.id').eq(userId+'').and('album.privacy_level').eq(privacyLevel).and('visibility').eq(visibility).orderBy('upload_time').desc().limit(limit).offset(offset).exec().unwrap();},editImage:function editImage(image,editOptions){if(!image.id||!editOptions){throw'image with an id and editOptions must be specified.';}
var path='/images/'+image.id;editOptions.type='image';var payload={data:editOptions};return $liRestManager.request(path,null,payload,'put');},getImageUploadMaxFileSize:function getImageUploadMaxFileSize(){return $liContextManager.currentUserSettings()[$liImageManagerConfig.settings.maxFileSizeKey];},getAllowedImageUploadFileExts:function getAllowedImageUploadFileExts(){return $liContextManager.currentUserSettings()[$liImageManagerConfig.settings.allowedfileExtKey];},getMaxNumOfImageUploadAllowedAtATime:function getMaxNumOfImageUploadAllowedAtATime(){return $liContextManager.currentUserSettings()[$liImageManagerConfig.settings.maxNumOfUploadAtATimeKey];},isImageExtensionAllowed:function isImageExtensionAllowed(extension){var acceptExts=$liContextManager.currentUserSettings()[$liImageManagerConfig.settings.allowedfileExtKey];var allowedTypes=acceptExts.replace(/\.|\*/g,'').split(';');return allowedTypes.indexOf(extension)>-1;},isImageUploadExifAllowed:function isImageUploadExifAllowed(){return $liContextManager.currentUserPolicies()[$liImageManagerConfig.policies.processAndRemoveExif];},deleteImage:function deleteImage(image){if(!image){$log.error('An Image object is required');}else{return $liRestManager.request('/images/:id',{id:image.id},null,'delete',null);}},deleteDrafts:function deleteDrafts(images){if(!images||images.length<1){$log.error('An array of Image objects is required');}else{var ids=$liLodashUtils.map(images,function(image){return image.id;}).join(',');return $liRestManager.request('/images/drafts',{ids:ids},null,'delete',null);}},uploadImageFromUrl:function uploadImageFromUrl(imageOptions,image){var payload={data:imageOptions};payload.data.type='image';startFakeProgress(image);return $liRestManager.request('/images',null,payload,'post',null,false).then(function(response){image.isUploadComplete=true;return angular.extend(image,response.data);}).finally(function(){image.progress=100;});},uploadImageFromFile:function uploadImageFromFile(image,albumId,visibility,images){var params={request:{data:{type:'image',title:image.file.name,field:'image.content',visibility:visibility,description:'',album:{id:albumId}}}};return Upload.upload({url:$liRestManager.getFullyQualifiedUrl('/images'),data:{'image.content':image.file,'api.request':angular.toJson(params)},headers:{name:'image.content'}}).then(function(response){image.isUploadComplete=true;return angular.extend(image,response.data.data);},function(response){$log.error('uploading image failed for following reason: '+response.data.message);return $q.reject(response.data.message);},function(evt){var currentImgIdx=images.indexOf(image);var updatedProgress=parseInt(100.0*evt.loaded/evt.total);if(currentImgIdx!==-1){images[currentImgIdx].progress=updatedProgress;}else{image.progress=updatedProgress;images.push(image);}}).finally(function(){image.progress=100;});},lightbox:function lightbox(images,loadImages,limit,metaName,openContext,eventContext,lightboxType){function encodeContext(id){return id+=scope.openContext?':'+scope.openContext:'';}
function decodeContext(){var val=$location.search()['lightbox-'+metaName];if(val!==undefined){var parts=val.split(':');if(parts.length===2){options({openContext:parts[1]});}
return parts[0];}}
function open(image){scope.image=image;initialState=$location.state();lightboxOpened=true;closeHandled=false;pageOffsetX=window.pageXOffset;pageOffsetY=window.pageYOffset;modal=$uibModal.open({template:'<li:media-image-lightbox li-image="image" li-images="images" li-open-context="openContext" '+'li-load-images="loadImages(limit, offset, context)" li-limit="limit" li-close="close()" '+(lightboxType&&lightboxType.length>0?'li-type="'+lightboxType+'"':'')+'li-event-context="eventContext">'+'</li:media-image-lightbox>',scope:scope,controller:['$scope',function controller($scope){$scope.$watch('image',function(newImage){if(metaName){$location.search('lightbox-'+metaName,encodeContext(newImage.id));}});$scope.$watch(function(){return $location.search()['lightbox-'+metaName];},function(){$scope.$broadcast('liLightboxImageChange',decodeContext());});$scope.$on('modal.closing',function($event){if($body.hasClass('lia-fullscreen')){$event.preventDefault();}else{if(!closeHandled){closeHandled=true;clearState();}}
if('parentIFrame'in window){window.parentIFrame.sendMessage({action:'LITHIUM:dialog.close'});}});}],size:'imagelightbox'});modal.opened.then(function(){if('parentIFrame'in window){window.parentIFrame.sendMessage({action:'LITHIUM:dialog.open'});}});return scope.liModal;}
function close(){closeHandled=true;lightboxOpened=false;if(modal){clearState();modal.close();}
$timeout(function(){window.scrollTo(pageOffsetX,pageOffsetY);},10);}
function clearState(){if(metaName){try{$location.state(initialState);}catch(e){}
if($location.search()['lightbox-'+metaName]){$location.search('lightbox-'+metaName,null);}}}
function options(opts){if(opts){angular.extend(scope,opts);}
return scope;}
var modal;var initialState;var closeHandled=false;var $body=angular.element($document[0].body);var scope=$rootScope.$new();var pageOffsetX;var pageOffsetY;scope.images=images;scope.loadImages=loadImages;scope.limit=limit;scope.close=close;scope.openContext=openContext;scope.eventContext=eventContext;if(metaName&&!lightboxOpened){var imageDisplayId=decodeContext();if(imageDisplayId){open({id:imageDisplayId});}}
return{open:open,close:close,options:options};},getCropUrl:function getCropUrl(url,visibility){var adjustedUrl=$liUrlManager.adjustUrl(url);if(visibility!=='rejected'){adjustedUrl.addPathParam('crop-image','true');}
return adjustedUrl.build();},getImagesInfoFromMarkup:function getImagesInfoFromMarkup(markup){var imgs=[];var imgElms=angular.element('<div>').append(markup).find('li-image');angular.forEach(imgElms,function(img){var $img=angular.element(img);var id=$img.attr('id');var size=$img.attr('size');imgs.push({id:id,size:size});});return imgs;},getLiImagesMarkup:function getLiImagesMarkup(images){var wrapper=angular.element('<div>');angular.forEach(images,function(image){var size=image.size||'large';var liElm=angular.element('<li-image>');liElm.attr({id:image.id,size:size,width:image.width});wrapper.append(liElm);});return wrapper.html();}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.services.messages.message-manager',['li.services.rest.rest-manager','li.services.rest.liql']).factory('$liMessageManager',['$liRestManager','$q','$liql',function($liRestManager,$q,$liql){function getMessagesForImage(imageId,fields,limit){return $liql().select(fields).from('messages').where('images.id').eq(imageId).limit(limit).exec().unwrap();}
function getMessageById(messageId){return $liRestManager.request('/messages/:messageId',{messageId:messageId}).then(function(response){return response.data;});}
function getFloatedMessages(fields,boardId,floatScope,limit,expands){return $liql().select(fields).from('floated_messages').expand(expands).where('message.board.id').eq(boardId).and('scope').eq(floatScope).limit(limit).exec().unwrap();}
function getSubQueryForMessages(messageIds,messageFields,subCollection,subCollectionFields){messageIds=angular.isArray(messageIds)?messageIds:[messageIds];var data={fields:messageFields,constraints:[{id:{in:messageIds}}],subQueries:{}};data.subQueries[subCollection]={fields:subCollectionFields};return $liRestManager.request('/messages/search',{},data,'post').then(function(response){return response.data;});}
return{getMessagesForImage:getMessagesForImage,getMessageById:getMessageById,getFloatedMessages:getFloatedMessages,getSubQueryForMessages:getSubQueryForMessages};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.services.media.matchmedia-utils',[]).constant('$liMatchmediaUtilsConfig',{screenSizes:{xs:'(max-width: 480px)',sm:'(min-width: 481px) and (max-width: 768px)',md:'(min-width: 769px) and (max-width: 992px)',lg:'(min-width: 993px) and (max-width: 1500px)',xl:'(min-width: 1501px)'}}).factory('$liMatchmediaUtils',['$window','$rootScope','$liMatchmediaUtilsConfig',function($window,$rootScope,$liMatchmediaUtilsConfig){var lastMediaQueryString;var currentSize;var currentMediaQuery;var listenersForSize={xs:[],sm:[],md:[],lg:[],xl:[]};var currentBodyClass='';function addListener(mediaQueryString,listener){var mediaQuery=$window.matchMedia(mediaQueryString);mediaQuery.addListener(function(){if(mediaQueryString!==lastMediaQueryString){lastMediaQueryString=mediaQueryString;listener.apply($window,arguments);$rootScope.$apply();}});listener(mediaQuery);}
function addListenerForSizes(screenSizes,ifListener,elseListener){var inIf=[];screenSizes=angular.isArray(screenSizes)?screenSizes:[screenSizes];angular.forEach(screenSizes,function(screenSize){listenersForSize[screenSize].push(ifListener);inIf.push(screenSize);if(currentSize===screenSize){ifListener(currentMediaQuery);}});if(angular.isFunction(elseListener)){angular.forEach($liMatchmediaUtilsConfig.screenSizes,function(mq,screenSize){if(inIf.indexOf(screenSize)===-1){listenersForSize[screenSize].push(elseListener);if(currentSize===screenSize){elseListener(currentMediaQuery);}}});}}
angular.forEach($liMatchmediaUtilsConfig.screenSizes,function(mediaQueryString,screenSize){addListener(mediaQueryString,function(mediaQuery){if(mediaQuery.matches){var bodyClass='lia-media-size-'+screenSize;angular.element(document.body).removeClass(currentBodyClass).addClass(bodyClass);currentBodyClass=bodyClass;currentSize=screenSize;currentMediaQuery=mediaQuery;angular.forEach(listenersForSize[screenSize],function(listener){listener(mediaQuery);});}});});return{addListener:addListener,addListenerForSizes:addListenerForSizes,matchMedia:function matchMedia(mediaString){return $window.matchMedia(mediaString);}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.services.utils.image-utils',[]).constant('liMediaImageUtilsConfig',{acceptedSizes:{small:'small',medium:'medium',large:'large'}}).factory('$liImageUtils',['liMediaImageUtilsConfig','$q','$window','$document','$interval',function(liMediaImageUtilsConfig,$q,$window,$document,$interval){function base64ToArrayBuffer(dataUrl){var isCapable=$window.atob&&$window.ArrayBuffer&&$window.FileReader;if(!isCapable){return null;}
var base64=dataUrl.replace(/^data\:([^\;]+)\;base64,/gmi,'');var binary=$window.atob(base64);var len=binary.length;var bytes=new Uint8Array(len);for(var i=0;i<len;i++){bytes[i]=binary.charCodeAt(i);}
return bytes.buffer;}
function isLoaded(img){if(angular.isString(img)){if(loadedImgs[img]){img=loadedImgs[img];}else{return false;}}
return(img.complete||img.readyState===4||inCache(angular.element(img).attr('src')))&&img.naturalHeight!==undefined&&img.naturalHeight!==0;}
function inCache(src){return loadedImgs.hasOwnProperty(src);}
var loadedImgs={};return{getScaledDimensions:function getScaledDimensions(originalDim,desiredDim){var widthFactor;var heightFactor;var scaleFactor;var scaledWidth;var scaledHeight;if(originalDim.width===0&&originalDim.height===0){return desiredDim;}
widthFactor=desiredDim.width/originalDim.width;heightFactor=desiredDim.height/originalDim.height;scaleFactor=Math.min(widthFactor,heightFactor);if(scaleFactor>=1.0){return originalDim;}else{scaledWidth=Math.round(scaleFactor*originalDim.width);scaledHeight=Math.round(scaleFactor*originalDim.height);return{width:scaledWidth,height:scaledHeight};}},getImageOrientation:function getImageOrientation(dataUrl){var buffer=base64ToArrayBuffer(dataUrl);return buffer!==null&&$window.EXIF?$window.EXIF.readFromBinaryFile(buffer).Orientation:null;},readFile:function readFile(file){var deferred=$q.defer();if($window.FileReader){var fileReader=new $window.FileReader();fileReader.readAsDataURL(file);fileReader.onload=function(e){deferred.resolve(e.target.result);};}else{deferred.reject();}
return deferred.promise;},forceLoad:function forceLoad(src){var deferred=$q.defer();var interval;var count;var threshold=100;if(!inCache(src)){var dummyImg=$document[0].createElement('img');dummyImg.onload=function(event){if(isLoaded(dummyImg)){loadedImgs[src]=dummyImg;deferred.resolve(event,dummyImg);}else{interval=$interval(function(){if(isLoaded(dummyImg)){$interval.cancel(interval);loadedImgs[src]=dummyImg;deferred.resolve(event,dummyImg);}else if(count++>threshold){$interval.cancel(interval);}},100);}};dummyImg.src=src;}else{return $q.when(null,loadedImgs[src]);}
return deferred.promise;},isLoaded:isLoaded,inCache:inCache,getAltText:function getAltText(image){return image.description?image.description:image.title;}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.directives.common.img-load',['li.services.utils.image-utils']).directive('liCommonImgLoad',['$interval','$document','$liImageUtils',function($interval,$document,$liImageUtils){return{restrict:'A',scope:{onLoad:'&liCommonImgLoad'},link:function link($scope,$element){$scope.$watch(function(){return $element.attr('src');},function(src){if(src){$liImageUtils.forceLoad(src).then($scope.onLoad);}});}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.filters.formatting.date',['li.services.community.context-manager']).filter('liDate',['$filter','$liContextManager',function($filter,$liContextManager){var currentUserSettings=$liContextManager.currentUserSettings();var friendlyDatesEnabled=currentUserSettings['layout.friendly_dates_enabled'];var datePattern=currentUserSettings['layout.format_pattern_date'];var timePattern='h:mm a';return function(date,friendlyDate,dateOnly,timeOnly){if(friendlyDate!==undefined&&friendlyDate!==null&&friendlyDatesEnabled){return friendlyDate;}
if(dateOnly){return $filter('date')(date,datePattern);}
if(timeOnly){return $filter('date')(date,timePattern);}
return $filter('date')(date,datePattern+' '+timePattern);};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.filters.formatting.unsafe',[]).filter('liUnsafe',['$sce',function($sce){return function(val){return $sce.trustAsHtml(val);};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.directives.media.publishing-history',['li.services.messages.message-manager','li.services.utils.param-utils','li.services.plugins.localization-manager','li.filters.formatting.date','li.filters.formatting.unsafe','li.directives.common.text-ready']).directive('liMediaPublishingHistory',['$liMessageManager','$liParamUtils','$filter',function($liMessageManager,$liParamUtils,$filter){return{scope:{imageId:'=liImageId'},restrict:'AE',templateUrl:'media/publishing-history/publishing-history.tpl.html',link:function link($scope){$scope.showPublishingHistory=false;if(!$liParamUtils.validateParams('liMediaPublishingHistory',$scope,['imageId'])){return;}
function loadMessages(){$liMessageManager.getMessagesForImage($scope.imageId,['id','subject','view_href','post_time','post_time_friendly','board.title','board.view_href','replies.count(*)'],100).then(function(messages){$scope.messages=messages;});}
loadMessages();$scope.getPostDate=function(msg){return $filter('liDate')(msg.post_time,msg.post_time_friendly);};$scope.$watch('imageId',loadMessages);}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.directives.users.user-login',['li.directives.common.text-ready']).directive('liUsersUserLogin',function(){return{templateUrl:'users/user-login/user-login.tpl.html',restrict:'EA',replace:true,scope:{user:'='}};});})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.services.auth.authentication-manager',['li.services.rest.rest-manager','li.services.utils.url-manager','li.services.community.context-manager']).constant('$liAuthenticationManagerConfig',{REDIRECT_REASON:{PERMISSION_DENIED:'permissiondenied',SESSION_EXPIRED:'sessionexpired',NOT_REGISTERED:'notregistered',EMAIL_NOTVERIFIED:'emailnotverified',REAUTHENICATE_REQUIRED:'reauthenticaterequired'}}).factory('$liAuthenticationManager',['$liContextManager','$liUrlManager','$location','$window','$liAuthenticationManagerConfig',function($liContextManager,$liUrlManager,$location,$window,$liAuthenticationManagerConfig){var page=$liContextManager.page();var loginUrls={default:page.auth_urls.login_url,notregistered:page.auth_urls.login_url_not_registered_dest_tpl};function deleteStaleUserAction(pageName){var pageNames=['UserLoginPage','UserRegistrationPage','ForgotPasswordPage','UserResetPasswordPage','MobileUserLoginPage','MobileUserRegistrationPage','MobileForgotPasswordPage','MobileUserResetPasswordPage','MobileVerifyUserEmailPage'];for(var i in pageNames){if(pageNames[i]===pageName){return;}}
var isActionRecent=localStorage.getItem('li:is-action-recent');if(isActionRecent!==null){if(isActionRecent==='true'){localStorage.setItem('li:is-action-recent','false');}else{var savedAction=localStorage.getItem('li:action');if(savedAction!==null){localStorage.removeItem(savedAction);}
localStorage.removeItem('li:is-action-recent');localStorage.removeItem('li:action');}}}
deleteStaleUserAction($liContextManager.page().name);return{getCurrentUser:function getCurrentUser(){return $liContextManager.currentUser();},login:function login(reason,url,isRedirectTop){reason=reason||'default';isRedirectTop=isRedirectTop===undefined?false:isRedirectTop;var bldr=$liUrlManager.adjustUrl(loginUrls[reason]);if(!url){url=isRedirectTop?document.referrer:$location.absUrl();}
bldr.compileQueryParams({destUrl:url});if(isRedirectTop&&$window.top){$window.top.location.href=bldr.build();}else{$window.location.href=bldr.build();}},saveUserActionAndLogin:function saveUserActionAndLogin(action,params,isRedirectTop){isRedirectTop=isRedirectTop===undefined?false:isRedirectTop;localStorage.setItem('li:is-action-recent','true');localStorage.setItem('li:action',action);localStorage.setItem(action,JSON.stringify(params));this.login($liAuthenticationManagerConfig.REDIRECT_REASON.NOT_REGISTERED,'',isRedirectTop);},retrieveUserAction:function retrieveUserAction(action){var paramString=localStorage.getItem(action);if(paramString!==null){localStorage.removeItem('li:is-action-recent');localStorage.removeItem('li:action');localStorage.removeItem(action);return JSON.parse(paramString);}else{return null;}}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.services.kudos.kudos-manager',['li.services.rest.rest-manager','li.services.auth.authentication-manager','li.services.rest.liql','li.services.utils.lodash-utils','li.services.community.context-manager','li.services.utils.url-manager']).constant('$liKudosManagerConfig',{stateMap:{100:'actionable',101:'denied',103:'feature_disabled',104:'disabled',105:'frozen',self:'self',actioned:'actioned'}}).factory('$liKudosManager',['$liql','$liRestManager','$liKudosManagerConfig','$liContextManager','$liLodashUtils','$liAuthenticationManager','$q','$document',function($liql,$liRestManager,$liKudosManagerConfig,$liContextManager,$liLodashUtils,$liAuthenticationManager,$q,$document){var cache={};var user=$liContextManager.currentUser();var isContest=$liContextManager.coreNode().conversation_style==='contest';var isOneKudoPerContest=$liContextManager.currentUserSettings()['contest.one_kudo_per_contest'];var limitToSingleKudoPerNode=isContest&&isOneKudoPerContest;var $body=angular.element($document[0].body);if(limitToSingleKudoPerNode){$body.addClass('lia-kudo-single-vote');}
function isOwner(entity){return $liLodashUtils.get(entity,'owner.id',-1)===user.id;}
function hasGivenKudos(entity){var cacheVal=getFromCache(entity);if($liLodashUtils.has(cacheVal,'hasGiven')){return $q.when(cacheVal.hasGiven);}
return $liql().select('*').from('kudos').where(entity.type+'.id').eq(entity.id).and('user.id').eq(user.id+'').exec().unwrap().then(function(item){var hasGiven=item.length>0;updateCache(entity,{hasGiven:hasGiven});return hasGiven;});}
function getKudosWeight(entity){var cacheVal=getFromCache(entity);if($liLodashUtils.has(cacheVal,'weight')){return cacheVal.weight;}else if($liLodashUtils.has(entity,'kudos.sum.weight')){updateCache(entity,{weight:entity.kudos.sum.weight});return entity.kudos.sum.weight;}
return $liql().select('kudos.sum(weight)').from(entity.type+'s').where('id').eq(entity.id).exec().first().then(function(obj){$liLodashUtils.set(entity,'kudos.sum.weight',obj.kudos.sum.weight);updateCache(entity,{weight:obj.kudos.sum.weight});return obj.kudos.sum.weight;});}
function getKudosAllowed(entity,force){var cacheVal=getFromCache(entity);if($liLodashUtils.has(cacheVal,'allowed')&&!force){return $q.when(cacheVal.allowed);}
return $liRestManager.request('/allowed',{method:'post',path:'/'+entity.type+'s/'+entity.id+'/kudos'},'get').then(function(response){var reason=$liKudosManagerConfig.stateMap[response.data.reason_code];if(reason==='feature_disabled'||reason==='disabled'){return reason;}else if(user.is_anonymous){return'anon';}else if(isOwner(entity)){return'self';}else{return hasGivenKudos(entity).then(function(given){if(given){return'actioned';}else{return reason;}});}}).then(function(allowed){updateCache(entity,{allowed:allowed});return allowed;});}
function giveOrRevokeKudos(entity){if(user.is_anonymous){$liAuthenticationManager.saveUserActionAndLogin(buildLoginActionId(entity),{});return $q.defer().promise;}else{return hasGivenKudos(entity).then(function(hasGiven){var method=hasGiven?'delete':'post';return $liRestManager.request('/'+entity.type+'s/:id/kudos',{id:entity.id},{data:{type:'kudo'}},method).then(function(response){var allowed=hasGiven?'actionable':'actioned';if($liLodashUtils.has(entity,'kudos.sum.weight')){var modifier=hasGiven?-response.data.weight:response.data.weight;entity.kudos.sum.weight+=modifier;updateCache(entity,{hasGiven:!hasGiven,allowed:allowed,weight:entity.kudos.sum.weight});}
if(limitToSingleKudoPerNode){angular.forEach(Object.keys(cache),function(key){var item=cache[key];if(item.entity.id!==entity.id){var newState;if(!hasGiven){newState='denied';updateCache(item.entity,{previousAllowed:item.allowed,allowed:newState});if(item.refreshCallback){item.refreshCallback(newState);}}else{if(item.previousAllowed){newState=item.previousAllowed;updateCache(item.entity,{allowed:newState});if(item.refreshCallback){item.refreshCallback(newState);}}else{getKudosAllowed(item.entity,true).then(function(newState){if(item.refreshCallback){item.refreshCallback(newState);}});}}}});$body.toggleClass('lia-kudo-single-vote-given',!hasGiven);}
response.data.state=allowed;return response;}).catch(function(){});});}}
function handleSavedKudosAction(entity){if(!user.is_anonymous){var action=$liAuthenticationManager.retrieveUserAction(buildLoginActionId(entity));if(action){return hasGivenKudos(entity).then(function(hasGiven){if(!hasGiven){return giveOrRevokeKudos(entity);}});}}
return $q.when();}
function updateCache(entity,context){var key=entity.type+entity.id;var item;if(cache[key]){item=cache[key];item.entity=entity;}else{item={entity:entity};}
cache[key]=angular.extend(item,context);}
function getFromCache(entity){return cache[entity.type+entity.id]||null;}
function buildLoginActionId(entity){return'li:kudos-'+entity.type+'-'+entity.id;}
function onRefreshState(entity,fn){updateCache(entity,{refreshCallback:fn});}
return{getKudosWeight:getKudosWeight,getKudosAllowed:getKudosAllowed,giveOrRevokeKudos:giveOrRevokeKudos,hasGivenKudos:hasGivenKudos,handleSavedKudosAction:handleSavedKudosAction,onRefreshState:onRefreshState};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.directives.kudos.kudo',['li.services.kudos.kudos-manager','li.services.plugins.localization-manager','li.services.utils.lodash-utils','li.services.media.image-manager','li.services.utils.url-manager','li.directives.common.text-ready','li.filters.formatting.unsafe','li.services.utils.param-utils']).directive('liKudosKudo',['$liLodashUtils','$liKudosManager','$liUrlManager','$q','$liParamUtils',function($liLodashUtils,$liKudosManager,$liUrlManager,$q,$liParamUtils){return{restrict:'AE',template:$liParamUtils.typeTemplate,scope:{entity:'=liEntity',liType:'@'},link:function link($scope){var currentEntityId;var processing=false;function updateAfterAction(response){var state=$liLodashUtils.get(response,'data.state',null);if(state!==null){$scope.state=response.data.state;}}
$liParamUtils.initTypeTemplate($scope,'kudos/kudo/kudo',$scope.liType);$scope.canKudo=function(){return $scope.state==='actionable'||$scope.state==='actioned'||$scope.state==='anon';};$scope.whoKudoedUrl=function(){var context={tab:'all-users'};if($scope.entity.type==='image'){context['image-id']=$scope.entity.id;}else if($scope.entity.type==='message'){context['message-uid']=$scope.entity.id;}
return $liUrlManager.buildUrl('KudosMessagePage',context);};$scope.$watch('entity',function(newEntity){if(newEntity&&newEntity.type&&currentEntityId!==newEntity.id){currentEntityId=newEntity.id;$liKudosManager.getKudosAllowed($scope.entity).then(function(state){$scope.state=state;});$liKudosManager.onRefreshState($scope.entity,function(state){$scope.state=state;});$q.all([$liKudosManager.getKudosWeight($scope.entity),$liKudosManager.handleSavedKudosAction($scope.entity)]).then(function(responses){if(responses[0]!==undefined){$liLodashUtils.set($scope.entity,'kudos.sum.weight',responses[0]);}
updateAfterAction(responses[1]);});}});$scope.giveOrRevokeKudos=function($event){$event.stopPropagation();$event.preventDefault();if($scope.canKudo()&&processing===false){processing=true;$liKudosManager.giveOrRevokeKudos($scope.entity).then(updateAfterAction).finally(function(){processing=false;});}};$scope.gotoWhoKudoed=function(){if($liLodashUtils.get($scope.entity,'kudos.sum.weight',-1)>0){$liUrlManager.redirect($scope.whoKudoedUrl());}};$scope.cssClasses=function(){var cssClasses=[];if(!$scope.canKudo()){cssClasses.push('lia-kudos-button-disabled');}
if($scope.state){cssClasses.push('lia-kudos-'+$scope.state);}
if($scope.entity&&$scope.entity.type){cssClasses.push('lia-kudos-'+$scope.entity.type+'-kudos');}
return cssClasses;};}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.directives.media.download-media',['li.directives.common.element-hook','li.services.plugins.localization-manager']).directive('liMediaDownloadMedia',['$timeout',function($timeout){return{restrict:'AE',templateUrl:'media/download-media/download-media.tpl.html',scope:{liMediaUrl:'=',liType:'='},link:function link($scope){$scope.download=function($event){$event.stopPropagation();if(angular.element($event.target).hasClass('lia-media-download-icon')&&$scope.downloadElement){$timeout(function(){$scope.downloadElement[0].click();});}};}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.services.moderation.abuse-manager',['li.services.rest.rest-manager','li.services.auth.authentication-manager','li.services.community.context-manager','li.services.utils.lodash-utils']).constant('$liAbuseManagerConfig',{type:{message:'messages',image:'images'},stateMap:{100:'actionable',101:'denied',102:'actioned',anon:'anon',actioned:'actioned'}}).factory('$liAbuseManager',['$liRestManager','$q','$log','$cacheFactory','$liAbuseManagerConfig','$liAuthenticationManager','$liContextManager','$liLodashUtils',function($liRestManager,$q,$log,$cacheFactory,$liAbuseManagerConfig,$liAuthenticationManager,$liContextManager,$liLodashUtils){var user=$liContextManager.currentUser();var flagsGiven={};var jsonPayload={request:{data:{}}};function createActionId(entity){return'li:flag-'+entity.type+'-'+entity.id;}
function flag(entity,message){if(message){jsonPayload.request.data.body=message;}
var resource=entity.type+'s';if(user.is_anonymous){$liAuthenticationManager.saveUserActionAndLogin(createActionId(entity),{type:entity.type,id:entity.id});return $q.defer().promise;}
var requestUrl='/'+resource+'/'+entity.id+'/abuse_reports';return $liRestManager.request(requestUrl,{},jsonPayload,'post').then(function(response){addToCache(entity,true);response.data.state='actioned';return response;});}
function getFlagAllowed(entity){var requestedPath=[entity.type+'s',entity.id,'abuse_reports'].join('/');var qParams={method:'post',path:requestedPath};var requestUrl='/allowed';var state=$liLodashUtils.get(flagsGiven,entity.type+'.'+entity.id,null);if(state!==null){return $q.when('actioned');}
return $liRestManager.request(requestUrl,qParams,{},'get',true).then(function(response){var state=$liAbuseManagerConfig.stateMap[response.data.reason_code];if(state!=='actioned'&&user.is_anonymous){return'anon';}else{return state;}});}
function addToCache(entity,state){if(!flagsGiven[entity.type]){flagsGiven[entity.type]={};}
flagsGiven[entity.type][entity.id]=state;}
function handleSavedFlagAction(entity){var retrievedAction=$liAuthenticationManager.retrieveUserAction(createActionId(entity));if(retrievedAction&&!user.is_anonymous){return flag({type:retrievedAction.type,id:retrievedAction.id},'Flagged');}
return $q.when();}
return{flag:flag,getFlagAllowed:getFlagAllowed,handleSavedFlagAction:handleSavedFlagAction};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.directives.moderation.flag-entity',['li.services.moderation.abuse-manager','li.services.plugins.localization-manager','li.services.auth.authentication-manager','li.services.plugins.localization-manager','li.directives.common.text-ready']).directive('liModerationFlagEntity',['$filter','$log','$liAbuseManager','$liLodashUtils',function($filter,$log,$liAbuseManager,$liLodashUtils){function link($scope){function updateAfterAction(response){var state=$liLodashUtils.get(response,'data.state',null);if(state){$scope.state=response.data.state;}}
$scope.canFlag=function(){return $scope.state==='actionable'||$scope.state==='anon';};$scope.flag=function($event){$event.stopPropagation();$event.preventDefault();if($scope.canFlag()){$liAbuseManager.flag($scope.entity,'Flagged').then(updateAfterAction);}};$scope.$watch('entity',function(){if($scope.entity&&$scope.entity.type&&$scope.entity.id){$liAbuseManager.getFlagAllowed($scope.entity).then(function(state){$scope.state=state;});$liAbuseManager.handleSavedFlagAction($scope.entity).then(updateAfterAction);}});}
return{templateUrl:'moderation/flag-entity/flag-entity.tpl.html',restrict:'EA',replace:false,scope:{entity:'=liEntity'},link:link};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';var NAME_LI_ENTER_OR_CLICK='liEnterOrClick';angular.module('li.directives.common.enter-or-click',['li.services.events.event-manager']).directive(NAME_LI_ENTER_OR_CLICK,['$parse','$liEventManager',function($parse,$liEventManager){return{restrict:'A',compile:function compile($element,attr){var fn=$parse(attr[NAME_LI_ENTER_OR_CLICK]);return function liEnterOrClickHandler(scope,element){element.on('keypress click',function(event){if(event.which===$liEventManager.KeyCodes.ENTER||event.type==='click'){scope.$apply(function(){fn(scope,{$event:event});});}});};}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);

(function(){'use strict';var document=typeof window!=='undefined'&&typeof window.document!=='undefined'?window.document:{};var isCommonjs=typeof module!=='undefined'&&module.exports;var keyboardAllowed=typeof Element!=='undefined'&&'ALLOW_KEYBOARD_INPUT'in Element;var fn=(function(){var val;var fnMap=[['requestFullscreen','exitFullscreen','fullscreenElement','fullscreenEnabled','fullscreenchange','fullscreenerror'],['webkitRequestFullscreen','webkitExitFullscreen','webkitFullscreenElement','webkitFullscreenEnabled','webkitfullscreenchange','webkitfullscreenerror'],['webkitRequestFullScreen','webkitCancelFullScreen','webkitCurrentFullScreenElement','webkitCancelFullScreen','webkitfullscreenchange','webkitfullscreenerror'],['mozRequestFullScreen','mozCancelFullScreen','mozFullScreenElement','mozFullScreenEnabled','mozfullscreenchange','mozfullscreenerror'],['msRequestFullscreen','msExitFullscreen','msFullscreenElement','msFullscreenEnabled','MSFullscreenChange','MSFullscreenError']];var i=0;var l=fnMap.length;var ret={};for(;i<l;i++){val=fnMap[i];if(val&&val[1]in document){for(i=0;i<val.length;i++){ret[fnMap[0][i]]=val[i];}
return ret;}}
return false;})();var eventNameMap={change:fn.fullscreenchange,error:fn.fullscreenerror};var screenfull={request:function(elem){return new Promise(function(resolve,reject){var request=fn.requestFullscreen;var onFullScreenEntered=function(){this.off('change',onFullScreenEntered);resolve();}.bind(this);this.on('change',onFullScreenEntered);elem=elem||document.documentElement;var promise;if(/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)){promise=elem[request]();}else{promise=elem[request](keyboardAllowed?Element.ALLOW_KEYBOARD_INPUT:{});}
Promise.resolve(promise).catch(reject);}.bind(this));},exit:function(){return new Promise(function(resolve){if(!this.isFullscreen){resolve();return;}
var onFullScreenExit=function(){this.off('change',onFullScreenExit);resolve();}.bind(this);document[fn.exitFullscreen]();this.on('change',onFullScreenExit);}.bind(this));},toggle:function(elem){return this.isFullscreen?this.exit():this.request(elem);},onchange:function(callback){this.on('change',callback);},onerror:function(callback){this.on('error',callback);},on:function(event,callback){var eventName=eventNameMap[event];if(eventName){document.addEventListener(eventName,callback,false);}},off:function(event,callback){var eventName=eventNameMap[event];if(eventName){document.removeEventListener(eventName,callback,false);}},raw:fn};if(!fn){if(isCommonjs){module.exports=false;}else{window.screenfull=false;}
return;}
Object.defineProperties(screenfull,{isFullscreen:{get:function(){return Boolean(document[fn.fullscreenElement]);}},element:{enumerable:true,get:function(){return document[fn.fullscreenElement];}},enabled:{enumerable:true,get:function(){return Boolean(document[fn.fullscreenEnabled]);}}});if(isCommonjs){module.exports=screenfull;module.exports.default=screenfull;}else{window.screenfull=screenfull;}})();
;(function(angular){'use strict';angular.module('li.directives.media.image-lightbox',['li.services.media.matchmedia-utils','li.services.utils.url-manager','li.directives.common.img-load','li.directives.media.publishing-history','li.directives.users.user-login','li.directives.kudos.kudo','li.directives.media.download-media','li.directives.moderation.flag-entity','li.services.events.event-manager','li.services.utils.param-utils','li.services.utils.lodash-utils','li.services.utils.image-utils','li.services.media.image-manager','li.filters.formatting.date','li.services.community.context-manager','ngTouch','li.directives.common.enter-or-click']).constant('liMediaImageLightboxConfig',{imageSizes:{1000:'xs',1500:'sm',1700:'md',2000:'lg',2500:'xl'},filmstripSizes:{0:'xs',5:'sm',7:'md',11:'lg',13:'xl'},events:{changeImage:'LITHIUM:liMediaImageLightbox:changeImage'}}).directive('liMediaImageLightbox',['$window','liMediaImageLightboxConfig','$liMatchmediaUtils','$liUrlManager','$liEventManager','$liParamUtils','$liLodashUtils','$liImageUtils','$timeout','$rootScope','$liImageManager','$liContextManager','$document',function($window,liMediaImageLightboxConfig,$liMatchmediaUtils,$liUrlManager,$liEventManager,$liParamUtils,$liLodashUtils,$liImageUtils,$timeout,$rootScope,$liImageManager,$liContextManager,$document){return{restrict:'AE',template:$liParamUtils.typeTemplate,scope:{image:'=?liImage',images:'=?liImages',loadImages:'&liLoadImages',limit:'=?liLimit',close:'&liClose',openContext:'=?liOpenContext',eventContext:'=?liEventContext',liType:'@'},link:function link($scope,$element){function _loadImages(limit){return $scope.loadImages({limit:limit,offset:page++ *limit,context:$scope.openContext}).then(function(response){$scope.images=$scope.images.concat(response);hasMore=response.length===limit;});}
function getImage(){if($scope.index!==undefined){$scope.image=$scope.images[$scope.index];}else{setImage($scope.image.id);}
return $scope.image;}
function setImage(imageId){for(var i=0;i<$scope.images.length;i++){if($scope.images[i].id===imageId){$scope.index=i;$scope.image=$scope.images[i];}}}
function handleKey($event){var keyCode=$event.keyCode||$event.which;if(keyCode===$liEventManager.KeyCodes.LEFT){$scope.prev($event);$scope.$apply();}else if(keyCode===$liEventManager.KeyCodes.RIGHT){$scope.next($event);$scope.$apply();}}
function redrawIcons(){$icons=$icons?$icons:getImageContainer().find('i');$icons.addClass('lia-hidden');$timeout(function(){$icons.removeClass('lia-hidden');});}
function getImageContainer(){$imgContainer=$imgContainer&&$imgContainer[0]?$imgContainer:angular.element($element[0].querySelector('.lia-lightbox-main-image'));return $imgContainer;}
function resizeContainer(){var img=getImage();if(isMobile||$window.screenfull.enabled&&$window.screenfull.isFullscreen){getImageContainer().css({height:null,'min-height':null});minHeight=450;if(isMobile){viewport.content='width=device-width, minimum-scale=1.0, maximum-scale=1.0, initial-scale=1.0';}
redrawIcons();}else if(img.height>minHeight){var newMinHeight=Math.min(img.height,$window.innerHeight-gutterHeight());if(newMinHeight>minHeight){minHeight=newMinHeight;getImageContainer().css({height:minHeight+'px','min-height':minHeight+'px'});redrawIcons();}}}
function buildHref(img){if(img.original_href){var href=$liUrlManager.adjustUrl(img.original_href).removePathParam('image-size');if($liLodashUtils.get(img,'visibility')!=='rejected'){href.addPathParam('image-dimensions',currentImageRes||2000);}
return href.build();}
return null;}
function getImageHref(){return buildHref(getImage());}
function preLoad(start,end){var imgs=$scope.images.slice(start,end+1);angular.forEach(imgs,function(img){preLoaded.push(img.id);$liImageUtils.forceLoad(buildHref(img));});}
function checkLoadMore(){if(hasMore&&($scope.images.length-$scope.index<=loadMoreThreshold||filmstripEnd!==null&&$scope.images.length-filmstripEnd<=loadMoreThreshold)){_loadImages($scope.limit).then(function(){if(preLoaded.length-$scope.index<preLoadThreshold){preLoad(preLoaded.length+1,preLoaded.length+1+preLoadCount);}});}}
function gutterHeight(){var infoRowHeight=80;var filmStripRowHeight=110;var gutter=infoRowHeight;if($scope.images.length>1){gutter+=filmStripRowHeight;}
return gutter;}
function setOrientationStyle(){isLandscape=$window.orientation===-90||$window.orientation===90;$body.toggleClass('lia-orientation-landscape',isLandscape);}
function orientationChangeHandler($event){setOrientationStyle();minHeight=450;handleResizeThrottle($event);}
function toggleFullscreenHandler($event){var keyCode=$event.keyCode||$event.which;if(keyCode===$liEventManager.KeyCodes.f){$scope.fullscreen();}}
function fullscreenChangeHandler($event){$body.toggleClass('lia-fullscreen',$window.screenfull.isFullscreen);redrawIcons();$liEventManager.stop($event);}
var currentImageRes;var currentImageId;var minHeight=450;var $imgContainer;var $icons;var hasMore;var loadMoreThreshold;var preLoaded=[];var preLoadThreshold=3;var preLoadCount=5;var handleResizeThrottle=$liLodashUtils.debounce(function(){$timeout(resizeContainer);},250);var page=0;var imageIndex=0;var filmstripStart=null;var filmstripEnd=null;var isMobile=$liContextManager.server().device_mode==='MOBILE';var viewport=$document[0].querySelector('meta[name="viewport"]');var originalViewportContent=viewport?viewport.content:null;var $$window=angular.element($window);var $body=angular.element($document[0].body);var isLandscape;$liParamUtils.initTypeTemplate($scope,'media/image-lightbox/image-lightbox',$scope.liType,'media');$scope.showAvatar=$liContextManager.currentUserSettings()['config.enable_avatar'];$scope.images=$scope.images!==undefined?$scope.images:[];$scope.limit=$scope.limit!==undefined?$scope.limit:100;$scope.loader=!$liImageUtils.inCache(getImageHref());$scope.getImageHref=getImageHref;$scope.setAltText=$liImageUtils.getAltText;$scope.isForceShow=false;$scope.allowFullscreen=$window.screenfull.enabled;$scope.isFullscreen=function(){return $window.screenfull.isFullscreen;};hasMore=$scope.images.length<=$scope.limit;loadMoreThreshold=Math.round($scope.limit/2);$scope.closeModal=function(){if(isMobile&&originalViewportContent){viewport.content=originalViewportContent;}
$body.removeClass('lia-orientation-landscape');$body.removeClass('lia-fullscreen');$scope.close();$$window.off('keyup',handleKey).off('resize',handleResizeThrottle).off('orientationchange',orientationChangeHandler).off('keypress',toggleFullscreenHandler);if($window.screenfull.enabled){$$window.off($window.screenfull.raw.fullscreenchange,fullscreenChangeHandler);}};$scope.prev=function($event){$scope.moveTo($event,$scope.index-1);};$scope.next=function($event){$scope.moveTo($event,$scope.index+1);};$scope.prevPage=function($event){$liEventManager.stop($event);var currentRange=$scope.filmstripRange();filmstripStart=Math.max(0,currentRange.start-$scope.filmstripSize);filmstripEnd=filmstripStart+$scope.filmstripSize;};$scope.nextPage=function($event){$liEventManager.stop($event);var currentRange=$scope.filmstripRange();if(currentRange.end<$scope.images.length){filmstripEnd=Math.min($scope.images.length,currentRange.end+$scope.filmstripSize);filmstripStart=filmstripEnd-$scope.filmstripSize;checkLoadMore();}};$scope.moveTo=function($event,index){$liEventManager.stop($event);if(index>=0&&index<$scope.images.length){$scope.index=index;$scope.loader=!$liImageUtils.inCache(getImageHref());filmstripStart=filmstripEnd=null;checkLoadMore();}};$scope.filmstripRange=function(){var start;var end;if(filmstripStart!==null&&filmstripEnd!==null){start=filmstripStart;end=filmstripEnd;}else if($scope.filmstripSize>$scope.images.length){start=0;end=$scope.filmstripSize;}else if($scope.index<$scope.filmstripSize/2){start=0;end=$scope.filmstripSize;}else if($scope.index>$scope.images.length-$scope.filmstripSize){start=$scope.images.length-$scope.filmstripSize;end=$scope.images.length;}else{var delta=Math.floor($scope.filmstripSize/2);start=$scope.index-delta;end=$scope.index+$scope.filmstripSize-delta;}
return{start:start,end:end};};$scope.forceShow=function($event){var filmstripSizeName=liMediaImageLightboxConfig.filmstripSizes[$scope.filmstripSize];if(filmstripSizeName==='xs'||filmstripSizeName==='sm'&&isLandscape){$liEventManager.stop($event);$scope.isForceShow=!$scope.isForceShow;return $scope.isForceShow;}};$scope.$watch('images',function(images){angular.forEach(images,function(image){if(!image.hasOwnProperty('imageIndex')){image.imageIndex=imageIndex++;}});});$scope.hideLoader=function(){$scope.loader=false;resizeContainer();};$scope.fullscreen=function(){if($window.screenfull.enabled){$window.screenfull.toggle(getImageContainer()[0]);}};$scope.$on('liLightboxImageChange',function($event,newImageId){if(newImageId!==undefined){if(newImageId!==$scope.image.id){setImage(newImageId);}}else{$scope.closeModal();}});$scope.$watch('image',function(image){if(currentImageId!==image.id&&image.type){currentImageId=image.id;$rootScope.$broadcast(liMediaImageLightboxConfig.events.changeImage,image);$liEventManager.sendEvent('media-view',image,$scope.eventContext);resizeContainer();}});$scope.downloadUrl=function(image){return image.original_href&&$liUrlManager.adjustUrl(image.original_href).addPathParam('download','true').build();};angular.forEach(liMediaImageLightboxConfig.imageSizes,function(screenSize,imageSize){$liMatchmediaUtils.addListenerForSizes(screenSize,function(){currentImageRes=imageSize;});});angular.forEach(liMediaImageLightboxConfig.filmstripSizes,function(screenSize,filmstripSize){$liMatchmediaUtils.addListenerForSizes(screenSize,function(){$scope.filmstripSize=parseInt(filmstripSize,10);});});$$window.on('keyup',handleKey).on('resize',handleResizeThrottle).on('orientationchange',orientationChangeHandler).on('keypress',toggleFullscreenHandler);if($window.screenfull.enabled){$$window.on($window.screenfull.raw.fullscreenchange,fullscreenChangeHandler);}
setOrientationStyle();$scope.getCropUrl=$liImageManager.getCropUrl;if($scope.images.length===0){_loadImages($scope.limit).then(function(){preLoad(1,preLoadCount);});}else{page++;preLoad(1,preLoadCount);checkLoadMore();}}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.directives.messages.message-image',['li.services.utils.url-manager','li.services.media.image-manager','li.services.messages.message-manager','li.services.events.event-manager','li.services.utils.param-utils','li.directives.media.image-lightbox','ui.bootstrap','li.directives.common.enter-or-click']).directive('liMessagesMessageImage',['$liUrlManager','$timeout','$document','$templateCache','$compile','$liMessageManager','$liImageManager','$liEventManager','$liParamUtils',function($liUrlManager,$timeout,$document,$templateCache,$compile,$liMessageManager,$liImageManager,$liEventManager,$liParamUtils){return{restrict:'A',scope:{messageUid:'=liMessageUid',imageDisplayId:'=liImageDisplayId',imageUrl:'@liImageUrl',bypassLightboxIfLinked:'=liBypassLightboxWhenLinked',useHoverLinks:'=liUseHoverLinks'},replace:true,link:function link($scope,$element){function getAncestorByType(element,type){while(element.parentNode){element=element.parentNode;if(element!==null&&element.nodeName.toLowerCase()===type){return element;}}}
function hideActions(){$wrapper.addClass('lia-message-image-actions-hidden');$timeout(function(){$document.one('mouseover',function(){$wrapper.removeClass('lia-message-image-actions-hidden');});},100);}
function doActionsFit(){var imageWidth=$element[0].width||$element[0].clientWidth;return $mediaActions[0].clientWidth<imageWidth-25&&imageWidth>110+($anchor?50:0);}
function addIconSizeClasses(){if(!doActionsFit()){$wrapper.addClass('lia-message-image-actions-narrow');if(!doActionsFit()){$wrapper.addClass('lia-message-image-actions-below');}}}
function getImagesForMessage(limit,offset){var fields=['id','original_href','thumb_href','upload_time','upload_time_friendly','title','description','owner.login','owner.rank.name','owner.avatar.message','owner.view_href','owner.rank.icon_left','owner.rank.icon_right','owner.rank.bold','owner.rank.color','height','width','album.view_href','album.title'];return $liImageManager.getImagesForMessage($scope.messageUid,fields,null,limit,offset);}
function goToLinkHandler($event){$liEventManager.stop($event);$anchor[0].click();hideActions();}
function openLightboxHandler($event){$liEventManager.stop($event);$event.target.blur();lightbox.open({id:$scope.imageDisplayId,original_href:$scope.imageUrl});}
if(!$liParamUtils.validateParams('liMessageImage',$scope,['imageDisplayId','messageUid'])){return;}
var template=$templateCache.get('messages/message-image/message-image.tpl.html');var $mediaActions=$compile(template)($scope);var $anchor=angular.element(getAncestorByType($element[0],'a'));var $wrapper=$element.wrap('<span class="lia-message-image-wrapper">').parent();var lightbox=$liImageManager.lightbox([],getImagesForMessage,100,'message-images-'+$scope.messageUid,null,{id:$scope.messageUid});$element.after($mediaActions);$element.on('mouseover',addIconSizeClasses);var altImage;for(var i=0;i<$wrapper.parent().length;i++){var currentSpanElement=$wrapper.parent()[i];if(currentSpanElement.hasAttribute('image-alt')){altImage=currentSpanElement.getAttribute('image-alt');break;}}
for(var j=0;j<$element.length;j++){var currentImageElement=$element[j];if(currentImageElement.hasAttribute('li-messages-message-image')){currentImageElement.setAttribute('alt',altImage);break;}}
if(!$scope.bypassLightboxIfLinked||$anchor.length===0){$scope.open=openLightboxHandler;$element.on('click',$scope.open);$wrapper.parent().on('click',$liEventManager.stop);}
$scope.goToLink=goToLinkHandler;if($anchor.length>0){$scope.link=$anchor.attr('href');$scope.hostName=$liUrlManager.getHostName($scope.link);}}};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){'use strict';angular.module('li.directives.common.non-bindable',[]).directive('liCommonNonBindable',['$document','$compile','$rootScope',function($document,$compile,$rootScope){return{restrict:'A',compile:function compile($element){var allowedElements=$element[0].querySelectorAll('[li-bindable]:not([li-compiled])');angular.forEach(allowedElements,function(elm){$compile(angular.element(elm))($rootScope);angular.element(elm).attr('li-compiled','true');});},terminal:true,priority:1000};}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){angular.module('li.directives.common.slide-menu').run(['$templateCache',function($templateCache){$templateCache.put('common/slide-menu/slide-menu.tpl.html','<div class="lia-common-slide-menu {{liSlideMenuClass}}" ng-swipe-right="swipeToggleMenu(\'right\')"\n'+'     ng-swipe-left="swipeToggleMenu(\'left\')">\n'+'  <nav class="lia-slide-menu-content\n'+'              lia-slide-menu-content-{{orientation}}\n'+'              lia-slide-menu-content-{{direction}}"\n'+'       ng-class="addClass ? \'lia-slide-menu-content-open\' : \'\'"\n'+'       ng-if="showMenu"\n'+'       ng-transclude\n'+'       role="navigation"\n'+'       li-common-trap-focus>\n'+'  </nav>\n'+'  <div class="lia-slide-menu-overlay"\n'+'       ng-class="addClass ? \'lia-slide-menu-overlay-open\' : \'\'"\n'+'       ng-if="showMenu"\n'+'       ng-click="toggleMenu()">\n'+'  </div>\n'+'</div>\n'+'');}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){angular.module('li.directives.community.navigation-leaf-group').run(['$templateCache',function($templateCache){$templateCache.put('community/navigation-leaf-group/navigation-leaf-group.tpl.html','<ul class="lia-nav-item-container lia-nav-interaction-styles" li-common-text-ready="\'community\'">\n'+'  <li ng-repeat="child in liNodes"\n'+'      ng-class="[\'lia-type-\' + child.conversation_style, \'lia-nav-\' + child.id.toLowerCase(), \'lia-nav-item\']">\n'+'    <a class="lia-nav-action"\n'+'       title="{{child.title}}"\n'+'       ng-click="goToPage(child.view_href)"\n'+'       href="{{child.view_href}}">\n'+'          <span ng-if="child.type === \'grouphub\'"\n'+'                class="lia-nav-icon lia-nav-icon-left lia-fa lia-fa-icon lia-fa-grouphub lia-img-icon-grouphub-board"\n'+'                role="img"\n'+'                aria-label="{{\'li.community.navigation.type.\' + child.conversation_style + \'.aria-label\' | translate}}"></span>\n'+'      <span ng-if="child.type !== \'grouphub\'"\n'+'            class="lia-nav-icon lia-nav-icon-left lia-fa lia-fa-icon lia-fa-{{child.conversation_style}} lia-img-icon-{{child.conversation_style}}-board"\n'+'            role="img"\n'+'            aria-label="{{\'li.community.navigation.type.\' + child.conversation_style + \'.aria-label\' | translate}}"></span>\n'+'      <span class="lia-nav-item-text">{{child.title}}</span>\n'+'    </a>\n'+'  </li>\n'+'</ul>\n'+'');}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){angular.module('li.directives.community.navigation').run(['$templateCache',function($templateCache){$templateCache.put('community/navigation/navigation.tpl.html','<ul class="lia-community-nav-node lia-nav-item-container lia-nav-pos-left"\n'+'    li-common-text-ready="\'community\'"\n'+'    ng-repeat="node in community"\n'+'    ng-if="showNode(node.id)"\n'+'    ng-class="{\'lia-nav-pos-end\' : hasExited(node.id),\n'+'              \'lia-nav-pos-start\' : node.id === enteringLeftNodeId,\n'+'              \'lia-nav-selected\' : node.id === selectedNodeId && !hasExited(node.id)}"\n'+'    li-common-trap-focus>\n'+'\n'+'  <li class="lia-nav-header lia-nav-item">\n'+'    <button class="lia-nav-menu-trigger lia-slide-menu-trigger lia-nav-icon lia-nav-icon-left"\n'+'        title="{{\'li.community.navigation.close-menu\' | translate}}"\n'+'        aria-label="{{\'li.community.navigation.close-menu\' | translate}}"\n'+'        ng-click="toggleMenu()">\n'+'        {{\'li.community.navigation.close-menu\' | translate}}\n'+'    </button>\n'+'    <a class="lia-nav-header-title"\n'+'        title="{{node.title}}"\n'+'        aria-label="{{node.title}}"\n'+'        ng-click="goToPage(node.view_href)"\n'+'        href="{{node.view_href}}"\n'+'        li-common-auto-focus>\n'+'      <span class="lia-nav-item-text lia-nav-header-text">{{node.title}}</span>\n'+'    </a>\n'+'  </li>\n'+'\n'+'  <li ng-if="node.parent_category.id" class="lia-nav-back lia-nav-item">\n'+'    <a class="lia-nav-action"\n'+'        title="{{\'li.community.navigation.back\' | translate}}"\n'+'        aria-label="{{\'li.community.navigation.back\' | translate}}"\n'+'        ng-click="setCurrent(node.parent_category.id, true, $event);"\n'+'        href="javascript:void(0);">\n'+'      <span class="lia-nav-icon lia-nav-icon-left lia-fa lia-fa-angle-left" role="img" aria-label="{{\'li.community.navigation.back\' | translate}}"></span>\n'+'      <span class="lia-nav-item-text">{{\'li.community.navigation.back\' | translate}}</span>\n'+'    </a>\n'+'  </li>\n'+'\n'+'  <!-- category list -->\n'+'  <ul class="lia-nav-item-container lia-nav-subcategories">\n'+'    <li ng-repeat="child in node.descendant_categories.items"\n'+'        ng-class="[{\'lia-nav-empty-category\' : isEmpty(child.id)}, \'lia-type-\' + child.type, \'lia-nav-\' + child.id.toLowerCase(), \'lia-nav-item\']">\n'+'      <a class="lia-nav-action"\n'+'          title="{{child.title}}"\n'+'          href="{{child.view_href}}"\n'+'          ng-click="setCurrent(child.id, false, $event);" >\n'+'        <span class="lia-nav-icon lia-nav-icon-left lia-fa lia-fa-icon lia-fa-{{child.type}} lia-img-icon-{{child.type}}"\n'+'            role="img"\n'+'            aria-label="{{\'li.community.navigation.type.\' + child.type + \'.aria-label\' | translate}}"></span>\n'+'        <span class="lia-nav-item-text">{{child.title}}</span>\n'+'        <span class="lia-nav-icon lia-nav-icon-right lia-fa lia-fa-icon lia-fa-angle-right" role="img" aria-label="{{\'li.community.navigation.navigate-more-aria-label\' | translate}}"></span>\n'+'      </a>\n'+'    </li>\n'+'  </ul>\n'+'\n'+'  <!-- grouphub list -->\n'+'  <li:community-navigation-leaf-group li-nodes="node.grouphubs.items"></li:community-navigation-leaf-group>\n'+'\n'+'  <!-- board list -->\n'+'  <li:community-navigation-leaf-group li-nodes="node.boards.items"></li:community-navigation-leaf-group>\n'+'</ul>\n'+'');}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){angular.module('li.directives.media.publishing-history').run(['$templateCache',function($templateCache){$templateCache.put('media/publishing-history/publishing-history.tpl.html','<div class="lia-media-publishing-history" ng-show="messages.length > 0" li-common-text-ready="\'media\'">\n'+'  <span class="lia-publishing-history-title">{{\'li.media.publishing-history.title\'|translate}}</span>\n'+'    <ul class="lia-publishing-history-items">\n'+'      <li class="lia-publishing-history-item" ng-repeat="message in messages track by $index">\n'+'          <div class="lia-publishing-history-item-header lia-publishing-history-row"\n'+'               ng-bind-html="\'li.media.publishing-history.date-and-board\'|translate:{date:getPostDate(message),\n'+'               boardLink: message.board.view_href, boardTitle:message.board.title}:\'messageformat\'|liUnsafe">\n'+'          </div>\n'+'          <a class="lia-publishing-history-item-subject lia-publishing-history-row" ng-href="{{message.view_href}}">{{message.subject}}</a>\n'+'          {{\'li.media.publishing-history.reply-count\'|translate:{count:message.replies.count}:\'messageformat\'}}\n'+'      </li>\n'+'    </ul>\n'+'</div>\n'+'');}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){angular.module('li.directives.users.user-login').run(['$templateCache',function($templateCache){$templateCache.put('users/user-login/user-login.tpl.html','<span class="lia-users-user-login UserName lia-user-name" ng-class="{\'lia-anonymous-user\': !user.view_href}" li-common-text-ready="\'users\'">\n'+'  <img ng-src="{{user.rank.icon_left}}" ng-if="user.rank.icon_left" class="lia-user-rank-icon lia-user-rank-icon-left" ng-attr-title="{{\'li.users.user-login.title-text\' | translate: {\'title\': user.rank.name} }}" ng-attr-alt="{{\'li.users.user-login.alt-text\' | translate: {\'alt\': user.rank.name} }}" />\n'+'  <a class="lia-user-login lia-user-name-link lia-link-navigation"\n'+'     ng-class="{\'login-bold\': user.rank.bold}"\n'+'     ng-style="user.rank.color && {\'color\': \'#\' + user.rank.color }"\n'+'     ng-href="{{user.view_href}}"\n'+'     target="_self"\n'+'     ng-if="user.view_href">{{user.login}}</a>\n'+'  <span class="lia-user-login lia-user-name-link lia-link-disabled"\n'+'        ng-class="{\'login-bold\': user.rank.bold}"\n'+'        ng-style="user.rank.color && {\'color\': \'#\' + user.rank.color }"\n'+'        ng-if="!user.view_href">{{user.login}}</span>\n'+'  <img ng-src="{{user.rank.icon_right}}" ng-if="user.rank.icon_right" class="lia-user-rank-icon lia-user-rank-icon-right" ng-attr-title="{{\'li.users.user-login.title-text\' | translate: {\'title\': user.rank.name} }}" ng-attr-alt="{{\'li.users.user-login.alt-text\' | translate: {\'alt\': user.rank.name} }}" />\n'+'</span>\n'+'');}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){angular.module('li.directives.kudos.kudo').run(['$templateCache',function($templateCache){$templateCache.put('kudos/kudo/kudo.reverse.tpl.html','<div class="lia-kudos-kudo lia-kudos-kudo-reversed"\n'+'     li-common-text-ready="\'kudos\'"\n'+'     ng-show="state !== \'feature_disabled\' && state !== \'disabled\'"\n'+'     ng-class="cssClasses()">\n'+'  <span class="lia-button-wrapper lia-button-wrapper-primary lia-kudos-give-wrapper" ng-click="giveOrRevokeKudos($event)">\n'+'    <button class="lia-button lia-button-primary lia-button-icon lia-kudos-button"\n'+'            aria-label="{{ \'li.kudos.kudo.\' + state + \'-aria-label\' | translate }}"\n'+'            ng-attr-title="{{ \'li.kudos.kudo.\' + state | translate }}">\n'+'      <i class="lia-fa lia-fa-thumbs-up lia-kudos-kudo-icon" ng-class="{ \'lia-kudos-{{entity.type}}-kudos-icon\': entity.type }"></i>\n'+'      {{ \'li.kudos.kudo.button.\' + state | translate }}\n'+'    </button>\n'+'  </span>\n'+'  <span class="lia-kudos-count-wrapper lia-button-wrapper" ng-click="gotoWhoKudoed()" aria-live="assertive">\n'+'    <span class="lia-kudos-count lia-button lia-button-primary lia-button-icon lia-button-inversed"\n'+'          aria-label="{{ \'li.kudos.kudo.kudosAriaLabel\' | translate : {\'count\': entity.kudos.sum.weight} }}">\n'+'      <span class="lia-kudos-count-link lia-link-disabled" ng-if="entity.kudos.sum.weight === 0"\n'+'            ng-bind-html="\'li.kudos.kudo.kudos\'|translate:{\'count\':entity.kudos.sum.weight}:\'messageformat\'|liUnsafe"></span>\n'+'      <a class="lia-kudos-count-link lia-link-navigation" ng-if="entity.kudos.sum.weight > 0"\n'+'         ng-href="{{whoKudoedUrl()}}" ng-bind-html="\'li.kudos.kudo.kudos\'|translate:{\'count\':entity.kudos.sum.weight}:\'messageformat\'|liUnsafe"></a>\n'+'    </span>\n'+'  </span>\n'+'</div>\n'+'');}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){angular.module('li.directives.kudos.kudo').run(['$templateCache',function($templateCache){$templateCache.put('kudos/kudo/kudo.tpl.html','<div class="lia-kudos-kudo"\n'+'     li-common-text-ready="\'kudos\'"\n'+'     ng-show="entity.kudos.sum.weight !== undefined && state !== undefined && state !== \'feature_disabled\' && state !== \'disabled\'"\n'+'     ng-class="cssClasses()"\n'+'     ng-attr-title="{{ \'li.kudos.kudo.\' + state | translate }}">\n'+'  <span class="lia-kudos-count-wrapper lia-button-wrapper" ng-click="gotoWhoKudoed()" aria-live="assertive">\n'+'    <span class="lia-kudos-count lia-button lia-button-primary lia-button-icon lia-button-inversed"\n'+'          aria-label="{{ \'li.kudos.kudo.kudosAriaLabel\' | translate : {\'count\': entity.kudos.sum.weight} }}">\n'+'      <span class="lia-kudos-count-link lia-link-disabled" ng-if="entity.kudos.sum.weight === 0"\n'+'            ng-bind-html="\'li.kudos.kudo.kudos\' | translate: { \'count\': entity.kudos.sum.weight }: \'messageformat\' | liUnsafe"></span>\n'+'      <a class="lia-kudos-count-link lia-link-navigation" ng-if="entity.kudos.sum.weight > 0" ng-href="{{ whoKudoedUrl() }}"\n'+'         ng-bind-html="\'li.kudos.kudo.kudos\' | translate: {\'count\':entity.kudos.sum.weight}: \'messageformat\' | liUnsafe"></a>\n'+'    </span>\n'+'  </span>\n'+'  <span class="lia-button-wrapper lia-button-wrapper-primary lia-kudos-give-wrapper" ng-click="giveOrRevokeKudos($event)">\n'+'    <button class="lia-button lia-button-primary lia-button-icon lia-kudos-button"\n'+'            aria-label="{{ \'li.kudos.kudo.\' + state + \'-aria-label\' | translate }}">\n'+'      <i class="lia-fa lia-fa-thumbs-up lia-kudos-kudo-icon" ng-class="{ \'lia-kudos-{{entity.type}}-kudos-icon\': entity.type }"></i>\n'+'    </button>\n'+'  </span>\n'+'</div>\n'+'');}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){angular.module('li.directives.media.download-media').run(['$templateCache',function($templateCache){$templateCache.put('media/download-media/download-media.tpl.html','<span class="lia-media-download-icon lia-button-wrapper lia-button-wrapper-primary"\n'+'      ng-click="download($event)">\n'+'  <a download\n'+'     ng-attr-title="{{ \'li.media.download-media.\' + liType | translate }}"\n'+'     aria-label="{{ \'li.media.download-media.\' + liType + \'-aria-label\' | translate }}"\n'+'     class="lia-image-download-link lia-button lia-button-primary lia-button-inversed lia-button-icon"\n'+'     ng-href="{{ liMediaUrl }}"\n'+'     li-common-element-hook="downloadElement">\n'+'      <i class="lia-fa lia-fa-download lia-image-download-link-icon"></i>\n'+'  </a>\n'+'</span>\n'+'');}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){angular.module('li.directives.moderation.flag-entity').run(['$templateCache',function($templateCache){$templateCache.put('moderation/flag-entity/flag-entity.tpl.html','<span class="lia-moderation-flag-entity lia-button-wrapper lia-button-wrapper-primary lia-entity-flag-{{state}}"\n'+'      ng-class="{ \'lia-link-disabled\': !canFlag() }"\n'+'      ng-click="flag($event)">\n'+'  <button class="lia-button lia-button-primary lia-button-inversed lia-button-icon lia-flag-button"\n'+'          li-common-text-ready="\'moderation\'"\n'+'          ng-attr-title="{{ \'li.moderation.flag-entity.\' + state | translate }}"\n'+'          aria-label="{{ \'li.moderation.flag-entity.\' + state | translate }}">\n'+'    <i class="lia-fa lia-fa-flag lia-flagged-icon"></i>\n'+'  </button>\n'+'</span>\n'+'');}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){angular.module('li.directives.media.image-lightbox').run(['$templateCache',function($templateCache){$templateCache.put('media/image-lightbox/image-lightbox.media.tpl.html','<div class="lia-media-image-lightbox lia-content"\n'+'     ng-class="{\'lia-show-controls\': isForceShow}"\n'+'     ng-click="forceShow($event)"\n'+'     li-common-text-ready="\'media\'">\n'+'  <div class="lia-lightbox-main-image"\n'+'       ng-swipe-left="next($event)"\n'+'       ng-swipe-right="prev($event)">\n'+'    <img class="lia-image lia-no-select" ng-src="{{getImageHref()}}" li-common-text-ready="\'media\'"\n'+'         ng-attr-title="{{ \'li.media.image-lightbox.selected-image.title-text\' | translate:{\'title\': image.title} }}"\n'+'         ng-attr-alt="{{ \'li.media.image-lightbox.selected-image.alt-text\' | translate:{\'alt\': setAltText(image)} }}"\n'+'         li-common-img-load="hideLoader()" ng-show="!loader">\n'+'    <i class="lia-fa lia-fa-spinner lia-fa-spin lia-lightbox-image-loader" ng-show="loader"></i>\n'+'    <div class="lia-lightbox-actions-container lia-no-select lia-button-container">\n'+'      <i class="lia-fa lia-lightbox-button lia-lightbox-fullscreen-button" role="button" tabindex="0"\n'+'         aria-label="{{ \'li.media.image-lightbox.controls.fullscreen.aria-label\' | translate }}"\n'+'         li-enter-or-click="fullscreen()"\n'+'         ng-if="allowFullscreen"\n'+'         ng-class="\'lia-fa-\' + (isFullscreen() ? \'compress\' : \'expand\')"></i>\n'+'      <i class="lia-fa lia-fa-times lia-lightbox-button lia-lightbox-close-button" role="button" tabindex="0"\n'+'         aria-label="{{ \'li.media.image-lightbox.controls.close.aria-label\' | translate }}"\n'+'         li-enter-or-click="closeModal()"></i>\n'+'    </div>\n'+'    <div class="lia-lightbox-prev-container lia-no-select lia-button-container"\n'+'         li-enter-or-click="prev($event)"\n'+'         ng-class="{\'lia-button-disabled\': index === 0 }">\n'+'      <i class="lia-fa lia-fa-chevron-left lia-lightbox-button" role="button" tabindex="0"\n'+'         aria-label="{{ \'li.media.image-lightbox.controls.prev-img.aria-label\' | translate }}"\n'+'         aria-disabled="{{ index === 0 }}"></i>\n'+'    </div>\n'+'    <div class="lia-lightbox-next-container lia-no-select lia-button-container"\n'+'         li-enter-or-click="next($event)"\n'+'         ng-class="{\'lia-button-disabled\': index === images.length - 1 }">\n'+'      <i class="lia-fa lia-fa-chevron-right lia-lightbox-button" role="button" tabindex="0"\n'+'         aria-label="{{ \'li.media.image-lightbox.controls.next-img.aria-label\' | translate }}"\n'+'         aria-disabled="{{ index === images.length - 1 }}"></i>\n'+'    </div>\n'+'    <figcaption class="lia-lightbox-image-caption" ng-if="image.description.length > 0" ng-bind="image.description"></figcaption>\n'+'  </div>\n'+'\n'+'  <div class="lia-lightbox-info-wrapper" ng-click="$event.stopPropagation()">\n'+'    <figcaption class="lia-lightbox-image-caption" ng-if="image.description.length > 0" ng-bind="image.description"></figcaption>\n'+'    <div class="lia-lightbox-info clearfix">\n'+'      <div class="lia-lightbox-context UserAvatar">\n'+'        <img ng-src="{{image.owner.avatar.message}}" class="lia-user-avatar" ng-if="showAvatar"\n'+'             ng-attr-title="{{ \'li.media.image-lightbox.selected-image.owner.title-text\' | translate:{\'owner\': image.owner.login} }}"\n'+'             ng-attr-alt="{{ \'li.media.image-lightbox.selected-image.owner.alt-text\' | translate:{\'owner\': image.owner.login} }}"/>\n'+'        <li:users-user-login user="image.owner"></li:users-user-login>\n'+'        <span class="lia-bull-spacer">&bull;</span>\n'+'        <span class="lia-image-upload-time">{{image.upload_time|liDate:image.upload_time_friendly}}</span>\n'+'        <a ng-href="{{image.album.view_href}}" class="lia-lightbox-image-album">{{image.album.title}}</a>\n'+'      </div>\n'+'      <div class="lia-lightbox-actions lia-button-group lia-button-group-left">\n'+'        <li:kudos-kudo li-entity="image"></li:kudos-kudo>\n'+'        <li:moderation-flag-entity li-entity="image"></li:moderation-flag-entity>\n'+'        <li:media-download-media li-media-url="downloadUrl(image)" li-type="\'image\'"></li:media-download-media>\n'+'      </div>\n'+'    </div>\n'+'  </div>\n'+'\n'+'  <div class="lia-filmstrip" ng-if="images.length > 1 && filmstripSize > 0" ng-swipe-left="nextPage($event)" ng-swipe-right="prevPage($event)">\n'+'\n'+'    <div class="lia-filmstrip-prev-container lia-no-select lia-button-container"\n'+'         li-enter-or-click="prevPage($event)"\n'+'         ng-class="{\'lia-button-disabled\': filmstripRange().start === 0 }">\n'+'      <i class="lia-fa lia-fa-chevron-left lia-lightbox-button lia-lightbox-button-inverted" role="button" tabindex="0"\n'+'         aria-label="{{ \'li.media.image-lightbox.controls.prev-page.aria-label\' | translate }}"\n'+'         aria-disabled="{{ filmstripRange().start === 0 }}"></i>\n'+'    </div>\n'+'    <ul class="lia-list-tile">\n'+'      <li class="lia-media-image-item lia-no-select"\n'+'          ng-repeat="image in images.slice(filmstripRange().start, filmstripRange().end) track by image.imageIndex"\n'+'          ng-class="{\'lia-image-selected\': index === image.imageIndex}"\n'+'          li-common-append-space>\n'+'        <div class="lia-media-image-frame" li-enter-or-click="moveTo($event, image.imageIndex)" role="button" tabindex="0">\n'+'          <img class="lia-media-image" ng-src="{{getCropUrl(image.thumb_href, image.visibility)}}"\n'+'               ng-attr-title="{{ \'li.media.image-lightbox.film-strip-images.title-text\' | translate:{\'title\': image.title} }}"\n'+'               ng-attr-alt="{{ \'li.media.image-lightbox.film-strip-images.alt-text\' | translate:{\'alt\': setAltText(image)} }}"/>\n'+'        </div>\n'+'      </li>\n'+'    </ul>\n'+'\n'+'    <div class="lia-filmstrip-next-container lia-no-select lia-button-container"\n'+'         li-enter-or-click="nextPage($event)"\n'+'         ng-class="{\'lia-button-disabled\': filmstripRange().end >= images.length }">\n'+'      <i class="lia-fa lia-fa-chevron-right lia-lightbox-button lia-lightbox-button-inverted" role="button" tabindex="0"\n'+'         aria-label="{{ \'li.media.image-lightbox.controls.next-page.aria-label\' | translate }}"\n'+'         aria-disabled="{{ filmstripRange().end >= images.length }}"></i>\n'+'    </div>\n'+'  </div>\n'+'\n'+'  <li:media-publishing-history li-image-id="image.id" ng-if="image.id && !loader"></li:media-publishing-history>\n'+'\n'+'</div>\n'+'');}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){angular.module('li.directives.media.image-lightbox').run(['$templateCache',function($templateCache){$templateCache.put('media/image-lightbox/image-lightbox.products.tpl.html','<div class="lia-products-image-lightbox lia-content"\n'+'     ng-class="{\'lia-show-controls\': isForceShow}"\n'+'     ng-click="forceShow($event)">\n'+'  <div class="lia-lightbox-main-image"\n'+'       ng-swipe-left="next($event)"\n'+'       ng-swipe-right="prev($event)">\n'+'    <img class="lia-image lia-no-select" ng-src="{{getImageHref()}}"\n'+'         li-common-img-load="hideLoader()" ng-show="!loader" li-common-text-ready="\'media\'"\n'+'         ng-attr-alt="{{\'li.media.image-lightbox.product.title-text\' | translate}}"\n'+'         ng-attr-alt="{{\'li.media.image-lightbox.product.alt-text\' | translate}}">\n'+'    <i class="lia-fa lia-fa-spinner lia-fa-spin lia-lightbox-image-loader" ng-show="loader"></i>\n'+'    <div class="lia-lightbox-actions-container lia-no-select lia-button-container">\n'+'      <i class="lia-fa lia-lightbox-button lia-lightbox-fullscreen-button" role="button"\n'+'         aria-label="{{ \'li.media.image-lightbox.controls.fullscreen.aria-label\' | translate }}"\n'+'         ng-click="fullscreen()"\n'+'         ng-if="allowFullscreen"\n'+'         ng-class="\'lia-fa-\' + (isFullscreen() ? \'compress\' : \'expand\')"></i>\n'+'      <i class="lia-fa lia-fa-times lia-lightbox-button lia-lightbox-close-button" role="button"\n'+'         aria-label="{{ \'li.media.image-lightbox.controls.close.aria-label\' | translate }}"\n'+'         ng-click="closeModal()"></i>\n'+'    </div>\n'+'    <div class="lia-lightbox-prev-container lia-no-select lia-button-container"\n'+'         ng-click="prev($event)"\n'+'         ng-class="{\'lia-button-disabled\': index === 0 }">\n'+'      <i class="lia-fa lia-fa-chevron-left lia-lightbox-button" role="button"\n'+'         aria-label="{{ \'li.media.image-lightbox.controls.prev-img.aria-label\' | translate }}"></i>\n'+'    </div>\n'+'    <div class="lia-lightbox-next-container lia-no-select lia-button-container"\n'+'         ng-click="next($event)"\n'+'         ng-class="{\'lia-button-disabled\': index === images.length - 1 }">\n'+'      <i class="lia-fa lia-fa-chevron-right lia-lightbox-button" role="button"\n'+'         aria-label="{{ \'li.media.image-lightbox.controls.next-img.aria-label\' | translate }}"></i>\n'+'    </div>\n'+'  </div>\n'+'\n'+'</div>\n'+'');}]);})(window.LITHIUM&&LITHIUM.angular||angular);
;(function(angular){angular.module('li.directives.messages.message-image').run(['$templateCache',function($templateCache){$templateCache.put('messages/message-image/message-image.tpl.html','<span ng-if="useHoverLinks" class="lia-messages-message-image" li-common-text-ready="\'messages\'">\n'+'  <span ng-if="link" li-enter-or-click="goToLink($event)" class="lia-message-image-link-wrapper" role="button" tabindex="0">\n'+'    <i class="lia-fa lia-fa-external-link"></i>\n'+'    <span class="lia-media-link-text">{{hostName}}</span>\n'+'  </span>\n'+'  <i class="lia-fa lia-fa-search-plus lia-media-lightbox-trigger" li-enter-or-click="open($event)"\n'+'   aria-label="{{ \'li.messages.message-image.controls.enlarge-img.aria-label\' | translate }}" role="button" tabindex="0"></i>\n'+'</span>\n'+'');}]);})(window.LITHIUM&&LITHIUM.angular||angular);
